(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function wh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fd={exports:{}},ca={},hd={exports:{}},de={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ws=Symbol.for("react.element"),vh=Symbol.for("react.portal"),_h=Symbol.for("react.fragment"),bh=Symbol.for("react.strict_mode"),kh=Symbol.for("react.profiler"),jh=Symbol.for("react.provider"),Sh=Symbol.for("react.context"),Nh=Symbol.for("react.forward_ref"),Ch=Symbol.for("react.suspense"),zh=Symbol.for("react.memo"),Eh=Symbol.for("react.lazy"),_c=Symbol.iterator;function Lh(e){return e===null||typeof e!="object"?null:(e=_c&&e[_c]||e["@@iterator"],typeof e=="function"?e:null)}var md={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gd=Object.assign,xd={};function Hr(e,t,n){this.props=e,this.context=t,this.refs=xd,this.updater=n||md}Hr.prototype.isReactComponent={};Hr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Hr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yd(){}yd.prototype=Hr.prototype;function wl(e,t,n){this.props=e,this.context=t,this.refs=xd,this.updater=n||md}var vl=wl.prototype=new yd;vl.constructor=wl;gd(vl,Hr.prototype);vl.isPureReactComponent=!0;var bc=Array.isArray,wd=Object.prototype.hasOwnProperty,_l={current:null},vd={key:!0,ref:!0,__self:!0,__source:!0};function _d(e,t,n){var r,s={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)wd.call(t,r)&&!vd.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ws,type:e,key:i,ref:o,props:s,_owner:_l.current}}function Ph(e,t){return{$$typeof:Ws,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ws}function Oh(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var kc=/\/+/g;function Ea(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Oh(""+e.key):t.toString(36)}function xi(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ws:case vh:o=!0}}if(o)return o=e,s=s(o),e=r===""?"."+Ea(o,0):r,bc(s)?(n="",e!=null&&(n=e.replace(kc,"$&/")+"/"),xi(s,t,n,"",function(u){return u})):s!=null&&(bl(s)&&(s=Ph(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(kc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,r=r===""?".":r+":",bc(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+Ea(i,l);o+=xi(i,t,n,c,s)}else if(c=Lh(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+Ea(i,l++),o+=xi(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function qs(e,t,n){if(e==null)return e;var r=[],s=0;return xi(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Mh(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var lt={current:null},yi={transition:null},Ih={ReactCurrentDispatcher:lt,ReactCurrentBatchConfig:yi,ReactCurrentOwner:_l};function bd(){throw Error("act(...) is not supported in production builds of React.")}de.Children={map:qs,forEach:function(e,t,n){qs(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return qs(e,function(){t++}),t},toArray:function(e){return qs(e,function(t){return t})||[]},only:function(e){if(!bl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};de.Component=Hr;de.Fragment=_h;de.Profiler=kh;de.PureComponent=wl;de.StrictMode=bh;de.Suspense=Ch;de.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ih;de.act=bd;de.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=gd({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=_l.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)wd.call(t,c)&&!vd.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ws,type:e.type,key:s,ref:i,props:r,_owner:o}};de.createContext=function(e){return e={$$typeof:Sh,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:jh,_context:e},e.Consumer=e};de.createElement=_d;de.createFactory=function(e){var t=_d.bind(null,e);return t.type=e,t};de.createRef=function(){return{current:null}};de.forwardRef=function(e){return{$$typeof:Nh,render:e}};de.isValidElement=bl;de.lazy=function(e){return{$$typeof:Eh,_payload:{_status:-1,_result:e},_init:Mh}};de.memo=function(e,t){return{$$typeof:zh,type:e,compare:t===void 0?null:t}};de.startTransition=function(e){var t=yi.transition;yi.transition={};try{e()}finally{yi.transition=t}};de.unstable_act=bd;de.useCallback=function(e,t){return lt.current.useCallback(e,t)};de.useContext=function(e){return lt.current.useContext(e)};de.useDebugValue=function(){};de.useDeferredValue=function(e){return lt.current.useDeferredValue(e)};de.useEffect=function(e,t){return lt.current.useEffect(e,t)};de.useId=function(){return lt.current.useId()};de.useImperativeHandle=function(e,t,n){return lt.current.useImperativeHandle(e,t,n)};de.useInsertionEffect=function(e,t){return lt.current.useInsertionEffect(e,t)};de.useLayoutEffect=function(e,t){return lt.current.useLayoutEffect(e,t)};de.useMemo=function(e,t){return lt.current.useMemo(e,t)};de.useReducer=function(e,t,n){return lt.current.useReducer(e,t,n)};de.useRef=function(e){return lt.current.useRef(e)};de.useState=function(e){return lt.current.useState(e)};de.useSyncExternalStore=function(e,t,n){return lt.current.useSyncExternalStore(e,t,n)};de.useTransition=function(){return lt.current.useTransition()};de.version="18.3.1";hd.exports=de;var E=hd.exports;const Ve=wh(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rh=E,$h=Symbol.for("react.element"),Dh=Symbol.for("react.fragment"),Th=Object.prototype.hasOwnProperty,Fh=Rh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ah={key:!0,ref:!0,__self:!0,__source:!0};function kd(e,t,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Th.call(t,r)&&!Ah.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:$h,type:e,key:i,ref:o,props:s,_owner:Fh.current}}ca.Fragment=Dh;ca.jsx=kd;ca.jsxs=kd;fd.exports=ca;var a=fd.exports,co={},jd={exports:{}},Ct={},Sd={exports:{}},Nd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,N){var M=b.length;b.push(N);e:for(;0<M;){var T=M-1>>>1,D=b[T];if(0<s(D,N))b[T]=N,b[M]=D,M=T;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var N=b[0],M=b.pop();if(M!==N){b[0]=M;e:for(var T=0,D=b.length,F=D>>>1;T<F;){var G=2*(T+1)-1,Y=b[G],K=G+1,Z=b[K];if(0>s(Y,M))K<D&&0>s(Z,Y)?(b[T]=Z,b[K]=M,T=K):(b[T]=Y,b[G]=M,T=G);else if(K<D&&0>s(Z,M))b[T]=Z,b[K]=M,T=K;else break e}}return N}function s(b,N){var M=b.sortIndex-N.sortIndex;return M!==0?M:b.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,p=null,g=3,_=!1,m=!1,f=!1,L=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(b){for(var N=n(u);N!==null;){if(N.callback===null)r(u);else if(N.startTime<=b)r(u),N.sortIndex=N.expirationTime,t(c,N);else break;N=n(u)}}function v(b){if(f=!1,x(b),!m)if(n(c)!==null)m=!0,y(S);else{var N=n(u);N!==null&&k(v,N.startTime-b)}}function S(b,N){m=!1,f&&(f=!1,w(I),I=-1),_=!0;var M=g;try{for(x(N),p=n(c);p!==null&&(!(p.expirationTime>N)||b&&!R());){var T=p.callback;if(typeof T=="function"){p.callback=null,g=p.priorityLevel;var D=T(p.expirationTime<=N);N=e.unstable_now(),typeof D=="function"?p.callback=D:p===n(c)&&r(c),x(N)}else r(c);p=n(c)}if(p!==null)var F=!0;else{var G=n(u);G!==null&&k(v,G.startTime-N),F=!1}return F}finally{p=null,g=M,_=!1}}var z=!1,j=null,I=-1,H=5,U=-1;function R(){return!(e.unstable_now()-U<H)}function P(){if(j!==null){var b=e.unstable_now();U=b;var N=!0;try{N=j(!0,b)}finally{N?$():(z=!1,j=null)}}else z=!1}var $;if(typeof h=="function")$=function(){h(P)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,C=W.port2;W.port1.onmessage=P,$=function(){C.postMessage(null)}}else $=function(){L(P,0)};function y(b){j=b,z||(z=!0,$())}function k(b,N){I=L(function(){b(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){m||_||(m=!0,y(S))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(b){switch(g){case 1:case 2:case 3:var N=3;break;default:N=g}var M=g;g=N;try{return b()}finally{g=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,N){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var M=g;g=b;try{return N()}finally{g=M}},e.unstable_scheduleCallback=function(b,N,M){var T=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?T+M:T):M=T,b){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=M+D,b={id:d++,callback:N,priorityLevel:b,startTime:M,expirationTime:D,sortIndex:-1},M>T?(b.sortIndex=M,t(u,b),n(c)===null&&b===n(u)&&(f?(w(I),I=-1):f=!0,k(v,M-T))):(b.sortIndex=D,t(c,b),m||_||(m=!0,y(S))),b},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(b){var N=g;return function(){var M=g;g=N;try{return b.apply(this,arguments)}finally{g=M}}}})(Nd);Sd.exports=Nd;var Wh=Sd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uh=E,Nt=Wh;function J(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cd=new Set,_s={};function ar(e,t){Ir(e,t),Ir(e+"Capture",t)}function Ir(e,t){for(_s[e]=t,e=0;e<t.length;e++)Cd.add(t[e])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uo=Object.prototype.hasOwnProperty,Hh=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jc={},Sc={};function Vh(e){return uo.call(Sc,e)?!0:uo.call(jc,e)?!1:Hh.test(e)?Sc[e]=!0:(jc[e]=!0,!1)}function Bh(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gh(e,t,n,r){if(t===null||typeof t>"u"||Bh(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ct(e,t,n,r,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ze[e]=new ct(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ze[t]=new ct(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ze[e]=new ct(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ze[e]=new ct(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ze[e]=new ct(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ze[e]=new ct(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ze[e]=new ct(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ze[e]=new ct(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ze[e]=new ct(e,5,!1,e.toLowerCase(),null,!1,!1)});var kl=/[\-:]([a-z])/g;function jl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kl,jl);Ze[t]=new ct(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kl,jl);Ze[t]=new ct(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kl,jl);Ze[t]=new ct(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ze[e]=new ct(e,1,!1,e.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ze[e]=new ct(e,1,!1,e.toLowerCase(),null,!0,!0)});function Sl(e,t,n,r){var s=Ze.hasOwnProperty(t)?Ze[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gh(t,n,s,r)&&(n=null),r||s===null?Vh(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var mn=Uh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xs=Symbol.for("react.element"),gr=Symbol.for("react.portal"),xr=Symbol.for("react.fragment"),Nl=Symbol.for("react.strict_mode"),po=Symbol.for("react.profiler"),zd=Symbol.for("react.provider"),Ed=Symbol.for("react.context"),Cl=Symbol.for("react.forward_ref"),fo=Symbol.for("react.suspense"),ho=Symbol.for("react.suspense_list"),zl=Symbol.for("react.memo"),_n=Symbol.for("react.lazy"),Ld=Symbol.for("react.offscreen"),Nc=Symbol.iterator;function Jr(e){return e===null||typeof e!="object"?null:(e=Nc&&e[Nc]||e["@@iterator"],typeof e=="function"?e:null)}var Ie=Object.assign,La;function is(e){if(La===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);La=t&&t[1]||""}return`
`+La+e}var Pa=!1;function Oa(e,t){if(!e||Pa)return"";Pa=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Pa=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?is(e):""}function Kh(e){switch(e.tag){case 5:return is(e.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 2:case 15:return e=Oa(e.type,!1),e;case 11:return e=Oa(e.type.render,!1),e;case 1:return e=Oa(e.type,!0),e;default:return""}}function mo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xr:return"Fragment";case gr:return"Portal";case po:return"Profiler";case Nl:return"StrictMode";case fo:return"Suspense";case ho:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ed:return(e.displayName||"Context")+".Consumer";case zd:return(e._context.displayName||"Context")+".Provider";case Cl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case zl:return t=e.displayName||null,t!==null?t:mo(e.type)||"Memo";case _n:t=e._payload,e=e._init;try{return mo(e(t))}catch{}}return null}function Jh(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mo(t);case 8:return t===Nl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Dn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qh(e){var t=Pd(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zs(e){e._valueTracker||(e._valueTracker=Qh(e))}function Od(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Pd(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Mi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function go(e,t){var n=t.checked;return Ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Cc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Dn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Md(e,t){t=t.checked,t!=null&&Sl(e,"checked",t,!1)}function xo(e,t){Md(e,t);var n=Dn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?yo(e,t.type,n):t.hasOwnProperty("defaultValue")&&yo(e,t.type,Dn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function zc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function yo(e,t,n){(t!=="number"||Mi(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var as=Array.isArray;function zr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Dn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function wo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(J(91));return Ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ec(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(J(92));if(as(n)){if(1<n.length)throw Error(J(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Dn(n)}}function Id(e,t){var n=Dn(t.value),r=Dn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Lc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Rd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Rd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ei,$d=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ei=ei||document.createElement("div"),ei.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ei.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function bs(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yh=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(e){Yh.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cs[t]=cs[e]})});function Dd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cs.hasOwnProperty(e)&&cs[e]?(""+t).trim():t+"px"}function Td(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Dd(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var qh=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _o(e,t){if(t){if(qh[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(J(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(J(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(J(61))}if(t.style!=null&&typeof t.style!="object")throw Error(J(62))}}function bo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ko=null;function El(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jo=null,Er=null,Lr=null;function Pc(e){if(e=Vs(e)){if(typeof jo!="function")throw Error(J(280));var t=e.stateNode;t&&(t=ha(t),jo(e.stateNode,e.type,t))}}function Fd(e){Er?Lr?Lr.push(e):Lr=[e]:Er=e}function Ad(){if(Er){var e=Er,t=Lr;if(Lr=Er=null,Pc(e),t)for(e=0;e<t.length;e++)Pc(t[e])}}function Wd(e,t){return e(t)}function Ud(){}var Ma=!1;function Hd(e,t,n){if(Ma)return e(t,n);Ma=!0;try{return Wd(e,t,n)}finally{Ma=!1,(Er!==null||Lr!==null)&&(Ud(),Ad())}}function ks(e,t){var n=e.stateNode;if(n===null)return null;var r=ha(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(J(231,t,typeof n));return n}var So=!1;if(dn)try{var Qr={};Object.defineProperty(Qr,"passive",{get:function(){So=!0}}),window.addEventListener("test",Qr,Qr),window.removeEventListener("test",Qr,Qr)}catch{So=!1}function Xh(e,t,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var us=!1,Ii=null,Ri=!1,No=null,Zh={onError:function(e){us=!0,Ii=e}};function em(e,t,n,r,s,i,o,l,c){us=!1,Ii=null,Xh.apply(Zh,arguments)}function tm(e,t,n,r,s,i,o,l,c){if(em.apply(this,arguments),us){if(us){var u=Ii;us=!1,Ii=null}else throw Error(J(198));Ri||(Ri=!0,No=u)}}function or(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Vd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Oc(e){if(or(e)!==e)throw Error(J(188))}function nm(e){var t=e.alternate;if(!t){if(t=or(e),t===null)throw Error(J(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Oc(s),e;if(i===r)return Oc(s),t;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?e:t}function Bd(e){return e=nm(e),e!==null?Gd(e):null}function Gd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Gd(e);if(t!==null)return t;e=e.sibling}return null}var Kd=Nt.unstable_scheduleCallback,Mc=Nt.unstable_cancelCallback,rm=Nt.unstable_shouldYield,sm=Nt.unstable_requestPaint,Fe=Nt.unstable_now,im=Nt.unstable_getCurrentPriorityLevel,Ll=Nt.unstable_ImmediatePriority,Jd=Nt.unstable_UserBlockingPriority,$i=Nt.unstable_NormalPriority,am=Nt.unstable_LowPriority,Qd=Nt.unstable_IdlePriority,ua=null,en=null;function om(e){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(ua,e,void 0,(e.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:um,lm=Math.log,cm=Math.LN2;function um(e){return e>>>=0,e===0?32:31-(lm(e)/cm|0)|0}var ti=64,ni=4194304;function os(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Di(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=os(l):(i&=o,i!==0&&(r=os(i)))}else o=n&~s,o!==0?r=os(o):i!==0&&(r=os(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Vt(t),s=1<<n,r|=e[n],t&=~s;return r}function dm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Vt(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=dm(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Co(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Yd(){var e=ti;return ti<<=1,!(ti&4194240)&&(ti=64),e}function Ia(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Us(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vt(t),e[t]=n}function fm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Vt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Pl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Vt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var _e=0;function qd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Xd,Ol,Zd,ep,tp,zo=!1,ri=[],Cn=null,zn=null,En=null,js=new Map,Ss=new Map,kn=[],hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ic(e,t){switch(e){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":js.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(t.pointerId)}}function Yr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Vs(t),t!==null&&Ol(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function mm(e,t,n,r,s){switch(t){case"focusin":return Cn=Yr(Cn,e,t,n,r,s),!0;case"dragenter":return zn=Yr(zn,e,t,n,r,s),!0;case"mouseover":return En=Yr(En,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return js.set(i,Yr(js.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ss.set(i,Yr(Ss.get(i)||null,e,t,n,r,s)),!0}return!1}function np(e){var t=Jn(e.target);if(t!==null){var n=or(t);if(n!==null){if(t=n.tag,t===13){if(t=Vd(n),t!==null){e.blockedOn=t,tp(e.priority,function(){Zd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Eo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ko=r,n.target.dispatchEvent(r),ko=null}else return t=Vs(n),t!==null&&Ol(t),e.blockedOn=n,!1;t.shift()}return!0}function Rc(e,t,n){wi(e)&&n.delete(t)}function gm(){zo=!1,Cn!==null&&wi(Cn)&&(Cn=null),zn!==null&&wi(zn)&&(zn=null),En!==null&&wi(En)&&(En=null),js.forEach(Rc),Ss.forEach(Rc)}function qr(e,t){e.blockedOn===t&&(e.blockedOn=null,zo||(zo=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,gm)))}function Ns(e){function t(s){return qr(s,e)}if(0<ri.length){qr(ri[0],e);for(var n=1;n<ri.length;n++){var r=ri[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Cn!==null&&qr(Cn,e),zn!==null&&qr(zn,e),En!==null&&qr(En,e),js.forEach(t),Ss.forEach(t),n=0;n<kn.length;n++)r=kn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)np(n),n.blockedOn===null&&kn.shift()}var Pr=mn.ReactCurrentBatchConfig,Ti=!0;function xm(e,t,n,r){var s=_e,i=Pr.transition;Pr.transition=null;try{_e=1,Ml(e,t,n,r)}finally{_e=s,Pr.transition=i}}function ym(e,t,n,r){var s=_e,i=Pr.transition;Pr.transition=null;try{_e=4,Ml(e,t,n,r)}finally{_e=s,Pr.transition=i}}function Ml(e,t,n,r){if(Ti){var s=Eo(e,t,n,r);if(s===null)Va(e,t,r,Fi,n),Ic(e,r);else if(mm(s,e,t,n,r))r.stopPropagation();else if(Ic(e,r),t&4&&-1<hm.indexOf(e)){for(;s!==null;){var i=Vs(s);if(i!==null&&Xd(i),i=Eo(e,t,n,r),i===null&&Va(e,t,r,Fi,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Va(e,t,r,null,n)}}var Fi=null;function Eo(e,t,n,r){if(Fi=null,e=El(r),e=Jn(e),e!==null)if(t=or(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Vd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fi=e,null}function rp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(im()){case Ll:return 1;case Jd:return 4;case $i:case am:return 16;case Qd:return 536870912;default:return 16}default:return 16}}var Sn=null,Il=null,vi=null;function sp(){if(vi)return vi;var e,t=Il,n=t.length,r,s="value"in Sn?Sn.value:Sn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===s[i-r];r++);return vi=s.slice(e,1<r?1-r:void 0)}function _i(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function si(){return!0}function $c(){return!1}function zt(e){function t(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?si:$c,this.isPropagationStopped=$c,this}return Ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),t}var Vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=zt(Vr),Hs=Ie({},Vr,{view:0,detail:0}),wm=zt(Hs),Ra,$a,Xr,da=Ie({},Hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$l,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xr&&(Xr&&e.type==="mousemove"?(Ra=e.screenX-Xr.screenX,$a=e.screenY-Xr.screenY):$a=Ra=0,Xr=e),Ra)},movementY:function(e){return"movementY"in e?e.movementY:$a}}),Dc=zt(da),vm=Ie({},da,{dataTransfer:0}),_m=zt(vm),bm=Ie({},Hs,{relatedTarget:0}),Da=zt(bm),km=Ie({},Vr,{animationName:0,elapsedTime:0,pseudoElement:0}),jm=zt(km),Sm=Ie({},Vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nm=zt(Sm),Cm=Ie({},Vr,{data:0}),Tc=zt(Cm),zm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Em={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lm[e])?!!t[e]:!1}function $l(){return Pm}var Om=Ie({},Hs,{key:function(e){if(e.key){var t=zm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=_i(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Em[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$l,charCode:function(e){return e.type==="keypress"?_i(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_i(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Mm=zt(Om),Im=Ie({},da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fc=zt(Im),Rm=Ie({},Hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$l}),$m=zt(Rm),Dm=Ie({},Vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tm=zt(Dm),Fm=Ie({},da,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Am=zt(Fm),Wm=[9,13,27,32],Dl=dn&&"CompositionEvent"in window,ds=null;dn&&"documentMode"in document&&(ds=document.documentMode);var Um=dn&&"TextEvent"in window&&!ds,ip=dn&&(!Dl||ds&&8<ds&&11>=ds),Ac=String.fromCharCode(32),Wc=!1;function ap(e,t){switch(e){case"keyup":return Wm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function op(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yr=!1;function Hm(e,t){switch(e){case"compositionend":return op(t);case"keypress":return t.which!==32?null:(Wc=!0,Ac);case"textInput":return e=t.data,e===Ac&&Wc?null:e;default:return null}}function Vm(e,t){if(yr)return e==="compositionend"||!Dl&&ap(e,t)?(e=sp(),vi=Il=Sn=null,yr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ip&&t.locale!=="ko"?null:t.data;default:return null}}var Bm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bm[e.type]:t==="textarea"}function lp(e,t,n,r){Fd(r),t=Ai(t,"onChange"),0<t.length&&(n=new Rl("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ps=null,Cs=null;function Gm(e){wp(e,0)}function pa(e){var t=_r(e);if(Od(t))return e}function Km(e,t){if(e==="change")return t}var cp=!1;if(dn){var Ta;if(dn){var Fa="oninput"in document;if(!Fa){var Hc=document.createElement("div");Hc.setAttribute("oninput","return;"),Fa=typeof Hc.oninput=="function"}Ta=Fa}else Ta=!1;cp=Ta&&(!document.documentMode||9<document.documentMode)}function Vc(){ps&&(ps.detachEvent("onpropertychange",up),Cs=ps=null)}function up(e){if(e.propertyName==="value"&&pa(Cs)){var t=[];lp(t,Cs,e,El(e)),Hd(Gm,t)}}function Jm(e,t,n){e==="focusin"?(Vc(),ps=t,Cs=n,ps.attachEvent("onpropertychange",up)):e==="focusout"&&Vc()}function Qm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pa(Cs)}function Ym(e,t){if(e==="click")return pa(t)}function qm(e,t){if(e==="input"||e==="change")return pa(t)}function Xm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Gt=typeof Object.is=="function"?Object.is:Xm;function zs(e,t){if(Gt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!uo.call(t,s)||!Gt(e[s],t[s]))return!1}return!0}function Bc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gc(e,t){var n=Bc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bc(n)}}function dp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?dp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pp(){for(var e=window,t=Mi();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Mi(e.document)}return t}function Tl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Zm(e){var t=pp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dp(n.ownerDocument.documentElement,n)){if(r!==null&&Tl(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Gc(n,i);var o=Gc(n,r);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var eg=dn&&"documentMode"in document&&11>=document.documentMode,wr=null,Lo=null,fs=null,Po=!1;function Kc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Po||wr==null||wr!==Mi(r)||(r=wr,"selectionStart"in r&&Tl(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fs&&zs(fs,r)||(fs=r,r=Ai(Lo,"onSelect"),0<r.length&&(t=new Rl("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wr)))}function ii(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:ii("Animation","AnimationEnd"),animationiteration:ii("Animation","AnimationIteration"),animationstart:ii("Animation","AnimationStart"),transitionend:ii("Transition","TransitionEnd")},Aa={},fp={};dn&&(fp=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function fa(e){if(Aa[e])return Aa[e];if(!vr[e])return e;var t=vr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in fp)return Aa[e]=t[n];return e}var hp=fa("animationend"),mp=fa("animationiteration"),gp=fa("animationstart"),xp=fa("transitionend"),yp=new Map,Jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,t){yp.set(e,t),ar(t,[e])}for(var Wa=0;Wa<Jc.length;Wa++){var Ua=Jc[Wa],tg=Ua.toLowerCase(),ng=Ua[0].toUpperCase()+Ua.slice(1);An(tg,"on"+ng)}An(hp,"onAnimationEnd");An(mp,"onAnimationIteration");An(gp,"onAnimationStart");An("dblclick","onDoubleClick");An("focusin","onFocus");An("focusout","onBlur");An(xp,"onTransitionEnd");Ir("onMouseEnter",["mouseout","mouseover"]);Ir("onMouseLeave",["mouseout","mouseover"]);Ir("onPointerEnter",["pointerout","pointerover"]);Ir("onPointerLeave",["pointerout","pointerover"]);ar("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ar("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ar("onBeforeInput",["compositionend","keypress","textInput","paste"]);ar("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ar("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ls));function Qc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,tm(r,t,void 0,e),e.currentTarget=null}function wp(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Qc(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Qc(s,l,u),i=c}}}if(Ri)throw e=No,Ri=!1,No=null,e}function Ce(e,t){var n=t[$o];n===void 0&&(n=t[$o]=new Set);var r=e+"__bubble";n.has(r)||(vp(t,e,2,!1),n.add(r))}function Ha(e,t,n){var r=0;t&&(r|=4),vp(n,e,r,t)}var ai="_reactListening"+Math.random().toString(36).slice(2);function Es(e){if(!e[ai]){e[ai]=!0,Cd.forEach(function(n){n!=="selectionchange"&&(rg.has(n)||Ha(n,!1,e),Ha(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ai]||(t[ai]=!0,Ha("selectionchange",!1,t))}}function vp(e,t,n,r){switch(rp(t)){case 1:var s=xm;break;case 4:s=ym;break;default:s=Ml}n=s.bind(null,t,n,e),s=void 0,!So||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Va(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Jn(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Hd(function(){var u=i,d=El(n),p=[];e:{var g=yp.get(e);if(g!==void 0){var _=Rl,m=e;switch(e){case"keypress":if(_i(n)===0)break e;case"keydown":case"keyup":_=Mm;break;case"focusin":m="focus",_=Da;break;case"focusout":m="blur",_=Da;break;case"beforeblur":case"afterblur":_=Da;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Dc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=_m;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=$m;break;case hp:case mp:case gp:_=jm;break;case xp:_=Tm;break;case"scroll":_=wm;break;case"wheel":_=Am;break;case"copy":case"cut":case"paste":_=Nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Fc}var f=(t&4)!==0,L=!f&&e==="scroll",w=f?g!==null?g+"Capture":null:g;f=[];for(var h=u,x;h!==null;){x=h;var v=x.stateNode;if(x.tag===5&&v!==null&&(x=v,w!==null&&(v=ks(h,w),v!=null&&f.push(Ls(h,v,x)))),L)break;h=h.return}0<f.length&&(g=new _(g,m,null,n,d),p.push({event:g,listeners:f}))}}if(!(t&7)){e:{if(g=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",g&&n!==ko&&(m=n.relatedTarget||n.fromElement)&&(Jn(m)||m[pn]))break e;if((_||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,_?(m=n.relatedTarget||n.toElement,_=u,m=m?Jn(m):null,m!==null&&(L=or(m),m!==L||m.tag!==5&&m.tag!==6)&&(m=null)):(_=null,m=u),_!==m)){if(f=Dc,v="onMouseLeave",w="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(f=Fc,v="onPointerLeave",w="onPointerEnter",h="pointer"),L=_==null?g:_r(_),x=m==null?g:_r(m),g=new f(v,h+"leave",_,n,d),g.target=L,g.relatedTarget=x,v=null,Jn(d)===u&&(f=new f(w,h+"enter",m,n,d),f.target=x,f.relatedTarget=L,v=f),L=v,_&&m)t:{for(f=_,w=m,h=0,x=f;x;x=cr(x))h++;for(x=0,v=w;v;v=cr(v))x++;for(;0<h-x;)f=cr(f),h--;for(;0<x-h;)w=cr(w),x--;for(;h--;){if(f===w||w!==null&&f===w.alternate)break t;f=cr(f),w=cr(w)}f=null}else f=null;_!==null&&Yc(p,g,_,f,!1),m!==null&&L!==null&&Yc(p,L,m,f,!0)}}e:{if(g=u?_r(u):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var S=Km;else if(Uc(g))if(cp)S=qm;else{S=Qm;var z=Jm}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(S=Ym);if(S&&(S=S(e,u))){lp(p,S,n,d);break e}z&&z(e,g,u),e==="focusout"&&(z=g._wrapperState)&&z.controlled&&g.type==="number"&&yo(g,"number",g.value)}switch(z=u?_r(u):window,e){case"focusin":(Uc(z)||z.contentEditable==="true")&&(wr=z,Lo=u,fs=null);break;case"focusout":fs=Lo=wr=null;break;case"mousedown":Po=!0;break;case"contextmenu":case"mouseup":case"dragend":Po=!1,Kc(p,n,d);break;case"selectionchange":if(eg)break;case"keydown":case"keyup":Kc(p,n,d)}var j;if(Dl)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else yr?ap(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(ip&&n.locale!=="ko"&&(yr||I!=="onCompositionStart"?I==="onCompositionEnd"&&yr&&(j=sp()):(Sn=d,Il="value"in Sn?Sn.value:Sn.textContent,yr=!0)),z=Ai(u,I),0<z.length&&(I=new Tc(I,e,null,n,d),p.push({event:I,listeners:z}),j?I.data=j:(j=op(n),j!==null&&(I.data=j)))),(j=Um?Hm(e,n):Vm(e,n))&&(u=Ai(u,"onBeforeInput"),0<u.length&&(d=new Tc("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:u}),d.data=j))}wp(p,t)})}function Ls(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ai(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ks(e,n),i!=null&&r.unshift(Ls(e,i,s)),i=ks(e,t),i!=null&&r.push(Ls(e,i,s))),e=e.return}return r}function cr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Yc(e,t,n,r,s){for(var i=t._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=ks(n,i),c!=null&&o.unshift(Ls(n,c,l))):s||(c=ks(n,i),c!=null&&o.push(Ls(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var sg=/\r\n?/g,ig=/\u0000|\uFFFD/g;function qc(e){return(typeof e=="string"?e:""+e).replace(sg,`
`).replace(ig,"")}function oi(e,t,n){if(t=qc(t),qc(e)!==t&&n)throw Error(J(425))}function Wi(){}var Oo=null,Mo=null;function Io(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ro=typeof setTimeout=="function"?setTimeout:void 0,ag=typeof clearTimeout=="function"?clearTimeout:void 0,Xc=typeof Promise=="function"?Promise:void 0,og=typeof queueMicrotask=="function"?queueMicrotask:typeof Xc<"u"?function(e){return Xc.resolve(null).then(e).catch(lg)}:Ro;function lg(e){setTimeout(function(){throw e})}function Ba(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Ns(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ns(t)}function Ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Zc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Br=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Br,Ps="__reactProps$"+Br,pn="__reactContainer$"+Br,$o="__reactEvents$"+Br,cg="__reactListeners$"+Br,ug="__reactHandles$"+Br;function Jn(e){var t=e[Xt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pn]||n[Xt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Zc(e);e!==null;){if(n=e[Xt])return n;e=Zc(e)}return t}e=n,n=e.parentNode}return null}function Vs(e){return e=e[Xt]||e[pn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _r(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(J(33))}function ha(e){return e[Ps]||null}var Do=[],br=-1;function Wn(e){return{current:e}}function ze(e){0>br||(e.current=Do[br],Do[br]=null,br--)}function je(e,t){br++,Do[br]=e.current,e.current=t}var Tn={},rt=Wn(Tn),mt=Wn(!1),er=Tn;function Rr(e,t){var n=e.type.contextTypes;if(!n)return Tn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function gt(e){return e=e.childContextTypes,e!=null}function Ui(){ze(mt),ze(rt)}function eu(e,t,n){if(rt.current!==Tn)throw Error(J(168));je(rt,t),je(mt,n)}function _p(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(J(108,Jh(e)||"Unknown",s));return Ie({},n,r)}function Hi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tn,er=rt.current,je(rt,e),je(mt,mt.current),!0}function tu(e,t,n){var r=e.stateNode;if(!r)throw Error(J(169));n?(e=_p(e,t,er),r.__reactInternalMemoizedMergedChildContext=e,ze(mt),ze(rt),je(rt,e)):ze(mt),je(mt,n)}var sn=null,ma=!1,Ga=!1;function bp(e){sn===null?sn=[e]:sn.push(e)}function dg(e){ma=!0,bp(e)}function Un(){if(!Ga&&sn!==null){Ga=!0;var e=0,t=_e;try{var n=sn;for(_e=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}sn=null,ma=!1}catch(s){throw sn!==null&&(sn=sn.slice(e+1)),Kd(Ll,Un),s}finally{_e=t,Ga=!1}}return null}var kr=[],jr=0,Vi=null,Bi=0,Mt=[],It=0,tr=null,an=1,on="";function Gn(e,t){kr[jr++]=Bi,kr[jr++]=Vi,Vi=e,Bi=t}function kp(e,t,n){Mt[It++]=an,Mt[It++]=on,Mt[It++]=tr,tr=e;var r=an;e=on;var s=32-Vt(r)-1;r&=~(1<<s),n+=1;var i=32-Vt(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,an=1<<32-Vt(t)+s|n<<s|r,on=i+e}else an=1<<i|n<<s|r,on=e}function Fl(e){e.return!==null&&(Gn(e,1),kp(e,1,0))}function Al(e){for(;e===Vi;)Vi=kr[--jr],kr[jr]=null,Bi=kr[--jr],kr[jr]=null;for(;e===tr;)tr=Mt[--It],Mt[It]=null,on=Mt[--It],Mt[It]=null,an=Mt[--It],Mt[It]=null}var St=null,jt=null,Ee=!1,Ht=null;function jp(e,t){var n=Rt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function nu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,St=e,jt=Ln(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,St=e,jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=tr!==null?{id:an,overflow:on}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Rt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,St=e,jt=null,!0):!1;default:return!1}}function To(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fo(e){if(Ee){var t=jt;if(t){var n=t;if(!nu(e,t)){if(To(e))throw Error(J(418));t=Ln(n.nextSibling);var r=St;t&&nu(e,t)?jp(r,n):(e.flags=e.flags&-4097|2,Ee=!1,St=e)}}else{if(To(e))throw Error(J(418));e.flags=e.flags&-4097|2,Ee=!1,St=e}}}function ru(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;St=e}function li(e){if(e!==St)return!1;if(!Ee)return ru(e),Ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Io(e.type,e.memoizedProps)),t&&(t=jt)){if(To(e))throw Sp(),Error(J(418));for(;t;)jp(e,t),t=Ln(t.nextSibling)}if(ru(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(J(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){jt=Ln(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}jt=null}}else jt=St?Ln(e.stateNode.nextSibling):null;return!0}function Sp(){for(var e=jt;e;)e=Ln(e.nextSibling)}function $r(){jt=St=null,Ee=!1}function Wl(e){Ht===null?Ht=[e]:Ht.push(e)}var pg=mn.ReactCurrentBatchConfig;function Zr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,e))}return e}function ci(e,t){throw e=Object.prototype.toString.call(t),Error(J(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function su(e){var t=e._init;return t(e._payload)}function Np(e){function t(w,h){if(e){var x=w.deletions;x===null?(w.deletions=[h],w.flags|=16):x.push(h)}}function n(w,h){if(!e)return null;for(;h!==null;)t(w,h),h=h.sibling;return null}function r(w,h){for(w=new Map;h!==null;)h.key!==null?w.set(h.key,h):w.set(h.index,h),h=h.sibling;return w}function s(w,h){return w=In(w,h),w.index=0,w.sibling=null,w}function i(w,h,x){return w.index=x,e?(x=w.alternate,x!==null?(x=x.index,x<h?(w.flags|=2,h):x):(w.flags|=2,h)):(w.flags|=1048576,h)}function o(w){return e&&w.alternate===null&&(w.flags|=2),w}function l(w,h,x,v){return h===null||h.tag!==6?(h=Za(x,w.mode,v),h.return=w,h):(h=s(h,x),h.return=w,h)}function c(w,h,x,v){var S=x.type;return S===xr?d(w,h,x.props.children,v,x.key):h!==null&&(h.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===_n&&su(S)===h.type)?(v=s(h,x.props),v.ref=Zr(w,h,x),v.return=w,v):(v=zi(x.type,x.key,x.props,null,w.mode,v),v.ref=Zr(w,h,x),v.return=w,v)}function u(w,h,x,v){return h===null||h.tag!==4||h.stateNode.containerInfo!==x.containerInfo||h.stateNode.implementation!==x.implementation?(h=eo(x,w.mode,v),h.return=w,h):(h=s(h,x.children||[]),h.return=w,h)}function d(w,h,x,v,S){return h===null||h.tag!==7?(h=Zn(x,w.mode,v,S),h.return=w,h):(h=s(h,x),h.return=w,h)}function p(w,h,x){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Za(""+h,w.mode,x),h.return=w,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Xs:return x=zi(h.type,h.key,h.props,null,w.mode,x),x.ref=Zr(w,null,h),x.return=w,x;case gr:return h=eo(h,w.mode,x),h.return=w,h;case _n:var v=h._init;return p(w,v(h._payload),x)}if(as(h)||Jr(h))return h=Zn(h,w.mode,x,null),h.return=w,h;ci(w,h)}return null}function g(w,h,x,v){var S=h!==null?h.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:l(w,h,""+x,v);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xs:return x.key===S?c(w,h,x,v):null;case gr:return x.key===S?u(w,h,x,v):null;case _n:return S=x._init,g(w,h,S(x._payload),v)}if(as(x)||Jr(x))return S!==null?null:d(w,h,x,v,null);ci(w,x)}return null}function _(w,h,x,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return w=w.get(x)||null,l(h,w,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xs:return w=w.get(v.key===null?x:v.key)||null,c(h,w,v,S);case gr:return w=w.get(v.key===null?x:v.key)||null,u(h,w,v,S);case _n:var z=v._init;return _(w,h,x,z(v._payload),S)}if(as(v)||Jr(v))return w=w.get(x)||null,d(h,w,v,S,null);ci(h,v)}return null}function m(w,h,x,v){for(var S=null,z=null,j=h,I=h=0,H=null;j!==null&&I<x.length;I++){j.index>I?(H=j,j=null):H=j.sibling;var U=g(w,j,x[I],v);if(U===null){j===null&&(j=H);break}e&&j&&U.alternate===null&&t(w,j),h=i(U,h,I),z===null?S=U:z.sibling=U,z=U,j=H}if(I===x.length)return n(w,j),Ee&&Gn(w,I),S;if(j===null){for(;I<x.length;I++)j=p(w,x[I],v),j!==null&&(h=i(j,h,I),z===null?S=j:z.sibling=j,z=j);return Ee&&Gn(w,I),S}for(j=r(w,j);I<x.length;I++)H=_(j,w,I,x[I],v),H!==null&&(e&&H.alternate!==null&&j.delete(H.key===null?I:H.key),h=i(H,h,I),z===null?S=H:z.sibling=H,z=H);return e&&j.forEach(function(R){return t(w,R)}),Ee&&Gn(w,I),S}function f(w,h,x,v){var S=Jr(x);if(typeof S!="function")throw Error(J(150));if(x=S.call(x),x==null)throw Error(J(151));for(var z=S=null,j=h,I=h=0,H=null,U=x.next();j!==null&&!U.done;I++,U=x.next()){j.index>I?(H=j,j=null):H=j.sibling;var R=g(w,j,U.value,v);if(R===null){j===null&&(j=H);break}e&&j&&R.alternate===null&&t(w,j),h=i(R,h,I),z===null?S=R:z.sibling=R,z=R,j=H}if(U.done)return n(w,j),Ee&&Gn(w,I),S;if(j===null){for(;!U.done;I++,U=x.next())U=p(w,U.value,v),U!==null&&(h=i(U,h,I),z===null?S=U:z.sibling=U,z=U);return Ee&&Gn(w,I),S}for(j=r(w,j);!U.done;I++,U=x.next())U=_(j,w,I,U.value,v),U!==null&&(e&&U.alternate!==null&&j.delete(U.key===null?I:U.key),h=i(U,h,I),z===null?S=U:z.sibling=U,z=U);return e&&j.forEach(function(P){return t(w,P)}),Ee&&Gn(w,I),S}function L(w,h,x,v){if(typeof x=="object"&&x!==null&&x.type===xr&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Xs:e:{for(var S=x.key,z=h;z!==null;){if(z.key===S){if(S=x.type,S===xr){if(z.tag===7){n(w,z.sibling),h=s(z,x.props.children),h.return=w,w=h;break e}}else if(z.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===_n&&su(S)===z.type){n(w,z.sibling),h=s(z,x.props),h.ref=Zr(w,z,x),h.return=w,w=h;break e}n(w,z);break}else t(w,z);z=z.sibling}x.type===xr?(h=Zn(x.props.children,w.mode,v,x.key),h.return=w,w=h):(v=zi(x.type,x.key,x.props,null,w.mode,v),v.ref=Zr(w,h,x),v.return=w,w=v)}return o(w);case gr:e:{for(z=x.key;h!==null;){if(h.key===z)if(h.tag===4&&h.stateNode.containerInfo===x.containerInfo&&h.stateNode.implementation===x.implementation){n(w,h.sibling),h=s(h,x.children||[]),h.return=w,w=h;break e}else{n(w,h);break}else t(w,h);h=h.sibling}h=eo(x,w.mode,v),h.return=w,w=h}return o(w);case _n:return z=x._init,L(w,h,z(x._payload),v)}if(as(x))return m(w,h,x,v);if(Jr(x))return f(w,h,x,v);ci(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,h!==null&&h.tag===6?(n(w,h.sibling),h=s(h,x),h.return=w,w=h):(n(w,h),h=Za(x,w.mode,v),h.return=w,w=h),o(w)):n(w,h)}return L}var Dr=Np(!0),Cp=Np(!1),Gi=Wn(null),Ki=null,Sr=null,Ul=null;function Hl(){Ul=Sr=Ki=null}function Vl(e){var t=Gi.current;ze(Gi),e._currentValue=t}function Ao(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Or(e,t){Ki=e,Ul=Sr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ht=!0),e.firstContext=null)}function Dt(e){var t=e._currentValue;if(Ul!==e)if(e={context:e,memoizedValue:t,next:null},Sr===null){if(Ki===null)throw Error(J(308));Sr=e,Ki.dependencies={lanes:0,firstContext:e}}else Sr=Sr.next=e;return t}var Qn=null;function Bl(e){Qn===null?Qn=[e]:Qn.push(e)}function zp(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Bl(t)):(n.next=s.next,s.next=n),t.interleaved=n,fn(e,r)}function fn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var bn=!1;function Gl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ep(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,fn(e,n)}return s=r.interleaved,s===null?(t.next=t,Bl(r)):(t.next=s.next,s.next=t),r.interleaved=t,fn(e,n)}function bi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pl(e,n)}}function iu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ji(e,t,n,r){var s=e.updateQueue;bn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,d=u=c=null,l=i;do{var g=l.lane,_=l.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,f=l;switch(g=t,_=n,f.tag){case 1:if(m=f.payload,typeof m=="function"){p=m.call(_,p,g);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=f.payload,g=typeof m=="function"?m.call(_,p,g):m,g==null)break e;p=Ie({},p,g);break e;case 2:bn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=_,c=p):d=d.next=_,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(1);if(d===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);rr|=o,e.lanes=o,e.memoizedState=p}}function au(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var Bs={},tn=Wn(Bs),Os=Wn(Bs),Ms=Wn(Bs);function Yn(e){if(e===Bs)throw Error(J(174));return e}function Kl(e,t){switch(je(Ms,t),je(Os,e),je(tn,Bs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vo(t,e)}ze(tn),je(tn,t)}function Tr(){ze(tn),ze(Os),ze(Ms)}function Lp(e){Yn(Ms.current);var t=Yn(tn.current),n=vo(t,e.type);t!==n&&(je(Os,e),je(tn,n))}function Jl(e){Os.current===e&&(ze(tn),ze(Os))}var Oe=Wn(0);function Qi(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ka=[];function Ql(){for(var e=0;e<Ka.length;e++)Ka[e]._workInProgressVersionPrimary=null;Ka.length=0}var ki=mn.ReactCurrentDispatcher,Ja=mn.ReactCurrentBatchConfig,nr=0,Me=null,He=null,Qe=null,Yi=!1,hs=!1,Is=0,fg=0;function et(){throw Error(J(321))}function Yl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function ql(e,t,n,r,s,i){if(nr=i,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ki.current=e===null||e.memoizedState===null?xg:yg,e=n(r,s),hs){i=0;do{if(hs=!1,Is=0,25<=i)throw Error(J(301));i+=1,Qe=He=null,t.updateQueue=null,ki.current=wg,e=n(r,s)}while(hs)}if(ki.current=qi,t=He!==null&&He.next!==null,nr=0,Qe=He=Me=null,Yi=!1,t)throw Error(J(300));return e}function Xl(){var e=Is!==0;return Is=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?Me.memoizedState=Qe=e:Qe=Qe.next=e,Qe}function Tt(){if(He===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Qe===null?Me.memoizedState:Qe.next;if(t!==null)Qe=t,He=e;else{if(e===null)throw Error(J(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Qe===null?Me.memoizedState=Qe=e:Qe=Qe.next=e}return Qe}function Rs(e,t){return typeof t=="function"?t(e):t}function Qa(e){var t=Tt(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((nr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,Me.lanes|=d,rr|=d}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Gt(r,t.memoizedState)||(ht=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Me.lanes|=i,rr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ya(e){var t=Tt(),n=t.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Gt(i,t.memoizedState)||(ht=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Pp(){}function Op(e,t){var n=Me,r=Tt(),s=t(),i=!Gt(r.memoizedState,s);if(i&&(r.memoizedState=s,ht=!0),r=r.queue,Zl(Rp.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,$s(9,Ip.bind(null,n,r,s,t),void 0,null),Ye===null)throw Error(J(349));nr&30||Mp(n,t,s)}return s}function Mp(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ip(e,t,n,r){t.value=n,t.getSnapshot=r,$p(t)&&Dp(e)}function Rp(e,t,n){return n(function(){$p(t)&&Dp(e)})}function $p(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch{return!0}}function Dp(e){var t=fn(e,1);t!==null&&Bt(t,e,1,-1)}function ou(e){var t=Yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:e},t.queue=e,e=e.dispatch=gg.bind(null,Me,e),[t.memoizedState,e]}function $s(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Tp(){return Tt().memoizedState}function ji(e,t,n,r){var s=Yt();Me.flags|=e,s.memoizedState=$s(1|t,n,void 0,r===void 0?null:r)}function ga(e,t,n,r){var s=Tt();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&Yl(r,o.deps)){s.memoizedState=$s(t,n,i,r);return}}Me.flags|=e,s.memoizedState=$s(1|t,n,i,r)}function lu(e,t){return ji(8390656,8,e,t)}function Zl(e,t){return ga(2048,8,e,t)}function Fp(e,t){return ga(4,2,e,t)}function Ap(e,t){return ga(4,4,e,t)}function Wp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Up(e,t,n){return n=n!=null?n.concat([e]):null,ga(4,4,Wp.bind(null,t,e),n)}function ec(){}function Hp(e,t){var n=Tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Yl(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Vp(e,t){var n=Tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Yl(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bp(e,t,n){return nr&21?(Gt(n,t)||(n=Yd(),Me.lanes|=n,rr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ht=!0),e.memoizedState=n)}function hg(e,t){var n=_e;_e=n!==0&&4>n?n:4,e(!0);var r=Ja.transition;Ja.transition={};try{e(!1),t()}finally{_e=n,Ja.transition=r}}function Gp(){return Tt().memoizedState}function mg(e,t,n){var r=Mn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Kp(e))Jp(t,n);else if(n=zp(e,t,n,r),n!==null){var s=ot();Bt(n,e,r,s),Qp(n,t,r)}}function gg(e,t,n){var r=Mn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Kp(e))Jp(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Gt(l,o)){var c=t.interleaved;c===null?(s.next=s,Bl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=zp(e,t,s,r),n!==null&&(s=ot(),Bt(n,e,r,s),Qp(n,t,r))}}function Kp(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function Jp(e,t){hs=Yi=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Pl(e,n)}}var qi={readContext:Dt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},xg={readContext:Dt,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Dt,useEffect:lu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ji(4194308,4,Wp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ji(4194308,4,e,t)},useInsertionEffect:function(e,t){return ji(4,2,e,t)},useMemo:function(e,t){var n=Yt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Yt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=mg.bind(null,Me,e),[r.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:ou,useDebugValue:ec,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=ou(!1),t=e[0];return e=hg.bind(null,e[1]),Yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Me,s=Yt();if(Ee){if(n===void 0)throw Error(J(407));n=n()}else{if(n=t(),Ye===null)throw Error(J(349));nr&30||Mp(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,lu(Rp.bind(null,r,i,e),[e]),r.flags|=2048,$s(9,Ip.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Yt(),t=Ye.identifierPrefix;if(Ee){var n=on,r=an;n=(r&~(1<<32-Vt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Is++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=fg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},yg={readContext:Dt,useCallback:Hp,useContext:Dt,useEffect:Zl,useImperativeHandle:Up,useInsertionEffect:Fp,useLayoutEffect:Ap,useMemo:Vp,useReducer:Qa,useRef:Tp,useState:function(){return Qa(Rs)},useDebugValue:ec,useDeferredValue:function(e){var t=Tt();return Bp(t,He.memoizedState,e)},useTransition:function(){var e=Qa(Rs)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:Pp,useSyncExternalStore:Op,useId:Gp,unstable_isNewReconciler:!1},wg={readContext:Dt,useCallback:Hp,useContext:Dt,useEffect:Zl,useImperativeHandle:Up,useInsertionEffect:Fp,useLayoutEffect:Ap,useMemo:Vp,useReducer:Ya,useRef:Tp,useState:function(){return Ya(Rs)},useDebugValue:ec,useDeferredValue:function(e){var t=Tt();return He===null?t.memoizedState=e:Bp(t,He.memoizedState,e)},useTransition:function(){var e=Ya(Rs)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:Pp,useSyncExternalStore:Op,useId:Gp,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=Ie({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Wo(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ie({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var xa={isMounted:function(e){return(e=e._reactInternals)?or(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ot(),s=Mn(e),i=cn(r,s);i.payload=t,n!=null&&(i.callback=n),t=Pn(e,i,s),t!==null&&(Bt(t,e,s,r),bi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ot(),s=Mn(e),i=cn(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Pn(e,i,s),t!==null&&(Bt(t,e,s,r),bi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ot(),r=Mn(e),s=cn(n,r);s.tag=2,t!=null&&(s.callback=t),t=Pn(e,s,r),t!==null&&(Bt(t,e,r,n),bi(t,e,r))}};function cu(e,t,n,r,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!zs(n,r)||!zs(s,i):!0}function Yp(e,t,n){var r=!1,s=Tn,i=t.contextType;return typeof i=="object"&&i!==null?i=Dt(i):(s=gt(t)?er:rt.current,r=t.contextTypes,i=(r=r!=null)?Rr(e,s):Tn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=xa,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function uu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&xa.enqueueReplaceState(t,t.state,null)}function Uo(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Gl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Dt(i):(i=gt(t)?er:rt.current,s.context=Rr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Wo(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&xa.enqueueReplaceState(s,s.state,null),Ji(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Fr(e,t){try{var n="",r=t;do n+=Kh(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function qa(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ho(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var vg=typeof WeakMap=="function"?WeakMap:Map;function qp(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zi||(Zi=!0,Zo=r),Ho(e,t)},n}function Xp(e,t,n){n=cn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ho(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ho(e,t),typeof r!="function"&&(On===null?On=new Set([this]):On.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function du(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new vg;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Ig.bind(null,e,t,n),t.then(e,e))}function pu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function fu(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,Pn(n,t,1))),n.lanes|=1),e)}var _g=mn.ReactCurrentOwner,ht=!1;function at(e,t,n,r){t.child=e===null?Cp(t,null,n,r):Dr(t,e.child,n,r)}function hu(e,t,n,r,s){n=n.render;var i=t.ref;return Or(t,s),r=ql(e,t,n,r,i,s),n=Xl(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hn(e,t,s)):(Ee&&n&&Fl(t),t.flags|=1,at(e,t,r,s),t.child)}function mu(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!lc(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Zp(e,t,i,r,s)):(e=zi(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:zs,n(o,r)&&e.ref===t.ref)return hn(e,t,s)}return t.flags|=1,e=In(i,r),e.ref=t.ref,e.return=t,t.child=e}function Zp(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(zs(i,r)&&e.ref===t.ref)if(ht=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(ht=!0);else return t.lanes=e.lanes,hn(e,t,s)}return Vo(e,t,n,r,s)}function ef(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Cr,kt),kt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,je(Cr,kt),kt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,je(Cr,kt),kt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,je(Cr,kt),kt|=r;return at(e,t,s,n),t.child}function tf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Vo(e,t,n,r,s){var i=gt(n)?er:rt.current;return i=Rr(t,i),Or(t,s),n=ql(e,t,n,r,i,s),r=Xl(),e!==null&&!ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,hn(e,t,s)):(Ee&&r&&Fl(t),t.flags|=1,at(e,t,n,s),t.child)}function gu(e,t,n,r,s){if(gt(n)){var i=!0;Hi(t)}else i=!1;if(Or(t,s),t.stateNode===null)Si(e,t),Yp(t,n,r),Uo(t,n,r,s),r=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Dt(u):(u=gt(n)?er:rt.current,u=Rr(t,u));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&uu(t,o,r,u),bn=!1;var g=t.memoizedState;o.state=g,Ji(t,r,o,s),c=t.memoizedState,l!==r||g!==c||mt.current||bn?(typeof d=="function"&&(Wo(t,n,d,r),c=t.memoizedState),(l=bn||cu(t,n,l,r,g,c,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ep(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Wt(t.type,l),o.props=u,p=t.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Dt(c):(c=gt(n)?er:rt.current,c=Rr(t,c));var _=n.getDerivedStateFromProps;(d=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==c)&&uu(t,o,r,c),bn=!1,g=t.memoizedState,o.state=g,Ji(t,r,o,s);var m=t.memoizedState;l!==p||g!==m||mt.current||bn?(typeof _=="function"&&(Wo(t,n,_,r),m=t.memoizedState),(u=bn||cu(t,n,u,r,g,m,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&g===e.memoizedState||(t.flags|=1024),r=!1)}return Bo(e,t,n,r,i,s)}function Bo(e,t,n,r,s,i){tf(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return s&&tu(t,n,!1),hn(e,t,i);r=t.stateNode,_g.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Dr(t,e.child,null,i),t.child=Dr(t,null,l,i)):at(e,t,l,i),t.memoizedState=r.state,s&&tu(t,n,!0),t.child}function nf(e){var t=e.stateNode;t.pendingContext?eu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&eu(e,t.context,!1),Kl(e,t.containerInfo)}function xu(e,t,n,r,s){return $r(),Wl(s),t.flags|=256,at(e,t,n,r),t.child}var Go={dehydrated:null,treeContext:null,retryLane:0};function Ko(e){return{baseLanes:e,cachePool:null,transitions:null}}function rf(e,t,n){var r=t.pendingProps,s=Oe.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),je(Oe,s&1),e===null)return Fo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=va(o,r,0,null),e=Zn(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ko(n),t.memoizedState=Go,e):tc(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return bg(e,t,o,r,l,s,n);if(i){i=r.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=In(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=In(l,i):(i=Zn(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Ko(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Go,r}return i=e.child,e=i.sibling,r=In(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function tc(e,t){return t=va({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ui(e,t,n,r){return r!==null&&Wl(r),Dr(t,e.child,null,n),e=tc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bg(e,t,n,r,s,i,o){if(n)return t.flags&256?(t.flags&=-257,r=qa(Error(J(422))),ui(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=va({mode:"visible",children:r.children},s,0,null),i=Zn(i,s,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&Dr(t,e.child,null,o),t.child.memoizedState=Ko(o),t.memoizedState=Go,i);if(!(t.mode&1))return ui(e,t,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(J(419)),r=qa(i,r,void 0),ui(e,t,o,r)}if(l=(o&e.childLanes)!==0,ht||l){if(r=Ye,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,fn(e,s),Bt(r,e,s,-1))}return oc(),r=qa(Error(J(421))),ui(e,t,o,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Rg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,jt=Ln(s.nextSibling),St=t,Ee=!0,Ht=null,e!==null&&(Mt[It++]=an,Mt[It++]=on,Mt[It++]=tr,an=e.id,on=e.overflow,tr=t),t=tc(t,r.children),t.flags|=4096,t)}function yu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ao(e.return,t,n)}function Xa(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function sf(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(at(e,t,r.children,n),r=Oe.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yu(e,n,t);else if(e.tag===19)yu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(je(Oe,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Qi(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Xa(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Qi(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Xa(t,!0,n,null,i);break;case"together":Xa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Si(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),rr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(J(153));if(t.child!==null){for(e=t.child,n=In(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=In(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function kg(e,t,n){switch(t.tag){case 3:nf(t),$r();break;case 5:Lp(t);break;case 1:gt(t.type)&&Hi(t);break;case 4:Kl(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;je(Gi,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(je(Oe,Oe.current&1),t.flags|=128,null):n&t.child.childLanes?rf(e,t,n):(je(Oe,Oe.current&1),e=hn(e,t,n),e!==null?e.sibling:null);je(Oe,Oe.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return sf(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),je(Oe,Oe.current),r)break;return null;case 22:case 23:return t.lanes=0,ef(e,t,n)}return hn(e,t,n)}var af,Jo,of,lf;af=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jo=function(){};of=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yn(tn.current);var i=null;switch(n){case"input":s=go(e,s),r=go(e,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=wo(e,s),r=wo(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Wi)}_o(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_s.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_s.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ce("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};lf=function(e,t,n,r){n!==r&&(t.flags|=4)};function es(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function jg(e,t,n){var r=t.pendingProps;switch(Al(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return gt(t.type)&&Ui(),tt(t),null;case 3:return r=t.stateNode,Tr(),ze(mt),ze(rt),Ql(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(li(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ht!==null&&(nl(Ht),Ht=null))),Jo(e,t),tt(t),null;case 5:Jl(t);var s=Yn(Ms.current);if(n=t.type,e!==null&&t.stateNode!=null)of(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(J(166));return tt(t),null}if(e=Yn(tn.current),li(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Xt]=t,r[Ps]=i,e=(t.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<ls.length;s++)Ce(ls[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Cc(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":Ec(r,i),Ce("invalid",r)}_o(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&oi(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&oi(r.textContent,l,e),s=["children",""+l]):_s.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Zs(r),zc(r,i,!0);break;case"textarea":Zs(r),Lc(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Wi)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Rd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Xt]=t,e[Ps]=r,af(e,t,!1,!1),t.stateNode=e;e:{switch(o=bo(n,r),n){case"dialog":Ce("cancel",e),Ce("close",e),s=r;break;case"iframe":case"object":case"embed":Ce("load",e),s=r;break;case"video":case"audio":for(s=0;s<ls.length;s++)Ce(ls[s],e);s=r;break;case"source":Ce("error",e),s=r;break;case"img":case"image":case"link":Ce("error",e),Ce("load",e),s=r;break;case"details":Ce("toggle",e),s=r;break;case"input":Cc(e,r),s=go(e,r),Ce("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),Ce("invalid",e);break;case"textarea":Ec(e,r),s=wo(e,r),Ce("invalid",e);break;default:s=r}_o(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Td(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$d(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&bs(e,c):typeof c=="number"&&bs(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(_s.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ce("scroll",e):c!=null&&Sl(e,i,c,o))}switch(n){case"input":Zs(e),zc(e,r,!1);break;case"textarea":Zs(e),Lc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Dn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?zr(e,!!r.multiple,i,!1):r.defaultValue!=null&&zr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Wi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)lf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(J(166));if(n=Yn(Ms.current),Yn(tn.current),li(t)){if(r=t.stateNode,n=t.memoizedProps,r[Xt]=t,(i=r.nodeValue!==n)&&(e=St,e!==null))switch(e.tag){case 3:oi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oi(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xt]=t,t.stateNode=r}return tt(t),null;case 13:if(ze(Oe),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ee&&jt!==null&&t.mode&1&&!(t.flags&128))Sp(),$r(),t.flags|=98560,i=!1;else if(i=li(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(J(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[Xt]=t}else $r(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),i=!1}else Ht!==null&&(nl(Ht),Ht=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Oe.current&1?Be===0&&(Be=3):oc())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return Tr(),Jo(e,t),e===null&&Es(t.stateNode.containerInfo),tt(t),null;case 10:return Vl(t.type._context),tt(t),null;case 17:return gt(t.type)&&Ui(),tt(t),null;case 19:if(ze(Oe),i=t.memoizedState,i===null)return tt(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)es(i,!1);else{if(Be!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Qi(e),o!==null){for(t.flags|=128,es(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return je(Oe,Oe.current&1|2),t.child}e=e.sibling}i.tail!==null&&Fe()>Ar&&(t.flags|=128,r=!0,es(i,!1),t.lanes=4194304)}else{if(!r)if(e=Qi(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),es(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ee)return tt(t),null}else 2*Fe()-i.renderingStartTime>Ar&&n!==1073741824&&(t.flags|=128,r=!0,es(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Fe(),t.sibling=null,n=Oe.current,je(Oe,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return ac(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?kt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(J(156,t.tag))}function Sg(e,t){switch(Al(t),t.tag){case 1:return gt(t.type)&&Ui(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Tr(),ze(mt),ze(rt),Ql(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Jl(t),null;case 13:if(ze(Oe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(J(340));$r()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Oe),null;case 4:return Tr(),null;case 10:return Vl(t.type._context),null;case 22:case 23:return ac(),null;case 24:return null;default:return null}}var di=!1,nt=!1,Ng=typeof WeakSet=="function"?WeakSet:Set,X=null;function Nr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(e,t,r)}else n.current=null}function Qo(e,t,n){try{n()}catch(r){De(e,t,r)}}var wu=!1;function Cg(e,t){if(Oo=Ti,e=pp(),Tl(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,p=e,g=null;t:for(;;){for(var _;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)g=p,p=_;for(;;){if(p===e)break t;if(g===n&&++u===s&&(l=o),g===i&&++d===r&&(c=o),(_=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=_}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mo={focusedElem:e,selectionRange:n},Ti=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var f=m.memoizedProps,L=m.memoizedState,w=t.stateNode,h=w.getSnapshotBeforeUpdate(t.elementType===t.type?f:Wt(t.type,f),L);w.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(v){De(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return m=wu,wu=!1,m}function ms(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Qo(t,n,i)}s=s.next}while(s!==r)}}function ya(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Yo(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function cf(e){var t=e.alternate;t!==null&&(e.alternate=null,cf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Xt],delete t[Ps],delete t[$o],delete t[cg],delete t[ug])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uf(e){return e.tag===5||e.tag===3||e.tag===4}function vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Wi));else if(r!==4&&(e=e.child,e!==null))for(qo(e,t,n),e=e.sibling;e!==null;)qo(e,t,n),e=e.sibling}function Xo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Xo(e,t,n),e=e.sibling;e!==null;)Xo(e,t,n),e=e.sibling}var qe=null,Ut=!1;function wn(e,t,n){for(n=n.child;n!==null;)df(e,t,n),n=n.sibling}function df(e,t,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(ua,n)}catch{}switch(n.tag){case 5:nt||Nr(n,t);case 6:var r=qe,s=Ut;qe=null,wn(e,t,n),qe=r,Ut=s,qe!==null&&(Ut?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Ut?(e=qe,n=n.stateNode,e.nodeType===8?Ba(e.parentNode,n):e.nodeType===1&&Ba(e,n),Ns(e)):Ba(qe,n.stateNode));break;case 4:r=qe,s=Ut,qe=n.stateNode.containerInfo,Ut=!0,wn(e,t,n),qe=r,Ut=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Qo(n,t,o),s=s.next}while(s!==r)}wn(e,t,n);break;case 1:if(!nt&&(Nr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){De(n,t,l)}wn(e,t,n);break;case 21:wn(e,t,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,wn(e,t,n),nt=r):wn(e,t,n);break;default:wn(e,t,n)}}function _u(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ng),t.forEach(function(r){var s=$g.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ft(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,Ut=!1;break e;case 3:qe=l.stateNode.containerInfo,Ut=!0;break e;case 4:qe=l.stateNode.containerInfo,Ut=!0;break e}l=l.return}if(qe===null)throw Error(J(160));df(i,o,s),qe=null,Ut=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){De(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pf(t,e),t=t.sibling}function pf(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ft(t,e),Qt(e),r&4){try{ms(3,e,e.return),ya(3,e)}catch(f){De(e,e.return,f)}try{ms(5,e,e.return)}catch(f){De(e,e.return,f)}}break;case 1:Ft(t,e),Qt(e),r&512&&n!==null&&Nr(n,n.return);break;case 5:if(Ft(t,e),Qt(e),r&512&&n!==null&&Nr(n,n.return),e.flags&32){var s=e.stateNode;try{bs(s,"")}catch(f){De(e,e.return,f)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Md(s,i),bo(l,o);var u=bo(l,i);for(o=0;o<c.length;o+=2){var d=c[o],p=c[o+1];d==="style"?Td(s,p):d==="dangerouslySetInnerHTML"?$d(s,p):d==="children"?bs(s,p):Sl(s,d,p,u)}switch(l){case"input":xo(s,i);break;case"textarea":Id(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?zr(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?zr(s,!!i.multiple,i.defaultValue,!0):zr(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ps]=i}catch(f){De(e,e.return,f)}}break;case 6:if(Ft(t,e),Qt(e),r&4){if(e.stateNode===null)throw Error(J(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(f){De(e,e.return,f)}}break;case 3:if(Ft(t,e),Qt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ns(t.containerInfo)}catch(f){De(e,e.return,f)}break;case 4:Ft(t,e),Qt(e);break;case 13:Ft(t,e),Qt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(sc=Fe())),r&4&&_u(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(nt=(u=nt)||d,Ft(t,e),nt=u):Ft(t,e),Qt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(X=e,d=e.child;d!==null;){for(p=X=d;X!==null;){switch(g=X,_=g.child,g.tag){case 0:case 11:case 14:case 15:ms(4,g,g.return);break;case 1:Nr(g,g.return);var m=g.stateNode;if(typeof m.componentWillUnmount=="function"){r=g,n=g.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(f){De(r,n,f)}}break;case 5:Nr(g,g.return);break;case 22:if(g.memoizedState!==null){ku(p);continue}}_!==null?(_.return=g,X=_):ku(p)}d=d.sibling}e:for(d=null,p=e;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Dd("display",o))}catch(f){De(e,e.return,f)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(f){De(e,e.return,f)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ft(t,e),Qt(e),r&4&&_u(e);break;case 21:break;default:Ft(t,e),Qt(e)}}function Qt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(uf(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bs(s,""),r.flags&=-33);var i=vu(e);Xo(e,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=vu(e);qo(e,l,o);break;default:throw Error(J(161))}}catch(c){De(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function zg(e,t,n){X=e,ff(e)}function ff(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||di;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||nt;l=di;var u=nt;if(di=o,(nt=c)&&!u)for(X=s;X!==null;)o=X,c=o.child,o.tag===22&&o.memoizedState!==null?ju(s):c!==null?(c.return=o,X=c):ju(s);for(;i!==null;)X=i,ff(i),i=i.sibling;X=s,di=l,nt=u}bu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,X=i):bu(e)}}function bu(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||ya(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Wt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&au(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}au(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Ns(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}nt||t.flags&512&&Yo(t)}catch(g){De(t,t.return,g)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function ku(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function ju(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ya(4,t)}catch(c){De(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){De(t,s,c)}}var i=t.return;try{Yo(t)}catch(c){De(t,i,c)}break;case 5:var o=t.return;try{Yo(t)}catch(c){De(t,o,c)}}}catch(c){De(t,t.return,c)}if(t===e){X=null;break}var l=t.sibling;if(l!==null){l.return=t.return,X=l;break}X=t.return}}var Eg=Math.ceil,Xi=mn.ReactCurrentDispatcher,nc=mn.ReactCurrentOwner,$t=mn.ReactCurrentBatchConfig,xe=0,Ye=null,Ae=null,Xe=0,kt=0,Cr=Wn(0),Be=0,Ds=null,rr=0,wa=0,rc=0,gs=null,ft=null,sc=0,Ar=1/0,rn=null,Zi=!1,Zo=null,On=null,pi=!1,Nn=null,ea=0,xs=0,el=null,Ni=-1,Ci=0;function ot(){return xe&6?Fe():Ni!==-1?Ni:Ni=Fe()}function Mn(e){return e.mode&1?xe&2&&Xe!==0?Xe&-Xe:pg.transition!==null?(Ci===0&&(Ci=Yd()),Ci):(e=_e,e!==0||(e=window.event,e=e===void 0?16:rp(e.type)),e):1}function Bt(e,t,n,r){if(50<xs)throw xs=0,el=null,Error(J(185));Us(e,n,r),(!(xe&2)||e!==Ye)&&(e===Ye&&(!(xe&2)&&(wa|=n),Be===4&&jn(e,Xe)),xt(e,r),n===1&&xe===0&&!(t.mode&1)&&(Ar=Fe()+500,ma&&Un()))}function xt(e,t){var n=e.callbackNode;pm(e,t);var r=Di(e,e===Ye?Xe:0);if(r===0)n!==null&&Mc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Mc(n),t===1)e.tag===0?dg(Su.bind(null,e)):bp(Su.bind(null,e)),og(function(){!(xe&6)&&Un()}),n=null;else{switch(qd(r)){case 1:n=Ll;break;case 4:n=Jd;break;case 16:n=$i;break;case 536870912:n=Qd;break;default:n=$i}n=_f(n,hf.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hf(e,t){if(Ni=-1,Ci=0,xe&6)throw Error(J(327));var n=e.callbackNode;if(Mr()&&e.callbackNode!==n)return null;var r=Di(e,e===Ye?Xe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ta(e,r);else{t=r;var s=xe;xe|=2;var i=gf();(Ye!==e||Xe!==t)&&(rn=null,Ar=Fe()+500,Xn(e,t));do try{Og();break}catch(l){mf(e,l)}while(1);Hl(),Xi.current=i,xe=s,Ae!==null?t=0:(Ye=null,Xe=0,t=Be)}if(t!==0){if(t===2&&(s=Co(e),s!==0&&(r=s,t=tl(e,s))),t===1)throw n=Ds,Xn(e,0),jn(e,r),xt(e,Fe()),n;if(t===6)jn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Lg(s)&&(t=ta(e,r),t===2&&(i=Co(e),i!==0&&(r=i,t=tl(e,i))),t===1))throw n=Ds,Xn(e,0),jn(e,r),xt(e,Fe()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(J(345));case 2:Kn(e,ft,rn);break;case 3:if(jn(e,r),(r&130023424)===r&&(t=sc+500-Fe(),10<t)){if(Di(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ot(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ro(Kn.bind(null,e,ft,rn),t);break}Kn(e,ft,rn);break;case 4:if(jn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var o=31-Vt(r);i=1<<o,o=t[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eg(r/1960))-r,10<r){e.timeoutHandle=Ro(Kn.bind(null,e,ft,rn),r);break}Kn(e,ft,rn);break;case 5:Kn(e,ft,rn);break;default:throw Error(J(329))}}}return xt(e,Fe()),e.callbackNode===n?hf.bind(null,e):null}function tl(e,t){var n=gs;return e.current.memoizedState.isDehydrated&&(Xn(e,t).flags|=256),e=ta(e,t),e!==2&&(t=ft,ft=n,t!==null&&nl(t)),e}function nl(e){ft===null?ft=e:ft.push.apply(ft,e)}function Lg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Gt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jn(e,t){for(t&=~rc,t&=~wa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),r=1<<n;e[n]=-1,t&=~r}}function Su(e){if(xe&6)throw Error(J(327));Mr();var t=Di(e,0);if(!(t&1))return xt(e,Fe()),null;var n=ta(e,t);if(e.tag!==0&&n===2){var r=Co(e);r!==0&&(t=r,n=tl(e,r))}if(n===1)throw n=Ds,Xn(e,0),jn(e,t),xt(e,Fe()),n;if(n===6)throw Error(J(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Kn(e,ft,rn),xt(e,Fe()),null}function ic(e,t){var n=xe;xe|=1;try{return e(t)}finally{xe=n,xe===0&&(Ar=Fe()+500,ma&&Un())}}function sr(e){Nn!==null&&Nn.tag===0&&!(xe&6)&&Mr();var t=xe;xe|=1;var n=$t.transition,r=_e;try{if($t.transition=null,_e=1,e)return e()}finally{_e=r,$t.transition=n,xe=t,!(xe&6)&&Un()}}function ac(){kt=Cr.current,ze(Cr)}function Xn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,ag(n)),Ae!==null)for(n=Ae.return;n!==null;){var r=n;switch(Al(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ui();break;case 3:Tr(),ze(mt),ze(rt),Ql();break;case 5:Jl(r);break;case 4:Tr();break;case 13:ze(Oe);break;case 19:ze(Oe);break;case 10:Vl(r.type._context);break;case 22:case 23:ac()}n=n.return}if(Ye=e,Ae=e=In(e.current,null),Xe=kt=t,Be=0,Ds=null,rc=wa=rr=0,ft=gs=null,Qn!==null){for(t=0;t<Qn.length;t++)if(n=Qn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Qn=null}return e}function mf(e,t){do{var n=Ae;try{if(Hl(),ki.current=qi,Yi){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Yi=!1}if(nr=0,Qe=He=Me=null,hs=!1,Is=0,nc.current=null,n===null||n.return===null){Be=1,Ds=t,Ae=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Xe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var _=pu(o);if(_!==null){_.flags&=-257,fu(_,o,l,i,t),_.mode&1&&du(i,u,t),t=_,c=u;var m=t.updateQueue;if(m===null){var f=new Set;f.add(c),t.updateQueue=f}else m.add(c);break e}else{if(!(t&1)){du(i,u,t),oc();break e}c=Error(J(426))}}else if(Ee&&l.mode&1){var L=pu(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),fu(L,o,l,i,t),Wl(Fr(c,l));break e}}i=c=Fr(c,l),Be!==4&&(Be=2),gs===null?gs=[i]:gs.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var w=qp(i,c,t);iu(i,w);break e;case 1:l=c;var h=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof h.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(On===null||!On.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=Xp(i,l,t);iu(i,v);break e}}i=i.return}while(i!==null)}yf(n)}catch(S){t=S,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(1)}function gf(){var e=Xi.current;return Xi.current=qi,e===null?qi:e}function oc(){(Be===0||Be===3||Be===2)&&(Be=4),Ye===null||!(rr&268435455)&&!(wa&268435455)||jn(Ye,Xe)}function ta(e,t){var n=xe;xe|=2;var r=gf();(Ye!==e||Xe!==t)&&(rn=null,Xn(e,t));do try{Pg();break}catch(s){mf(e,s)}while(1);if(Hl(),xe=n,Xi.current=r,Ae!==null)throw Error(J(261));return Ye=null,Xe=0,Be}function Pg(){for(;Ae!==null;)xf(Ae)}function Og(){for(;Ae!==null&&!rm();)xf(Ae)}function xf(e){var t=vf(e.alternate,e,kt);e.memoizedProps=e.pendingProps,t===null?yf(e):Ae=t,nc.current=null}function yf(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Sg(n,t),n!==null){n.flags&=32767,Ae=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Be=6,Ae=null;return}}else if(n=jg(n,t,kt),n!==null){Ae=n;return}if(t=t.sibling,t!==null){Ae=t;return}Ae=t=e}while(t!==null);Be===0&&(Be=5)}function Kn(e,t,n){var r=_e,s=$t.transition;try{$t.transition=null,_e=1,Mg(e,t,n,r)}finally{$t.transition=s,_e=r}return null}function Mg(e,t,n,r){do Mr();while(Nn!==null);if(xe&6)throw Error(J(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(J(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(fm(e,i),e===Ye&&(Ae=Ye=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pi||(pi=!0,_f($i,function(){return Mr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$t.transition,$t.transition=null;var o=_e;_e=1;var l=xe;xe|=4,nc.current=null,Cg(e,n),pf(n,e),Zm(Mo),Ti=!!Oo,Mo=Oo=null,e.current=n,zg(n),sm(),xe=l,_e=o,$t.transition=i}else e.current=n;if(pi&&(pi=!1,Nn=e,ea=s),i=e.pendingLanes,i===0&&(On=null),om(n.stateNode),xt(e,Fe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zi)throw Zi=!1,e=Zo,Zo=null,e;return ea&1&&e.tag!==0&&Mr(),i=e.pendingLanes,i&1?e===el?xs++:(xs=0,el=e):xs=0,Un(),null}function Mr(){if(Nn!==null){var e=qd(ea),t=$t.transition,n=_e;try{if($t.transition=null,_e=16>e?16:e,Nn===null)var r=!1;else{if(e=Nn,Nn=null,ea=0,xe&6)throw Error(J(331));var s=xe;for(xe|=4,X=e.current;X!==null;){var i=X,o=i.child;if(X.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(X=u;X!==null;){var d=X;switch(d.tag){case 0:case 11:case 15:ms(8,d,i)}var p=d.child;if(p!==null)p.return=d,X=p;else for(;X!==null;){d=X;var g=d.sibling,_=d.return;if(cf(d),d===u){X=null;break}if(g!==null){g.return=_,X=g;break}X=_}}}var m=i.alternate;if(m!==null){var f=m.child;if(f!==null){m.child=null;do{var L=f.sibling;f.sibling=null,f=L}while(f!==null)}}X=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,X=o;else e:for(;X!==null;){if(i=X,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ms(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,X=w;break e}X=i.return}}var h=e.current;for(X=h;X!==null;){o=X;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,X=x;else e:for(o=h;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ya(9,l)}}catch(S){De(l,l.return,S)}if(l===o){X=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,X=v;break e}X=l.return}}if(xe=s,Un(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(ua,e)}catch{}r=!0}return r}finally{_e=n,$t.transition=t}}return!1}function Nu(e,t,n){t=Fr(n,t),t=qp(e,t,1),e=Pn(e,t,1),t=ot(),e!==null&&(Us(e,1,t),xt(e,t))}function De(e,t,n){if(e.tag===3)Nu(e,e,n);else for(;t!==null;){if(t.tag===3){Nu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(On===null||!On.has(r))){e=Fr(n,e),e=Xp(t,e,1),t=Pn(t,e,1),e=ot(),t!==null&&(Us(t,1,e),xt(t,e));break}}t=t.return}}function Ig(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ot(),e.pingedLanes|=e.suspendedLanes&n,Ye===e&&(Xe&n)===n&&(Be===4||Be===3&&(Xe&130023424)===Xe&&500>Fe()-sc?Xn(e,0):rc|=n),xt(e,t)}function wf(e,t){t===0&&(e.mode&1?(t=ni,ni<<=1,!(ni&130023424)&&(ni=4194304)):t=1);var n=ot();e=fn(e,t),e!==null&&(Us(e,t,n),xt(e,n))}function Rg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wf(e,n)}function $g(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(t),wf(e,n)}var vf;vf=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||mt.current)ht=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ht=!1,kg(e,t,n);ht=!!(e.flags&131072)}else ht=!1,Ee&&t.flags&1048576&&kp(t,Bi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Si(e,t),e=t.pendingProps;var s=Rr(t,rt.current);Or(t,n),s=ql(null,t,r,e,s,n);var i=Xl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,gt(r)?(i=!0,Hi(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Gl(t),s.updater=xa,t.stateNode=s,s._reactInternals=t,Uo(t,r,e,n),t=Bo(null,t,r,!0,i,n)):(t.tag=0,Ee&&i&&Fl(t),at(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Si(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Tg(r),e=Wt(r,e),s){case 0:t=Vo(null,t,r,e,n);break e;case 1:t=gu(null,t,r,e,n);break e;case 11:t=hu(null,t,r,e,n);break e;case 14:t=mu(null,t,r,Wt(r.type,e),n);break e}throw Error(J(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wt(r,s),Vo(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wt(r,s),gu(e,t,r,s,n);case 3:e:{if(nf(t),e===null)throw Error(J(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Ep(e,t),Ji(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Fr(Error(J(423)),t),t=xu(e,t,r,n,s);break e}else if(r!==s){s=Fr(Error(J(424)),t),t=xu(e,t,r,n,s);break e}else for(jt=Ln(t.stateNode.containerInfo.firstChild),St=t,Ee=!0,Ht=null,n=Cp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($r(),r===s){t=hn(e,t,n);break e}at(e,t,r,n)}t=t.child}return t;case 5:return Lp(t),e===null&&Fo(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Io(r,s)?o=null:i!==null&&Io(r,i)&&(t.flags|=32),tf(e,t),at(e,t,o,n),t.child;case 6:return e===null&&Fo(t),null;case 13:return rf(e,t,n);case 4:return Kl(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Dr(t,null,r,n):at(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wt(r,s),hu(e,t,r,s,n);case 7:return at(e,t,t.pendingProps,n),t.child;case 8:return at(e,t,t.pendingProps.children,n),t.child;case 12:return at(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,je(Gi,r._currentValue),r._currentValue=o,i!==null)if(Gt(i.value,o)){if(i.children===s.children&&!mt.current){t=hn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=cn(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Ao(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(J(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ao(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}at(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Or(t,n),s=Dt(s),r=r(s),t.flags|=1,at(e,t,r,n),t.child;case 14:return r=t.type,s=Wt(r,t.pendingProps),s=Wt(r.type,s),mu(e,t,r,s,n);case 15:return Zp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Wt(r,s),Si(e,t),t.tag=1,gt(r)?(e=!0,Hi(t)):e=!1,Or(t,n),Yp(t,r,s),Uo(t,r,s,n),Bo(null,t,r,!0,e,n);case 19:return sf(e,t,n);case 22:return ef(e,t,n)}throw Error(J(156,t.tag))};function _f(e,t){return Kd(e,t)}function Dg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(e,t,n,r){return new Dg(e,t,n,r)}function lc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tg(e){if(typeof e=="function")return lc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Cl)return 11;if(e===zl)return 14}return 2}function In(e,t){var n=e.alternate;return n===null?(n=Rt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zi(e,t,n,r,s,i){var o=2;if(r=e,typeof e=="function")lc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case xr:return Zn(n.children,s,i,t);case Nl:o=8,s|=8;break;case po:return e=Rt(12,n,t,s|2),e.elementType=po,e.lanes=i,e;case fo:return e=Rt(13,n,t,s),e.elementType=fo,e.lanes=i,e;case ho:return e=Rt(19,n,t,s),e.elementType=ho,e.lanes=i,e;case Ld:return va(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case zd:o=10;break e;case Ed:o=9;break e;case Cl:o=11;break e;case zl:o=14;break e;case _n:o=16,r=null;break e}throw Error(J(130,e==null?e:typeof e,""))}return t=Rt(o,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function Zn(e,t,n,r){return e=Rt(7,e,r,t),e.lanes=n,e}function va(e,t,n,r){return e=Rt(22,e,r,t),e.elementType=Ld,e.lanes=n,e.stateNode={isHidden:!1},e}function Za(e,t,n){return e=Rt(6,e,null,t),e.lanes=n,e}function eo(e,t,n){return t=Rt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fg(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ia(0),this.expirationTimes=Ia(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ia(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function cc(e,t,n,r,s,i,o,l,c){return e=new Fg(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Rt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gl(i),e}function Ag(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function bf(e){if(!e)return Tn;e=e._reactInternals;e:{if(or(e)!==e||e.tag!==1)throw Error(J(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(gt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(J(171))}if(e.tag===1){var n=e.type;if(gt(n))return _p(e,n,t)}return t}function kf(e,t,n,r,s,i,o,l,c){return e=cc(n,r,!0,e,s,i,o,l,c),e.context=bf(null),n=e.current,r=ot(),s=Mn(n),i=cn(r,s),i.callback=t??null,Pn(n,i,s),e.current.lanes=s,Us(e,s,r),xt(e,r),e}function _a(e,t,n,r){var s=t.current,i=ot(),o=Mn(s);return n=bf(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Pn(s,t,o),e!==null&&(Bt(e,s,o,i),bi(e,s,o)),o}function na(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function uc(e,t){Cu(e,t),(e=e.alternate)&&Cu(e,t)}function Wg(){return null}var jf=typeof reportError=="function"?reportError:function(e){console.error(e)};function dc(e){this._internalRoot=e}ba.prototype.render=dc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(J(409));_a(e,t,null,null)};ba.prototype.unmount=dc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;sr(function(){_a(null,e,null,null)}),t[pn]=null}};function ba(e){this._internalRoot=e}ba.prototype.unstable_scheduleHydration=function(e){if(e){var t=ep();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kn.length&&t!==0&&t<kn[n].priority;n++);kn.splice(n,0,e),n===0&&np(e)}};function pc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ka(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function zu(){}function Ug(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=na(o);i.call(u)}}var o=kf(t,r,e,0,null,!1,!1,"",zu);return e._reactRootContainer=o,e[pn]=o.current,Es(e.nodeType===8?e.parentNode:e),sr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=na(c);l.call(u)}}var c=cc(e,0,!1,null,null,!1,!1,"",zu);return e._reactRootContainer=c,e[pn]=c.current,Es(e.nodeType===8?e.parentNode:e),sr(function(){_a(t,c,n,r)}),c}function ja(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=na(o);l.call(c)}}_a(t,o,e,s)}else o=Ug(n,t,e,s,r);return na(o)}Xd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=os(t.pendingLanes);n!==0&&(Pl(t,n|1),xt(t,Fe()),!(xe&6)&&(Ar=Fe()+500,Un()))}break;case 13:sr(function(){var r=fn(e,1);if(r!==null){var s=ot();Bt(r,e,1,s)}}),uc(e,1)}};Ol=function(e){if(e.tag===13){var t=fn(e,134217728);if(t!==null){var n=ot();Bt(t,e,134217728,n)}uc(e,134217728)}};Zd=function(e){if(e.tag===13){var t=Mn(e),n=fn(e,t);if(n!==null){var r=ot();Bt(n,e,t,r)}uc(e,t)}};ep=function(){return _e};tp=function(e,t){var n=_e;try{return _e=e,t()}finally{_e=n}};jo=function(e,t,n){switch(t){case"input":if(xo(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ha(r);if(!s)throw Error(J(90));Od(r),xo(r,s)}}}break;case"textarea":Id(e,n);break;case"select":t=n.value,t!=null&&zr(e,!!n.multiple,t,!1)}};Wd=ic;Ud=sr;var Hg={usingClientEntryPoint:!1,Events:[Vs,_r,ha,Fd,Ad,ic]},ts={findFiberByHostInstance:Jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Vg={bundleType:ts.bundleType,version:ts.version,rendererPackageName:ts.rendererPackageName,rendererConfig:ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bd(e),e===null?null:e.stateNode},findFiberByHostInstance:ts.findFiberByHostInstance||Wg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fi.isDisabled&&fi.supportsFiber)try{ua=fi.inject(Vg),en=fi}catch{}}Ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hg;Ct.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pc(t))throw Error(J(200));return Ag(e,t,null,n)};Ct.createRoot=function(e,t){if(!pc(e))throw Error(J(299));var n=!1,r="",s=jf;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=cc(e,1,!1,null,null,n,!1,r,s),e[pn]=t.current,Es(e.nodeType===8?e.parentNode:e),new dc(t)};Ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(J(188)):(e=Object.keys(e).join(","),Error(J(268,e)));return e=Bd(t),e=e===null?null:e.stateNode,e};Ct.flushSync=function(e){return sr(e)};Ct.hydrate=function(e,t,n){if(!ka(t))throw Error(J(200));return ja(null,e,t,!0,n)};Ct.hydrateRoot=function(e,t,n){if(!pc(e))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=jf;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=kf(t,null,e,1,n??null,s,!1,i,o),e[pn]=t.current,Es(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new ba(t)};Ct.render=function(e,t,n){if(!ka(t))throw Error(J(200));return ja(null,e,t,!1,n)};Ct.unmountComponentAtNode=function(e){if(!ka(e))throw Error(J(40));return e._reactRootContainer?(sr(function(){ja(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0):!1};Ct.unstable_batchedUpdates=ic;Ct.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ka(n))throw Error(J(200));if(e==null||e._reactInternals===void 0)throw Error(J(38));return ja(e,t,n,!1,r)};Ct.version="18.3.1-next-f1338f8080-20240426";function Sf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sf)}catch(e){console.error(e)}}Sf(),jd.exports=Ct;var Bg=jd.exports,Eu=Bg;co.createRoot=Eu.createRoot,co.hydrateRoot=Eu.hydrateRoot;const Gg="twwe_mods_db",Fn="mod_bundles",Kg=1;function fc(){return new Promise((e,t)=>{const n=indexedDB.open(Gg,Kg);n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(Fn)||r.createObjectStore(Fn,{keyPath:"id"})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error)})}async function Nf(e){const t=await fc();return new Promise((n,r)=>{const o=t.transaction(Fn,"readwrite").objectStore(Fn).put(e);o.onsuccess=()=>n(),o.onerror=()=>r(o.error)})}async function Cf(){const e=await fc();return new Promise((t,n)=>{const i=e.transaction(Fn,"readonly").objectStore(Fn).getAll();i.onsuccess=()=>t(i.result),i.onerror=()=>n(i.error)})}async function Jg(e){const t=await fc();return new Promise((n,r)=>{const o=t.transaction(Fn,"readwrite").objectStore(Fn).delete(e);o.onsuccess=()=>n(),o.onerror=()=>r(o.error)})}async function zf(){const e=await Cf();return e.length===0?null:e.sort((t,n)=>n.timestamp-t.timestamp)[0]}const Je={mana_max:1e5,mana_charge_speed:1e5,reload_time:20,fire_rate_wait:10,deck_capacity:26,shuffle_deck_when_empty:!1,spread_degrees:0,speed_multiplier:1,actions_per_round:1,spells:{},spell_uses:{},always_cast:[]},Qg=[{id:0,name:"",color:"#4d2020"},{id:1,name:"",color:"#612c11"},{id:2,name:"",color:"#2b3668"},{id:3,name:"",color:"#18595e"},{id:4,name:"",color:"#31633e"},{id:5,name:"",color:"#6e4932"},{id:6,name:"",color:"#692663"},{id:7,name:"",color:"#202b24"}],Yg=[{name:"",types:[0],color:"from-blue-500/10 to-blue-600/20"},{name:"",types:[2],color:"from-green-500/10 to-green-600/20"},{name:"++",types:[6,3,5],color:"from-purple-500/10 to-purple-600/20"},{name:"++",types:[1,4,7],color:"from-orange-500/10 to-orange-600/20"}];var qg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Xg=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zg=(e,t)=>{const n=E.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>E.createElement("svg",{ref:u,...qg,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${Xg(e)}`,...c},[...t.map(([d,p])=>E.createElement(d,p)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var re=Zg;const ln=re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),e0=re("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),Lu=re("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),t0=re("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),n0=re("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),ra=re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),rl=re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),r0=re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),s0=re("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),i0=re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),a0=re("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),to=re("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),qt=re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),o0=re("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),sl=re("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),il=re("FolderPlus",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["line",{x1:"12",x2:"12",y1:"10",y2:"16",key:"3c25pp"}],["line",{x1:"9",x2:"15",y1:"13",y2:"13",key:"10hoct"}]]),l0=re("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),c0=re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),u0=re("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Ef=re("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0",key:"aigmz7"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2",key:"1n6bmn"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8",key:"a9iiix"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),Pu=re("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Lf=re("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),al=re("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Pf=re("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),mr=re("Layers",[["polygon",{points:"12 2 2 7 12 12 22 7 12 2",key:"1b0ttc"}],["polyline",{points:"2 17 12 22 22 17",key:"imjtdl"}],["polyline",{points:"2 12 12 17 22 12",key:"5dexcv"}]]),d0=re("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),Ts=re("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),p0=re("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),f0=re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),h0=re("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),ol=re("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),m0=re("MousePointer2",[["path",{d:"m4 4 7.07 17 2.51-7.39L21 11.07z",key:"1vqm48"}]]),Of=re("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),Ou=re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Wr=re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),g0=re("Redo2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13",key:"19mnr4"}]]),Gs=re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),x0=re("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),Fs=re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Mf=re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),no=re("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Ei=re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),Rn=re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),y0=re("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11",key:"llx8ln"}]]),w0=re("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Li=re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Pi=re("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),un=re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Oi=re("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ie=e=>typeof e=="string",ns=()=>{let e,t;const n=new Promise((r,s)=>{e=r,t=s});return n.resolve=e,n.reject=t,n},Mu=e=>e==null?"":""+e,v0=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},_0=/###/g,Iu=e=>e&&e.indexOf("###")>-1?e.replace(_0,"."):e,Ru=e=>!e||ie(e),ys=(e,t,n)=>{const r=ie(t)?t.split("."):t;let s=0;for(;s<r.length-1;){if(Ru(e))return{};const i=Iu(r[s]);!e[i]&&n&&(e[i]=new n),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={},++s}return Ru(e)?{}:{obj:e,k:Iu(r[s])}},$u=(e,t,n)=>{const{obj:r,k:s}=ys(e,t,Object);if(r!==void 0||t.length===1){r[s]=n;return}let i=t[t.length-1],o=t.slice(0,t.length-1),l=ys(e,o,Object);for(;l.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),l=ys(e,o,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=n},b0=(e,t,n,r)=>{const{obj:s,k:i}=ys(e,t,Object);s[i]=s[i]||[],s[i].push(n)},sa=(e,t)=>{const{obj:n,k:r}=ys(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},k0=(e,t,n)=>{const r=sa(e,n);return r!==void 0?r:sa(t,n)},If=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?ie(e[r])||e[r]instanceof String||ie(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):If(e[r],t[r],n):e[r]=t[r]);return e},ur=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var j0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const S0=e=>ie(e)?e.replace(/[&<>"'\/]/g,t=>j0[t]):e;class N0{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const C0=[" ",",","?","!",";"],z0=new N0(20),E0=(e,t,n)=>{t=t||"",n=n||"";const r=C0.filter(o=>t.indexOf(o)<0&&n.indexOf(o)<0);if(r.length===0)return!0;const s=z0.getRegExp(`(${r.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!s.test(e);if(!i){const o=e.indexOf(n);o>0&&!s.test(e.substring(0,o))&&(i=!0)}return i},ll=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let s=e;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let o,l="";for(let c=i;c<r.length;++c)if(c!==i&&(l+=n),l+=r[c],o=s[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<r.length-1)continue;i+=c-i+1;break}s=o}return s},As=e=>e==null?void 0:e.replace("_","-"),L0={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var n,r;(r=(n=console==null?void 0:console[e])==null?void 0:n.apply)==null||r.call(n,console,t)}};class ia{constructor(t,n={}){this.init(t,n)}init(t,n={}){this.prefix=n.prefix||"i18next:",this.logger=t||L0,this.options=n,this.debug=n.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,s){return s&&!this.debug?null:(ie(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new ia(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new ia(this.logger,t)}}var Zt=new ia;class Sa{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(n)||0;this.observers[r].set(n,s+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t,...n){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([s,i])=>{for(let o=0;o<i;o++)s.apply(s,[t,...n])})}}class Du extends Sa{constructor(t,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r,s={}){var u,d;const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,o=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,n],r&&(Array.isArray(r)?l.push(...r):ie(r)&&i?l.push(...r.split(i)):l.push(r)));const c=sa(this.data,l);return!c&&!n&&!r&&t.indexOf(".")>-1&&(t=l[0],n=l[1],r=l.slice(2).join(".")),c||!o||!ie(r)?c:ll((d=(u=this.data)==null?void 0:u[t])==null?void 0:d[n],r,i)}addResource(t,n,r,s,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[t,n];r&&(l=l.concat(o?r.split(o):r)),t.indexOf(".")>-1&&(l=t.split("."),s=n,n=l[1]),this.addNamespaces(n),$u(this.data,l,s),i.silent||this.emit("added",t,n,r,s)}addResources(t,n,r,s={silent:!1}){for(const i in r)(ie(r[i])||Array.isArray(r[i]))&&this.addResource(t,n,i,r[i],{silent:!0});s.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,s,i,o={silent:!1,skipCopy:!1}){let l=[t,n];t.indexOf(".")>-1&&(l=t.split("."),s=r,r=n,n=l[1]),this.addNamespaces(n);let c=sa(this.data,l)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?If(c,r,i):c={...c,...r},$u(this.data,l,c),o.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(s=>n[s]&&Object.keys(n[s]).length>0)}toJSON(){return this.data}}var Rf={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,s){return e.forEach(i=>{var o;t=((o=this.processors[i])==null?void 0:o.process(t,n,r,s))??t}),t}};const $f=Symbol("i18next/PATH_KEY");function P0(){const e=[],t=Object.create(null);let n;return t.get=(r,s)=>{var i;return(i=n==null?void 0:n.revoke)==null||i.call(n),s===$f?e:(e.push(s),n=Proxy.revocable(r,t),n.proxy)},Proxy.revocable(Object.create(null),t).proxy}function cl(e,t){const{[$f]:n}=e(P0());return n.join((t==null?void 0:t.keySeparator)??".")}const Tu={},ro=e=>!ie(e)&&typeof e!="boolean"&&typeof e!="number";class aa extends Sa{constructor(t,n={}){super(),v0(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Zt.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,n={interpolation:{}}){const r={...n};if(t==null)return!1;const s=this.resolve(t,r);if((s==null?void 0:s.res)===void 0)return!1;const i=ro(s.res);return!(r.returnObjects===!1&&i)}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const o=r&&t.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!E0(t,r,s);if(o&&!l){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:ie(i)?[i]:i};const u=t.split(r);(r!==s||r===s&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),t=u.join(s)}return{key:t,namespaces:ie(i)?[i]:i}}translate(t,n,r){let s=typeof n=="object"?{...n}:n;if(typeof s!="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),typeof s=="object"&&(s={...s}),s||(s={}),t==null)return"";typeof t=="function"&&(t=cl(t,{...this.options,...s})),Array.isArray(t)||(t=[String(t)]);const i=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(t[t.length-1],s),u=c[c.length-1];let d=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;d===void 0&&(d=":");const p=s.lng||this.language,g=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((p==null?void 0:p.toLowerCase())==="cimode")return g?i?{res:`${u}${d}${l}`,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:`${u}${d}${l}`:i?{res:l,usedKey:l,exactUsedKey:l,usedLng:p,usedNS:u,usedParams:this.getUsedParamsDetails(s)}:l;const _=this.resolve(t,s);let m=_==null?void 0:_.res;const f=(_==null?void 0:_.usedKey)||l,L=(_==null?void 0:_.exactUsedKey)||l,w=["[object Number]","[object Function]","[object RegExp]"],h=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,v=s.count!==void 0&&!ie(s.count),S=aa.hasDefaultValue(s),z=v?this.pluralResolver.getSuffix(p,s.count,s):"",j=s.ordinal&&v?this.pluralResolver.getSuffix(p,s.count,{ordinal:!1}):"",I=v&&!s.ordinal&&s.count===0,H=I&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${z}`]||s[`defaultValue${j}`]||s.defaultValue;let U=m;x&&!m&&S&&(U=H);const R=ro(U),P=Object.prototype.toString.apply(U);if(x&&U&&R&&w.indexOf(P)<0&&!(ie(h)&&Array.isArray(U))){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const $=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,U,{...s,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return i?(_.res=$,_.usedParams=this.getUsedParamsDetails(s),_):$}if(o){const $=Array.isArray(U),W=$?[]:{},C=$?L:f;for(const y in U)if(Object.prototype.hasOwnProperty.call(U,y)){const k=`${C}${o}${y}`;S&&!m?W[y]=this.translate(k,{...s,defaultValue:ro(H)?H[y]:void 0,joinArrays:!1,ns:c}):W[y]=this.translate(k,{...s,joinArrays:!1,ns:c}),W[y]===k&&(W[y]=U[y])}m=W}}else if(x&&ie(h)&&Array.isArray(m))m=m.join(h),m&&(m=this.extendTranslation(m,t,s,r));else{let $=!1,W=!1;!this.isValidLookup(m)&&S&&($=!0,m=H),this.isValidLookup(m)||(W=!0,m=l);const y=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&W?void 0:m,k=S&&H!==m&&this.options.updateMissing;if(W||$||k){if(this.logger.log(k?"updateKey":"missingKey",p,u,l,k?H:m),o){const T=this.resolve(l,{...s,keySeparator:!1});T&&T.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let b=[];const N=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&N&&N[0])for(let T=0;T<N.length;T++)b.push(N[T]);else this.options.saveMissingTo==="all"?b=this.languageUtils.toResolveHierarchy(s.lng||this.language):b.push(s.lng||this.language);const M=(T,D,F)=>{var Y;const G=S&&F!==m?F:y;this.options.missingKeyHandler?this.options.missingKeyHandler(T,u,D,G,k,s):(Y=this.backendConnector)!=null&&Y.saveMissing&&this.backendConnector.saveMissing(T,u,D,G,k,s),this.emit("missingKey",T,u,D,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?b.forEach(T=>{const D=this.pluralResolver.getSuffixes(T,s);I&&s[`defaultValue${this.options.pluralSeparator}zero`]&&D.indexOf(`${this.options.pluralSeparator}zero`)<0&&D.push(`${this.options.pluralSeparator}zero`),D.forEach(F=>{M([T],l+F,s[`defaultValue${F}`]||H)})}):M(b,l,H))}m=this.extendTranslation(m,t,s,_,r),W&&m===l&&this.options.appendNamespaceToMissingKey&&(m=`${u}${d}${l}`),(W||$)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${d}${l}`:l,$?m:void 0,s))}return i?(_.res=m,_.usedParams=this.getUsedParamsDetails(s),_):m}extendTranslation(t,n,r,s,i){var c,u;if((c=this.i18nFormat)!=null&&c.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=ie(t)&&(((u=r==null?void 0:r.interpolation)==null?void 0:u.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let p;if(d){const _=t.match(this.interpolator.nestingRegexp);p=_&&_.length}let g=r.replace&&!ie(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(g={...this.options.interpolation.defaultVariables,...g}),t=this.interpolator.interpolate(t,g,r.lng||this.language||s.usedLng,r),d){const _=t.match(this.interpolator.nestingRegexp),m=_&&_.length;p<m&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,(..._)=>(i==null?void 0:i[0])===_[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${_[0]} in key: ${n[0]}`),null):this.translate(..._,n),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,l=ie(o)?[o]:o;return t!=null&&(l!=null&&l.length)&&r.applyPostProcessor!==!1&&(t=Rf.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t,n={}){let r,s,i,o,l;return ie(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(c,n),d=u.key;s=d;let p=u.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const g=n.count!==void 0&&!ie(n.count),_=g&&!n.ordinal&&n.count===0,m=n.context!==void 0&&(ie(n.context)||typeof n.context=="number")&&n.context!=="",f=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);p.forEach(L=>{var w,h;this.isValidLookup(r)||(l=L,!Tu[`${f[0]}-${L}`]&&((w=this.utils)!=null&&w.hasLoadedNamespace)&&!((h=this.utils)!=null&&h.hasLoadedNamespace(l))&&(Tu[`${f[0]}-${L}`]=!0,this.logger.warn(`key "${s}" for languages "${f.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),f.forEach(x=>{var z;if(this.isValidLookup(r))return;o=x;const v=[d];if((z=this.i18nFormat)!=null&&z.addLookupKeys)this.i18nFormat.addLookupKeys(v,d,x,L,n);else{let j;g&&(j=this.pluralResolver.getSuffix(x,n.count,n));const I=`${this.options.pluralSeparator}zero`,H=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(g&&(n.ordinal&&j.indexOf(H)===0&&v.push(d+j.replace(H,this.options.pluralSeparator)),v.push(d+j),_&&v.push(d+I)),m){const U=`${d}${this.options.contextSeparator||"_"}${n.context}`;v.push(U),g&&(n.ordinal&&j.indexOf(H)===0&&v.push(U+j.replace(H,this.options.pluralSeparator)),v.push(U+j),_&&v.push(U+I))}}let S;for(;S=v.pop();)this.isValidLookup(r)||(i=S,r=this.getResource(x,L,S,n))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:o,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r,s={}){var i;return(i=this.i18nFormat)!=null&&i.getResource?this.i18nFormat.getResource(t,n,r,s):this.resourceStore.getResource(t,n,r,s)}getUsedParamsDetails(t={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!ie(t.replace);let s=r?t.replace:t;if(r&&typeof t.count<"u"&&(s.count=t.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of n)delete s[i]}return s}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class Fu{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Zt.create("languageUtils")}getScriptPartFromCode(t){if(t=As(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=As(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(ie(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(n=s)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const s=this.getScriptPartFromCode(r);if(this.isSupportedCode(s))return n=s;const i=this.getLanguagePartFromCode(r);if(this.isSupportedCode(i))return n=i;n=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),ie(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],t),s=[],i=o=>{o&&(this.isSupportedCode(o)?s.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return ie(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):ie(t)&&i(this.formatLanguageCode(t)),r.forEach(o=>{s.indexOf(o)<0&&i(this.formatLanguageCode(o))}),s}}const Au={zero:0,one:1,two:2,few:3,many:4,other:5},Wu={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class O0{constructor(t,n={}){this.languageUtils=t,this.options=n,this.logger=Zt.create("pluralResolver"),this.pluralRulesCache={}}clearCache(){this.pluralRulesCache={}}getRule(t,n={}){const r=As(t==="dev"?"en":t),s=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(r,{type:s})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),Wu;if(!t.match(/-|_/))return Wu;const c=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(c,n)}return this.pluralRulesCache[i]=o,o}needsPlural(t,n={}){let r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(t,n,r={}){return this.getSuffixes(t,r).map(s=>`${n}${s}`)}getSuffixes(t,n={}){let r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((s,i)=>Au[s]-Au[i]).map(s=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${s}`):[]}getSuffix(t,n,r={}){const s=this.getRule(t,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const Uu=(e,t,n,r=".",s=!0)=>{let i=k0(e,t,n);return!i&&s&&ie(n)&&(i=ll(e,n,r),i===void 0&&(i=ll(t,n,r))),i},so=e=>e.replace(/\$/g,"$$$$");class Hu{constructor(t={}){var n;this.logger=Zt.create("interpolator"),this.options=t,this.format=((n=t==null?void 0:t.interpolation)==null?void 0:n.format)||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:p,nestingPrefix:g,nestingPrefixEscaped:_,nestingSuffix:m,nestingSuffixEscaped:f,nestingOptionsSeparator:L,maxReplaces:w,alwaysFormat:h}=t.interpolation;this.escape=n!==void 0?n:S0,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?ur(i):o||"{{",this.suffix=l?ur(l):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=g?ur(g):_||ur("$t("),this.nestingSuffix=m?ur(m):f||ur(")"),this.nestingOptionsSeparator=L||",",this.maxReplaces=w||1e3,this.alwaysFormat=h!==void 0?h:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,n,r,s){var _;let i,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=m=>{if(m.indexOf(this.formatSeparator)<0){const h=Uu(n,c,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(h,void 0,r,{...s,...n,interpolationkey:m}):h}const f=m.split(this.formatSeparator),L=f.shift().trim(),w=f.join(this.formatSeparator).trim();return this.format(Uu(n,c,L,this.options.keySeparator,this.options.ignoreJSONStructure),w,r,{...s,...n,interpolationkey:L})};this.resetRegExp();const d=(s==null?void 0:s.missingInterpolationHandler)||this.options.missingInterpolationHandler,p=((_=s==null?void 0:s.interpolation)==null?void 0:_.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>so(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?so(this.escape(m)):so(m)}].forEach(m=>{for(l=0;i=m.regex.exec(t);){const f=i[1].trim();if(o=u(f),o===void 0)if(typeof d=="function"){const w=d(t,i,s);o=ie(w)?w:""}else if(s&&Object.prototype.hasOwnProperty.call(s,f))o="";else if(p){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${f} for interpolating ${t}`),o="";else!ie(o)&&!this.useRawValueToEscape&&(o=Mu(o));const L=m.safeValue(o);if(t=t.replace(i[0],L),p?(m.regex.lastIndex+=o.length,m.regex.lastIndex-=i[0].length):m.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,n,r={}){let s,i,o;const l=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const p=c.split(new RegExp(`${d}[ ]*{`));let g=`{${p[1]}`;c=p[0],g=this.interpolate(g,o);const _=g.match(/'/g),m=g.match(/"/g);(((_==null?void 0:_.length)??0)%2===0&&!m||m.length%2!==0)&&(g=g.replace(/'/g,'"'));try{o=JSON.parse(g),u&&(o={...u,...o})}catch(f){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,f),`${c}${d}${g}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;s=this.nestingRegexp.exec(t);){let c=[];o={...r},o=o.replace&&!ie(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const u=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(u!==-1&&(c=s[1].slice(u).split(this.formatSeparator).map(d=>d.trim()).filter(Boolean),s[1]=s[1].slice(0,u)),i=n(l.call(this,s[1].trim(),o),o),i&&s[0]===t&&!ie(i))return i;ie(i)||(i=Mu(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${t}`),i=""),c.length&&(i=c.reduce((d,p)=>this.format(d,p,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),t=t.replace(s[0],i),this.regexp.lastIndex=0}return t}}const M0=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);t==="currency"&&s.indexOf(":")<0?n.currency||(n.currency=s.trim()):t==="relativetime"&&s.indexOf(":")<0?n.range||(n.range=s.trim()):s.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=l.trim();n[d]||(n[d]=u),u==="false"&&(n[d]=!1),u==="true"&&(n[d]=!0),isNaN(u)||(n[d]=parseInt(u,10))}})}return{formatName:t,formatOptions:n}},Vu=e=>{const t={};return(n,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const o=r+JSON.stringify(i);let l=t[o];return l||(l=e(As(r),s),t[o]=l),l(n)}},I0=e=>(t,n,r)=>e(As(n),r)(t);class R0{constructor(t={}){this.logger=Zt.create("formatter"),this.options=t,this.init(t)}init(t,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?Vu:I0;this.formats={number:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i});return l=>o.format(l)}),currency:r((s,i)=>{const o=new Intl.NumberFormat(s,{...i,style:"currency"});return l=>o.format(l)}),datetime:r((s,i)=>{const o=new Intl.DateTimeFormat(s,{...i});return l=>o.format(l)}),relativetime:r((s,i)=>{const o=new Intl.RelativeTimeFormat(s,{...i});return l=>o.format(l,i.range||"day")}),list:r((s,i)=>{const o=new Intl.ListFormat(s,{...i});return l=>o.format(l)})}}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=Vu(n)}format(t,n,r,s={}){const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,c)=>{var p;const{formatName:u,formatOptions:d}=M0(c);if(this.formats[u]){let g=l;try{const _=((p=s==null?void 0:s.formatParams)==null?void 0:p[s.interpolationkey])||{},m=_.locale||_.lng||s.locale||s.lng||r;g=this.formats[u](l,m,{...d,...s,..._})}catch(_){this.logger.warn(_)}return g}else this.logger.warn(`there was no format function for ${u}`);return l},t)}}const $0=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class D0 extends Sa{constructor(t,n,r,s={}){var i,o;super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=Zt.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],(o=(i=this.backend)==null?void 0:i.init)==null||o.call(i,r,s.backend,s)}queueLoad(t,n,r,s){const i={},o={},l={},c={};return t.forEach(u=>{let d=!0;n.forEach(p=>{const g=`${u}|${p}`;!r.reload&&this.store.hasResourceBundle(u,p)?this.state[g]=2:this.state[g]<0||(this.state[g]===1?o[g]===void 0&&(o[g]=!0):(this.state[g]=1,d=!1,o[g]===void 0&&(o[g]=!0),i[g]===void 0&&(i[g]=!0),c[p]===void 0&&(c[p]=!0)))}),d||(l[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(t,n,r){const s=t.split("|"),i=s[0],o=s[1];n&&this.emit("failedLoading",i,o,n),!n&&r&&this.store.addResourceBundle(i,o,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const l={};this.queue.forEach(c=>{b0(c.loaded,[i],o),$0(c,t),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{l[u]||(l[u]={});const d=c.loaded[u];d.length&&d.forEach(p=>{l[u][p]===void 0&&(l[u][p]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(t,n,r,s=0,i=this.retryTimeout,o){if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:s,wait:i,callback:o});return}this.readingCalls++;const l=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(u&&d&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,s+1,i*2,o)},i);return}o(u,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const u=c(t,n);u&&typeof u.then=="function"?u.then(d=>l(null,d)).catch(l):l(null,u)}catch(u){l(u)}return}return c(t,n,l)}prepareLoading(t,n,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();ie(t)&&(t=this.languageUtils.toResolveHierarchy(t)),ie(n)&&(n=[n]);const i=this.queueLoad(t,n,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t,n=""){const r=t.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${n}loading namespace ${i} for language ${s} failed`,o),!o&&l&&this.logger.log(`${n}loaded namespace ${i} for language ${s}`,l),this.loaded(t,o,l)})}saveMissing(t,n,r,s,i,o={},l=()=>{}){var c,u,d,p,g;if((u=(c=this.services)==null?void 0:c.utils)!=null&&u.hasLoadedNamespace&&!((p=(d=this.services)==null?void 0:d.utils)!=null&&p.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((g=this.backend)!=null&&g.create){const _={...o,isUpdate:i},m=this.backend.create.bind(this.backend);if(m.length<6)try{let f;m.length===5?f=m(t,n,r,s,_):f=m(t,n,r,s),f&&typeof f.then=="function"?f.then(L=>l(null,L)).catch(l):l(null,f)}catch(f){l(f)}else m(t,n,r,s,l,_)}!t||!t[0]||this.store.addResource(t[0],n,r,s)}}}const io=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),ie(e[1])&&(t.defaultValue=e[1]),ie(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Bu=e=>{var t,n;return ie(e.ns)&&(e.ns=[e.ns]),ie(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),ie(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),((n=(t=e.supportedLngs)==null?void 0:t.indexOf)==null?void 0:n.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e},hi=()=>{},T0=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class ws extends Sa{constructor(t={},n){if(super(),this.options=Bu(t),this.services={},this.logger=Zt,this.modules={external:[]},T0(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(t={},n){this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(ie(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=io();this.options={...r,...this.options,...Bu(t)},this.options.interpolation={...r.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler),this.options.debug===!0&&typeof console<"u"&&console.warn("i18next is maintained with support from locize.com  consider powering your project with managed localization (AI, CDN, integrations): https://locize.com");const s=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Zt.init(s(this.modules.logger),this.options):Zt.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=R0;const d=new Fu(this.options);this.store=new Du(this.options.resources,this.options);const p=this.services;p.logger=Zt,p.resourceStore=this.store,p.languageUtils=d,p.pluralResolver=new O0(d,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(p.formatter=s(u),p.formatter.init&&p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new Hu(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new D0(s(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",(_,...m)=>{this.emit(_,...m)}),this.modules.languageDetector&&(p.languageDetector=s(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=s(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new aa(this.services,this.options),this.translator.on("*",(_,...m)=>{this.emit(_,...m)}),this.modules.external.forEach(_=>{_.init&&_.init(this)})}if(this.format=this.options.interpolation.format,n||(n=hi),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...d)=>this.store[u](...d)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...d)=>(this.store[u](...d),this)});const l=ns(),c=()=>{const u=(d,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(p),n(d,p)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(t,n=hi){var i,o;let r=n;const s=ie(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if((s==null?void 0:s.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const l=[],c=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(p=>{p!=="cimode"&&l.indexOf(p)<0&&l.push(p)})};s?c(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>c(d)),(o=(i=this.options.preload)==null?void 0:i.forEach)==null||o.call(i,u=>c(u)),this.services.backendConnector.load(l,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(u)})}else r(null)}reloadResources(t,n,r){const s=ns();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=hi),this.services.backendConnector.reload(t,n,i=>{s.resolve(),r(i)}),s}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Rf.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,n){this.isLanguageChangingTo=t;const r=ns();this.emit("languageChanging",t);const s=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},i=(l,c)=>{c?this.isLanguageChangingTo===t&&(s(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...u)=>this.t(...u)),n&&n(l,(...u)=>this.t(...u))},o=l=>{var d,p;!t&&!l&&this.services.languageDetector&&(l=[]);const c=ie(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(ie(l)?[l]:l);u&&(this.language||s(u),this.translator.language||this.translator.changeLanguage(u),(p=(d=this.services.languageDetector)==null?void 0:d.cacheUserLanguage)==null||p.call(d,u)),this.loadResources(u,g=>{i(g,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),r}getFixedT(t,n,r){const s=(i,o,...l)=>{let c;typeof o!="object"?c=this.options.overloadTranslationOptionHandler([i,o].concat(l)):c={...o},c.lng=c.lng||s.lng,c.lngs=c.lngs||s.lngs,c.ns=c.ns||s.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||s.keyPrefix);const u=this.options.keySeparator||".";let d;return c.keyPrefix&&Array.isArray(i)?d=i.map(p=>(typeof p=="function"&&(p=cl(p,{...this.options,...o})),`${c.keyPrefix}${u}${p}`)):(typeof i=="function"&&(i=cl(i,{...this.options,...o})),d=c.keyPrefix?`${c.keyPrefix}${u}${i}`:i),this.t(d,c)};return ie(t)?s.lng=t:s.lngs=t,s.ns=n,s.keyPrefix=r,s}t(...t){var n;return(n=this.translator)==null?void 0:n.translate(...t)}exists(...t){var n;return(n=this.translator)==null?void 0:n.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const u=this.services.backendConnector.state[`${l}|${c}`];return u===-1||u===0||u===2};if(n.precheck){const l=n.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(r,t)&&(!s||o(i,t)))}loadNamespaces(t,n){const r=ns();return this.options.ns?(ie(t)&&(t=[t]),t.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=ns();ie(t)&&(t=[t]);const s=this.options.preload||[],i=t.filter(o=>s.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=s.concat(i),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}dir(t){var s,i;if(t||(t=this.resolvedLanguage||(((s=this.languages)==null?void 0:s.length)>0?this.languages[0]:this.language)),!t)return"rtl";try{const o=new Intl.Locale(t);if(o&&o.getTextInfo){const l=o.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((i=this.services)==null?void 0:i.languageUtils)||new Fu(io());return t.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},n){const r=new ws(t,n);return r.createInstance=ws.createInstance,r}cloneInstance(t={},n=hi){const r=t.forkResourceStore;r&&delete t.forkResourceStore;const s={...this.options,...t,isClone:!0},i=new ws(s);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r){const l=Object.keys(this.store.data).reduce((c,u)=>(c[u]={...this.store.data[u]},c[u]=Object.keys(c[u]).reduce((d,p)=>(d[p]={...c[u][p]},d),c[u]),c),{});i.store=new Du(l,s),i.services.resourceStore=i.store}if(t.interpolation){const c={...io().interpolation,...this.options.interpolation,...t.interpolation},u={...s,interpolation:c};i.services.interpolator=new Hu(u)}return i.translator=new aa(i.services,s),i.translator.on("*",(l,...c)=>{i.emit(l,...c)}),i.init(s,n),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ut=ws.createInstance();ut.createInstance;ut.dir;ut.init;ut.loadResources;ut.reloadResources;ut.use;ut.changeLanguage;ut.getFixedT;ut.t;ut.exists;ut.setDefaultNamespace;ut.hasLoadedNamespace;ut.loadNamespaces;ut.loadLanguages;const F0=(e,t,n,r)=>{var i,o,l,c;const s=[n,{code:t,...r||{}}];if((o=(i=e==null?void 0:e.services)==null?void 0:i.logger)!=null&&o.forward)return e.services.logger.forward(s,"warn","react-i18next::",!0);ir(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),(c=(l=e==null?void 0:e.services)==null?void 0:l.logger)!=null&&c.warn?e.services.logger.warn(...s):console!=null&&console.warn&&console.warn(...s)},Gu={},Df=(e,t,n,r)=>{ir(n)&&Gu[n]||(ir(n)&&(Gu[n]=new Date),F0(e,t,n,r))},Tf=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},ul=(e,t,n)=>{e.loadNamespaces(t,Tf(e,n))},Ku=(e,t,n,r)=>{if(ir(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return ul(e,n,r);n.forEach(s=>{e.options.ns.indexOf(s)<0&&e.options.ns.push(s)}),e.loadLanguages(t,Tf(e,r))},A0=(e,t,n={})=>!t.languages||!t.languages.length?(Df(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!s(r.isLanguageChangingTo,e))return!1}}),ir=e=>typeof e=="string",W0=e=>typeof e=="object"&&e!==null,U0=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,H0={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},V0=e=>H0[e],B0=e=>e.replace(U0,V0);let dl={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:B0,transDefaultProps:void 0};const G0=(e={})=>{dl={...dl,...e}},K0=()=>dl;let Ff;const J0=e=>{Ff=e},Q0=()=>Ff,Y0={type:"3rdParty",init(e){G0(e.options.react),J0(e)}},q0=E.createContext();class X0{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var Af={exports:{}},Wf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ur=E;function Z0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ex=typeof Object.is=="function"?Object.is:Z0,tx=Ur.useState,nx=Ur.useEffect,rx=Ur.useLayoutEffect,sx=Ur.useDebugValue;function ix(e,t){var n=t(),r=tx({inst:{value:n,getSnapshot:t}}),s=r[0].inst,i=r[1];return rx(function(){s.value=n,s.getSnapshot=t,ao(s)&&i({inst:s})},[e,n,t]),nx(function(){return ao(s)&&i({inst:s}),e(function(){ao(s)&&i({inst:s})})},[e]),sx(n),n}function ao(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ex(e,n)}catch{return!0}}function ax(e,t){return t()}var ox=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ax:ix;Wf.useSyncExternalStore=Ur.useSyncExternalStore!==void 0?Ur.useSyncExternalStore:ox;Af.exports=Wf;var lx=Af.exports;const cx=(e,t)=>ir(t)?t:W0(t)&&ir(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,ux={t:cx,ready:!1},dx=()=>()=>{},ke=(e,t={})=>{var H,U,R;const{i18n:n}=t,{i18n:r,defaultNS:s}=E.useContext(q0)||{},i=n||r||Q0();i&&!i.reportNamespaces&&(i.reportNamespaces=new X0),i||Df(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const o=E.useMemo(()=>{var P;return{...K0(),...(P=i==null?void 0:i.options)==null?void 0:P.react,...t}},[i,t]),{useSuspense:l,keyPrefix:c}=o,u=e||s||((H=i==null?void 0:i.options)==null?void 0:H.defaultNS),d=ir(u)?[u]:u||["translation"],p=E.useMemo(()=>d,d);(R=(U=i==null?void 0:i.reportNamespaces)==null?void 0:U.addUsedNamespaces)==null||R.call(U,p);const g=E.useRef(0),_=E.useCallback(P=>{if(!i)return dx;const{bindI18n:$,bindI18nStore:W}=o,C=()=>{g.current+=1,P()};return $&&i.on($,C),W&&i.store.on(W,C),()=>{$&&$.split(" ").forEach(y=>i.off(y,C)),W&&W.split(" ").forEach(y=>i.store.off(y,C))}},[i,o]),m=E.useRef(),f=E.useCallback(()=>{if(!i)return ux;const P=!!(i.isInitialized||i.initializedStoreOnce)&&p.every(b=>A0(b,i,o)),$=t.lng||i.language,W=g.current,C=m.current;if(C&&C.ready===P&&C.lng===$&&C.keyPrefix===c&&C.revision===W)return C;const k={t:i.getFixedT($,o.nsMode==="fallback"?p:p[0],c),ready:P,lng:$,keyPrefix:c,revision:W};return m.current=k,k},[i,p,c,o,t.lng]),[L,w]=E.useState(0),{t:h,ready:x}=lx.useSyncExternalStore(_,f,f);E.useEffect(()=>{if(i&&!x&&!l){const P=()=>w($=>$+1);t.lng?Ku(i,t.lng,p,P):ul(i,p,P)}},[i,t.lng,p,x,l,L]);const v=i||{},S=E.useRef(null),z=E.useRef(),j=P=>{const $=Object.getOwnPropertyDescriptors(P);$.__original&&delete $.__original;const W=Object.create(Object.getPrototypeOf(P),$);if(!Object.prototype.hasOwnProperty.call(W,"__original"))try{Object.defineProperty(W,"__original",{value:P,writable:!1,enumerable:!1,configurable:!1})}catch{}return W},I=E.useMemo(()=>{const P=v,$=P==null?void 0:P.language;let W=P;P&&(S.current&&S.current.__original===P?z.current!==$?(W=j(P),S.current=W,z.current=$):W=S.current:(W=j(P),S.current=W,z.current=$));const C=[h,W,x];return C.t=h,C.i18n=W,C.ready=x,C},[h,v,x,v.resolvedLanguage,v.language,v.languages]);if(i&&l&&!x)throw new Promise(P=>{const $=()=>P();t.lng?Ku(i,t.lng,p,$):ul(i,p,$)});return I};function px({tabs:e,activeTabId:t,setActiveTabId:n,setTabs:r,setTabMenu:s,addNewTab:i,deleteTab:o,pullData:l,pushData:c,toggleSync:u,addWand:d,clipboard:p,activeTab:g,performAction:_,importWorkflow:m,exportWorkflow:f,setIsSettingsOpen:L,isConnected:w,setIsWarehouseOpen:h,syncGameSpells:x,exportModBundle:v}){const{t:S}=ke();return a.jsxs("header",{className:"flex items-center px-4 pt-2 bg-zinc-900/50 border-b border-white/5 space-x-0.5",children:[a.jsxs("div",{className:"flex items-center gap-2.5 px-3 py-2 mr-4",children:[a.jsx("button",{onClick:()=>h(z=>!z),className:"w-8 h-8 rounded bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg shadow-indigo-500/20 hover:scale-105 active:scale-95 transition-all group",title:S("nav.warehouse")+" (Ctrl+B)",children:a.jsx(Ts,{size:16,className:"text-white group-hover:rotate-12 transition-transform"})}),a.jsx("span",{className:"font-extrabold text-[13px] tracking-tight",children:"TWWE"})]}),a.jsxs("div",{className:"flex items-center gap-0.5 max-w-[70vw] overflow-x-auto no-scrollbar",children:[e.map(z=>a.jsx("div",{className:"group relative",children:a.jsxs("button",{onClick:()=>n(z.id),onDoubleClick:()=>{const j=prompt(":",z.name);j&&r(I=>I.map(H=>H.id===z.id?{...H,name:j}:H))},onContextMenu:j=>{j.preventDefault(),j.stopPropagation(),s({x:j.clientX,y:j.clientY,tabId:z.id})},className:`
                relative px-5 py-2.5 text-[10px] font-black tracking-wider uppercase transition-all flex items-center gap-2
                ${t===z.id?"text-white":"text-zinc-500 hover:text-zinc-300"}
              `,children:[z.isRealtime?a.jsx(ln,{size:12,className:w?"text-green-500":"text-zinc-600"}):a.jsx(mr,{size:12}),z.name,!z.isRealtime&&e.length>1&&a.jsx(un,{size:10,className:"opacity-0 group-hover:opacity-100 hover:text-red-400 transition-opacity ml-1",onClick:j=>o(z.id,j)}),t===z.id&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[2px] bg-indigo-500"})]})},z.id)),a.jsx("button",{onClick:i,className:"p-2 text-zinc-600 hover:text-zinc-300 transition-colors",title:S("tabs.new_workflow"),children:a.jsx(Wr,{size:16})})]}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"flex items-center gap-1.5 pr-4 pb-1",children:[a.jsxs("button",{onClick:()=>l(!0),onContextMenu:z=>{z.preventDefault(),c()},title:":  / : ",className:`
            neo-button text-[10px] w-32 justify-between px-3
            ${g.isRealtime?"bg-green-500/10 text-green-400 border border-green-500/20 hover:bg-green-500/20":"bg-zinc-800 text-zinc-400 border border-white/5 hover:bg-zinc-700"}
          `,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[g.isRealtime?a.jsx(ln,{size:14,className:"animate-pulse"}):a.jsx(Gs,{size:14}),a.jsxs("div",{className:"flex flex-col items-start leading-none",children:[a.jsx("span",{className:"text-[8px] opacity-70 mb-0.5",children:g.isRealtime?S("tabs.realtime"):S("tabs.manual")}),a.jsx("span",{className:"font-black",children:g.isRealtime?"ON":"OFF"})]})]}),g.isRealtime?a.jsx(w0,{size:10,className:"opacity-50"}):a.jsx(f0,{size:10,className:"opacity-50"})]}),a.jsx("div",{className:"h-4 w-[1px] bg-white/10 mx-2"}),a.jsxs("button",{onClick:d,className:"neo-button bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20",children:[a.jsx(Wr,{size:14})," ",S("nav.new_wand")]}),a.jsxs("label",{className:"neo-button bg-white/5 hover:bg-white/10 cursor-pointer text-[10px]",children:[a.jsx(Li,{size:14})," ",S("nav.import"),a.jsx("input",{type:"file",className:"hidden",onChange:m})]}),a.jsxs("button",{onClick:()=>f(),className:"neo-button bg-white/5 hover:bg-white/10 text-[10px]",children:[a.jsx(qt,{size:14})," ",S("nav.export")]}),a.jsx("button",{onClick:()=>L(!0),className:"p-2 text-zinc-500 hover:text-white transition-colors",children:a.jsx(Mf,{size:18})}),w&&a.jsx("button",{onClick:x,className:"p-2 text-indigo-400 hover:text-indigo-300 transition-colors",title:"",children:a.jsx(a0,{size:18})}),w&&v&&a.jsx("button",{onClick:v,className:"p-2 text-amber-400 hover:text-amber-300 transition-colors",title:"/ Mod ",children:a.jsx(Of,{size:18})})]})]})}function fx({isConnected:e,activeTab:t,tabsCount:n,notification:r}){return a.jsxs(a.Fragment,{children:[a.jsxs("footer",{className:"px-3 py-1.5 bg-zinc-900 border-t border-white/10 flex justify-between items-center text-[9px] font-bold text-zinc-600 uppercase tracking-tighter",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${e?"bg-green-500 shadow-[0_0_8px_#22c55e]":"bg-red-500 animate-pulse"}`}),e?"Sync: Connected":"Sync: Offline"]}),a.jsx("div",{className:"w-px h-3 bg-white/10"}),a.jsxs("span",{children:["Active: ",t.name]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("span",{children:["Tabs: ",n]}),a.jsx("span",{children:"TheWebWandEngine  Professional Refactored v0.4.0"})]})]}),r&&a.jsx("div",{className:"fixed bottom-12 right-6 z-[500] animate-in slide-in-from-bottom-4 fade-in duration-300",children:a.jsxs("div",{className:`px-4 py-3 rounded-lg shadow-2xl border flex items-center gap-3 ${r.type==="success"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-400":r.type==="error"?"bg-red-500/10 border-red-500/20 text-red-400":"bg-indigo-500/10 border-indigo-500/20 text-indigo-400"}`,children:[r.type==="success"?a.jsx(Oi,{size:16}):a.jsx(Pf,{size:16}),a.jsx("span",{className:"text-xs font-black uppercase tracking-wider",children:r.msg})]})})]})}function hx(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),s=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(s),t&&(r.href=t),s.href=e,s.href}const mx=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function $n(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let dr=null;function Uf(e={}){return dr||(e.includeStyleProperties?(dr=e.includeStyleProperties,dr):(dr=$n(window.getComputedStyle(document.documentElement)),dr))}function oa(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function gx(e){const t=oa(e,"border-left-width"),n=oa(e,"border-right-width");return e.clientWidth+t+n}function xx(e){const t=oa(e,"border-top-width"),n=oa(e,"border-bottom-width");return e.clientHeight+t+n}function Hf(e,t={}){const n=t.width||gx(e),r=t.height||xx(e);return{width:n,height:r}}function yx(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const _t=16384;function wx(e){(e.width>_t||e.height>_t)&&(e.width>_t&&e.height>_t?e.width>e.height?(e.height*=_t/e.width,e.width=_t):(e.width*=_t/e.height,e.height=_t):e.width>_t?(e.height*=_t/e.width,e.width=_t):(e.width*=_t/e.height,e.height=_t))}function la(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function vx(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function _x(e,t,n){const r="http://www.w3.org/2000/svg",s=document.createElementNS(r,"svg"),i=document.createElementNS(r,"foreignObject");return s.setAttribute("width",`${t}`),s.setAttribute("height",`${n}`),s.setAttribute("viewBox",`0 0 ${t} ${n}`),i.setAttribute("width","100%"),i.setAttribute("height","100%"),i.setAttribute("x","0"),i.setAttribute("y","0"),i.setAttribute("externalResourcesRequired","true"),s.appendChild(i),i.appendChild(e),vx(s)}const yt=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||yt(n,t)};function bx(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function kx(e,t){return Uf(t).map(n=>{const r=e.getPropertyValue(n),s=e.getPropertyPriority(n);return`${n}: ${r}${s?" !important":""};`}).join(" ")}function jx(e,t,n,r){const s=`.${e}:${t}`,i=n.cssText?bx(n):kx(n,r);return document.createTextNode(`${s}{${i}}`)}function Ju(e,t,n,r){const s=window.getComputedStyle(e,n),i=s.getPropertyValue("content");if(i===""||i==="none")return;const o=mx();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(jx(o,n,s,r)),t.appendChild(l)}function Sx(e,t,n){Ju(e,t,":before",n),Ju(e,t,":after",n)}const Qu="application/font-woff",Yu="image/jpeg",Nx={woff:Qu,woff2:Qu,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Yu,jpeg:Yu,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Cx(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function hc(e){const t=Cx(e).toLowerCase();return Nx[t]||""}function zx(e){return e.split(/,/)[1]}function pl(e){return e.search(/^(data:)/)!==-1}function Vf(e,t){return`data:${t};base64,${e}`}async function Bf(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const s=await r.blob();return new Promise((i,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{i(n({res:r,result:l.result}))}catch(c){o(c)}},l.readAsDataURL(s)})}const oo={};function Ex(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function mc(e,t,n){const r=Ex(e,t,n.includeQueryParams);if(oo[r]!=null)return oo[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let s;try{const i=await Bf(e,n.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),zx(l)));s=Vf(i,t)}catch(i){s=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;i&&(o=typeof i=="string"?i:i.message),o&&console.warn(o)}return oo[r]=s,s}async function Lx(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):la(t)}async function Px(e,t){if(e.currentSrc){const i=document.createElement("canvas"),o=i.getContext("2d");i.width=e.clientWidth,i.height=e.clientHeight,o==null||o.drawImage(e,0,0,i.width,i.height);const l=i.toDataURL();return la(l)}const n=e.poster,r=hc(n),s=await mc(n,r,t);return la(s)}async function Ox(e,t){var n;try{if(!((n=e==null?void 0:e.contentDocument)===null||n===void 0)&&n.body)return await Na(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Mx(e,t){return yt(e,HTMLCanvasElement)?Lx(e):yt(e,HTMLVideoElement)?Px(e,t):yt(e,HTMLIFrameElement)?Ox(e,t):e.cloneNode(Gf(e))}const Ix=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Gf=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Rx(e,t,n){var r,s;if(Gf(t))return t;let i=[];return Ix(e)&&e.assignedNodes?i=$n(e.assignedNodes()):yt(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?i=$n(e.contentDocument.body.childNodes):i=$n(((s=e.shadowRoot)!==null&&s!==void 0?s:e).childNodes),i.length===0||yt(e,HTMLVideoElement)||await i.reduce((o,l)=>o.then(()=>Na(l,n)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function $x(e,t,n){const r=t.style;if(!r)return;const s=window.getComputedStyle(e);s.cssText?(r.cssText=s.cssText,r.transformOrigin=s.transformOrigin):Uf(n).forEach(i=>{let o=s.getPropertyValue(i);i==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),yt(e,HTMLIFrameElement)&&i==="display"&&o==="inline"&&(o="block"),i==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(i,o,s.getPropertyPriority(i))})}function Dx(e,t){yt(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),yt(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Tx(e,t){if(yt(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(s=>e.value===s.getAttribute("value"));r&&r.setAttribute("selected","")}}function Fx(e,t,n){return yt(t,Element)&&($x(e,t,n),Sx(e,t,n),Dx(e,t),Tx(e,t)),t}async function Ax(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let i=0;i<n.length;i++){const l=n[i].getAttribute("xlink:href");if(l){const c=e.querySelector(l),u=document.querySelector(l);!c&&u&&!r[l]&&(r[l]=await Na(u,t,!0))}}const s=Object.values(r);if(s.length){const i="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg");o.setAttribute("xmlns",i),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(i,"defs");o.appendChild(l);for(let c=0;c<s.length;c++)l.appendChild(s[c]);e.appendChild(o)}return e}async function Na(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>Mx(r,t)).then(r=>Rx(e,r,t)).then(r=>Fx(e,r,t)).then(r=>Ax(r,t))}const Kf=/url\((['"]?)([^'"]+?)\1\)/g,Wx=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Ux=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Hx(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Vx(e){const t=[];return e.replace(Kf,(n,r,s)=>(t.push(s),n)),t.filter(n=>!pl(n))}async function Bx(e,t,n,r,s){try{const i=n?hx(t,n):t,o=hc(t);let l;if(s){const c=await s(i);l=Vf(c,o)}else l=await mc(i,o,r);return e.replace(Hx(t),`$1${l}$3`)}catch{}return e}function Gx(e,{preferredFontFormat:t}){return t?e.replace(Ux,n=>{for(;;){const[r,,s]=Wx.exec(n)||[];if(!s)return"";if(s===t)return`src: ${r};`}}):e}function Jf(e){return e.search(Kf)!==-1}async function Qf(e,t,n){if(!Jf(e))return e;const r=Gx(e,n);return Vx(r).reduce((i,o)=>i.then(l=>Bx(l,o,t,n)),Promise.resolve(r))}async function pr(e,t,n){var r;const s=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(s){const i=await Qf(s,null,n);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function Kx(e,t){await pr("background",e,t)||await pr("background-image",e,t),await pr("mask",e,t)||await pr("-webkit-mask",e,t)||await pr("mask-image",e,t)||await pr("-webkit-mask-image",e,t)}async function Jx(e,t){const n=yt(e,HTMLImageElement);if(!(n&&!pl(e.src))&&!(yt(e,SVGImageElement)&&!pl(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,s=await mc(r,hc(r),t);await new Promise((i,o)=>{e.onload=i,e.onerror=t.onImageErrorHandler?(...c)=>{try{i(t.onImageErrorHandler(...c))}catch(u){o(u)}}:o;const l=e;l.decode&&(l.decode=i),l.loading==="lazy"&&(l.loading="eager"),n?(e.srcset="",e.src=s):e.href.baseVal=s})}async function Qx(e,t){const r=$n(e.childNodes).map(s=>Yf(s,t));await Promise.all(r).then(()=>e)}async function Yf(e,t){yt(e,Element)&&(await Kx(e,t),await Jx(e,t),await Qx(e,t))}function Yx(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(s=>{n[s]=r[s]}),e}const qu={};async function Xu(e){let t=qu[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},qu[e]=t,t}async function Zu(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Bf(l,t.fetchRequestInit,({result:c})=>(n=n.replace(o,`url(${c})`),[o,c]))});return Promise.all(i).then(()=>n)}function ed(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=s.exec(r);if(c===null)break;t.push(c[0])}r=r.replace(s,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let c=i.exec(r);if(c===null){if(c=l.exec(r),c===null)break;i.lastIndex=l.lastIndex}else l.lastIndex=i.lastIndex;t.push(c[0])}return t}async function qx(e,t){const n=[],r=[];return e.forEach(s=>{if("cssRules"in s)try{$n(s.cssRules||[]).forEach((i,o)=>{if(i.type===CSSRule.IMPORT_RULE){let l=o+1;const c=i.href,u=Xu(c).then(d=>Zu(d,t)).then(d=>ed(d).forEach(p=>{try{s.insertRule(p,p.startsWith("@import")?l+=1:s.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:p,error:g})}})).catch(d=>{console.error("Error loading remote css",d.toString())});r.push(u)}})}catch(i){const o=e.find(l=>l.href==null)||document.styleSheets[0];s.href!=null&&r.push(Xu(s.href).then(l=>Zu(l,t)).then(l=>ed(l).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",i)}}),Promise.all(r).then(()=>(e.forEach(s=>{if("cssRules"in s)try{$n(s.cssRules||[]).forEach(i=>{n.push(i)})}catch(i){console.error(`Error while reading CSS rules from ${s.href}`,i)}}),n))}function Xx(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Jf(t.style.getPropertyValue("src")))}async function Zx(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=$n(e.ownerDocument.styleSheets),r=await qx(n,t);return Xx(r)}function qf(e){return e.trim().replace(/["']/g,"")}function ey(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(i=>{t.add(qf(i))}),Array.from(r.children).forEach(i=>{i instanceof HTMLElement&&n(i)})}return n(e),t}async function ty(e,t){const n=await Zx(e,t),r=ey(e);return(await Promise.all(n.filter(i=>r.has(qf(i.style.fontFamily))).map(i=>{const o=i.parentStyleSheet?i.parentStyleSheet.href:null;return Qf(i.cssText,o,t)}))).join(`
`)}async function ny(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await ty(e,t);if(n){const r=document.createElement("style"),s=document.createTextNode(n);r.appendChild(s),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function ry(e,t={}){const{width:n,height:r}=Hf(e,t),s=await Na(e,t,!0);return await ny(s,t),await Yf(s,t),Yx(s,t),await _x(s,n,r)}async function sy(e,t={}){const{width:n,height:r}=Hf(e,t),s=await ry(e,t),i=await la(s),o=document.createElement("canvas"),l=o.getContext("2d"),c=t.pixelRatio||yx(),u=t.canvasWidth||n,d=t.canvasHeight||r;return o.width=u*c,o.height=d*c,t.skipAutoScale||wx(o),o.style.width=`${u}`,o.style.height=`${d}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(i,0,0,o.width,o.height),o}async function iy(e,t={}){return(await sy(e,t)).toDataURL()}function Bn({label:e,value:t,onChange:n,colorClass:r,secondaryValue:s}){const[i,o]=Ve.useState((t??"").toString()),[l,c]=Ve.useState(!1);Ve.useEffect(()=>{const d=(t??"").toString();d!==i&&!l&&o(d)},[t,l,i]);const u=d=>{let p=d.target.value;if(p=p.replace(/[^0-9.-]/g,""),p.indexOf("-")>0&&(p=p.replace("-","")),(p.match(/-/g)||[]).length>1&&(p="-"+p.replace(/-/g,"")),o(p),p===""||p==="-"||p==="."||p==="-.")return;const _=parseFloat(p);isNaN(_)||n(_)};return a.jsxs("div",{className:"flex flex-col group/prop",children:[a.jsx("label",{className:"text-[10px] font-black text-zinc-500 mb-1 uppercase tracking-wider transition-colors group-hover/prop:text-zinc-400",children:e}),a.jsxs("div",{className:"flex items-baseline gap-2 relative",children:[a.jsx("input",{type:"text",value:i,onChange:u,onFocus:()=>c(!0),onBlur:()=>{c(!1),o((t??"").toString())},className:`bg-transparent font-mono text-xl font-bold w-24 focus:outline-none transition-opacity ${r||"text-white"} ${l?"opacity-100":"opacity-0"}`}),!l&&a.jsx("div",{className:`absolute inset-0 flex items-baseline gap-2 pointer-events-none font-mono text-xl font-bold ${r||"text-white"}`,children:t}),s&&a.jsx("span",{className:"text-xs font-mono text-zinc-600 italic whitespace-nowrap",children:s})]}),a.jsx("div",{className:"h-0.5 w-full bg-white/5 group-hover/prop:bg-indigo-500/30 transition-colors mt-1"})]})}let Ot=null,ay=0;function Ge(e,t){return e&&e.startsWith("data:")?e:`./static_data/icons/${e}`}function gc(e,t){if(!e)return null;let n=e.item_sprite||e.sprite;return n?(n.endsWith(".xml")&&(n=n.replace(/\.xml$/,".png")),Ge(n)):null}const Xf=[{sprite_file:"data/items_gfx/flute.xml",image_file:"data/items_gfx/flute.png",wiki_file:"Huilu (Wand).png"},{sprite_file:"data/items_gfx/kantele.xml",image_file:"data/items_gfx/kantele.png",wiki_file:"Wand kantele.png"},{sprite_file:"data/items_gfx/bomb_wand.xml",image_file:"data/items_gfx/bomb_wand.png",wiki_file:"Wand bomb wand.png"},{sprite_file:"data/items_gfx/handgun.xml",image_file:"data/items_gfx/handgun.png",wiki_file:"Wand handgun.png"},{sprite_file:"data/items_gfx/wands/custom/scepter_01.xml",image_file:"data/items_gfx/wands/custom/scepter_01.png",wiki_file:"Wand scepter 01.png"},{sprite_file:"data/entities/items/wands/experimental/experimental_wand_1_sprite.xml",image_file:"data/entities/items/wands/experimental/experimental_wand_1.png",wiki_file:"Wand experimental wand 1.png"},{sprite_file:"data/entities/items/wands/experimental/experimental_wand_2_sprite.xml",image_file:"data/entities/items/wands/experimental/experimental_wand_2.png",wiki_file:"Wand experimental wand 2.png"},{sprite_file:"data/items_gfx/wands/custom/actual_wand.xml",image_file:"data/items_gfx/wands/custom/actual_wand_honest.png",wiki_file:"Actual wand honest.png"},{sprite_file:"data/items_gfx/wands/custom/good_01.xml",image_file:"data/items_gfx/wands/custom/good_01.png",wiki_file:"Wand wand good 1.png"},{sprite_file:"data/items_gfx/wands/custom/good_02.xml",image_file:"data/items_gfx/wands/custom/good_02.png",wiki_file:"Wand wand good 2.png"},{sprite_file:"data/items_gfx/wands/custom/good_03.xml",image_file:"data/items_gfx/wands/custom/good_03.png",wiki_file:"Wand wand good 3.png"},{image_file:"data/items_gfx/wands/custom/skull_01.png",wiki_file:"Wand skull 01.png"},{image_file:"data/items_gfx/wands/custom/wood_01.png",wiki_file:"Wand wood 01.png"},{image_file:"data/items_gfx/wands/custom/plant_01.png",wiki_file:"Wand plant 01.png"},{image_file:"data/items_gfx/wands/custom/plant_02.png",wiki_file:"Wand plant 02.png"},{image_file:"data/items_gfx/wands/custom/vasta.png",wiki_file:"Wand vasta.png"},{image_file:"data/items_gfx/wands/custom/vihta.png",wiki_file:"Wand vihta.png"}];function fl(e){return e&&(e=e.charAt(0).toUpperCase()+e.slice(1),e=e.replace(/_/g," "),e=e.replace(/ {2,}/g," "),e)}function Zf(e){if(!e)return"";const t=e.sprite||"",n=e.item_sprite||"";for(const i of Xf)if(i.sprite_file&&i.sprite_file===t||i.image_file===n||i.image_file===t)return i.wiki_file;const r=n||t;if(!r)return"";const s=r.split("/").pop()||"";return s?fl(s):""}function td(e){if(!e)return null;const t=fl(e.trim());for(const s of Xf)if(fl(s.wiki_file)===t)return{sprite:s.sprite_file||s.image_file,item_sprite:s.image_file};const r=`data/items_gfx/wands/${e.trim().replace(/ /g,"_").replace(/^[A-Z]/,s=>s.toLowerCase())}`;return e.startsWith("data/")||e.startsWith("mods/")?{sprite:e,item_sprite:e.replace(/\.xml$/,".png")}:{item_sprite:r}}async function oy(e,t,n,r="default",s="1",i=!1){const o=++ay;return console.log(`[Evaluator] Using WASM Engine (${o})`),new Promise((l,c)=>{try{zf().then(d=>{const p=(d==null?void 0:d.appends)||{},g=(d==null?void 0:d.active_mods)||[];Ot==null||Ot.postMessage({type:"EVALUATE",data:e,options:t,id:o,mod_appends:p,active_mods:g,vfs:(d==null?void 0:d.vfs)||null})}),Ot||(Ot=new Worker(new URL(""+new URL("evaluator.worker-c95297e9.js",import.meta.url).href,self.location),{type:"module"}));const u=d=>{d.data.id===o&&(d.data.type==="RESULT"?(Ot==null||Ot.removeEventListener("message",u),l({data:d.data.data,id:o})):d.data.type==="ERROR"&&(Ot==null||Ot.removeEventListener("message",u),c(d.data.error)))};Ot.addEventListener("message",u)}catch(u){c(u)}})}function ly({slot:e,data:t,spellDb:n,selection:r,hoveredSlot:s,dragSource:i,updateWand:o,handleSlotMouseDown:l,handleSlotMouseUp:c,handleSlotMouseEnter:u,handleSlotMouseMove:d,handleSlotMouseLeave:p,openPicker:g,setSelection:_,setSettings:m,requestEvaluation:f,onMoveSelection:L,settings:w,isConnected:h}){const{t:x,i18n:v}=ke(),[S,z]=Ve.useState(!1),j=Ve.useRef(null),I=Ve.useRef(null),H=y=>{if(!n[y])return;const N=(w.wikiLanguage||"en")==="zh"?"https://noita.wiki.gg/zh/wiki/":"https://noita.wiki.gg/wiki/";window.open(`${N}${y.toUpperCase()}`,"_blank")},U=()=>{if(!I.current)return 10;const y=I.current.querySelector(".grid");return y&&getComputedStyle(y).gridTemplateColumns.split(" ").filter(b=>b!=="").length||10};Ve.useEffect(()=>{const y=k=>{var T,D;if(k.target instanceof HTMLInputElement||k.target instanceof HTMLTextAreaElement||!r||r.wandSlot!==e||r.indices.length!==1)return;const b=r.indices[0],N=t.deck_capacity,M=U();if(k.key==="Tab"){k.preventDefault();const F=k.shiftKey?b<=1?N:b-1:b>=N?1:b+1;_({...r,indices:[F],startIdx:F});return}if(k.key==="ArrowRight"){k.preventDefault();const F=b>=N?1:b+1;_({...r,indices:[F],startIdx:F})}else if(k.key==="ArrowLeft"){k.preventDefault();const F=b<=1?N:b-1;_({...r,indices:[F],startIdx:F})}else if(k.key==="ArrowDown"){k.preventDefault();const F=Math.min(N,b+M);F!==b&&_({...r,indices:[F],startIdx:F})}else if(k.key==="ArrowUp"){k.preventDefault();const F=Math.max(1,b-M);F!==b&&_({...r,indices:[F],startIdx:F})}if(k.key.length===1&&!k.ctrlKey&&!k.altKey&&!k.metaKey&&k.key!==" "){k.preventDefault();const F=(T=I.current)==null?void 0:T.querySelector(`[data-slot-idx="${b}"]`),G=(F==null?void 0:F.getBoundingClientRect())||{left:0,bottom:0};g(e,b.toString(),{clientX:0,clientY:0,x:G.left,y:G.bottom+8,initialSearch:k.key})}if(k.key==="Enter"||k.key===" "){k.preventDefault();const F=(D=I.current)==null?void 0:D.querySelector(`[data-slot-idx="${b}"]`),G=(F==null?void 0:F.getBoundingClientRect())||{left:0,bottom:0};g(e,b.toString(),{clientX:0,clientY:0,x:G.left,y:G.bottom+8,initialSearch:""})}if((k.key==="Delete"||k.key==="Backspace")&&t.spells[b.toString()]){const G={...t.spells},Y={...t.spell_uses||{}};delete G[b.toString()],delete Y[b.toString()],o(e,{spells:G,spell_uses:Y},x("app.notification.delete_spell"))}};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[r,e,t.deck_capacity,t.spells,t.spell_uses]);const R=Ve.useMemo(()=>{const y={};let k=1;for(let b=1;b<=t.deck_capacity;b++)t.spells&&t.spells[b.toString()]&&(y[b]=k++);return y},[t.spells,t.deck_capacity]);Ve.useEffect(()=>{const y=b=>{b.key==="Alt"&&z(!0)},k=b=>{b.key==="Alt"&&z(!1)};return window.addEventListener("keydown",y),window.addEventListener("keyup",k),window.addEventListener("blur",()=>z(!1)),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",k)}},[]),Ve.useEffect(()=>{const y=k=>{var M;if(k.target instanceof HTMLInputElement||k.target instanceof HTMLTextAreaElement||!((r==null?void 0:r.wandSlot)===e)||r.indices.length!==1)return;const N=r.indices[0];if(t.deck_capacity,Math.floor((((M=I.current)==null?void 0:M.offsetWidth)||600)/(56+(w.editorSpellGap||0))),k.key==="Tab"){k.preventDefault(),L==null||L(k.shiftKey?"prev":"next");return}if(k.key==="ArrowRight"){L==null||L("right");return}if(k.key==="ArrowLeft"){L==null||L("left");return}if(k.key==="ArrowDown"){L==null||L("down");return}if(k.key==="ArrowUp"){L==null||L("up");return}if(k.key.length===1&&!k.ctrlKey&&!k.altKey&&!k.metaKey&&(k.preventDefault(),g(e,N.toString(),{clientX:0,clientY:0,initialSearch:k.key===" "?"":k.key})),k.key==="Enter"&&(k.preventDefault(),g(e,N.toString(),{clientX:0,clientY:0})),k.key==="Delete"||k.key==="Backspace"){const T={...t.spells||{}},D={...t.spell_uses||{}};delete T[N],delete D[N],o(e,{spells:T,spell_uses:D})}};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[r,e,t.deck_capacity,w.editorSpellGap,L,g]);const P=(y,k,b)=>{const N=w.showStatsInFrames?k:parseFloat((k/60).toFixed(3)),M=w.showStatsInFrames?(k/60).toFixed(2)+"s":k+"f";return a.jsx(Bn,{label:y,value:N,secondaryValue:M,colorClass:"text-amber-300",onChange:T=>o(e,{[b]:w.showStatsInFrames?Math.round(T):Math.round(T*60)})})},$=()=>{const y=Array.from({length:t.deck_capacity}).map((N,M)=>t.spells[(M+1).toString()]||""),k=Zf(t.appearance);let b=["{{Wand2"];return b.push("| wandCard     = Yes"),k&&b.push(`| wandPic      = ${k}`),t.shuffle_deck_when_empty&&b.push("| shuffle      = Yes"),t.actions_per_round!==1&&b.push(`| spellsCast   = ${t.actions_per_round}`),b.push(`| castDelay    = ${(t.fire_rate_wait/60).toFixed(2)}`),b.push(`| rechargeTime = ${(t.reload_time/60).toFixed(2)}`),b.push(`| manaMax      = ${t.mana_max.toFixed(2)}`),b.push(`| manaCharge   = ${t.mana_charge_speed.toFixed(2)}`),b.push(`| capacity     = ${t.deck_capacity}`),b.push(`| spread       = ${t.spread_degrees}`),b.push(`| speed        = ${t.speed_multiplier.toFixed(2)}`),t.always_cast&&t.always_cast.length>0&&b.push(`| alwaysCasts  = ${t.always_cast.join(",")}`),b.push(`| spells       = ${y.join(",")}`),b.push("}}"),b.join(`
`)},W=async(y,k)=>{const b=await y.arrayBuffer(),N=new DataView(b);if(N.getUint32(0)!==2303741511||N.getUint32(4)!==218765834)return y;const M=[];let T=8;for(;T<b.byteLength;){const ce=N.getUint32(T),ve=String.fromCharCode(...new Uint8Array(b.slice(T+4,T+8))),se=new Uint8Array(b.slice(T+8,T+8+ce));M.push({type:ve,data:se}),T+=12+ce}const D="Wand2Data",F=new TextEncoder,Y={type:"tEXt",data:F.encode(D+"\0"+k)},K=M.findIndex(ce=>ce.type==="IDAT");K!==-1?M.splice(K,0,Y):M.splice(M.length-1,0,Y);let Z=8;M.forEach(ce=>Z+=12+ce.data.length);const ne=new ArrayBuffer(Z),he=new DataView(ne);he.setUint32(0,2303741511),he.setUint32(4,218765834);let pe=8;const ae=new Int32Array(256);for(let ce=0;ce<256;ce++){let ve=ce;for(let se=0;se<8;se++)ve=ve&1?3988292384^ve>>>1:ve>>>1;ae[ce]=ve}const oe=(ce,ve)=>{let se=-1;const Re=F.encode(ce);for(let Se=0;Se<4;Se++)se=ae[(se^Re[Se])&255]^se>>>8;for(let Se=0;Se<ve.length;Se++)se=ae[(se^ve[Se])&255]^se>>>8;return se^-1};return M.forEach(ce=>{he.setUint32(pe,ce.data.length);const ve=F.encode(ce.type);new Uint8Array(ne,pe+4,4).set(ve),new Uint8Array(ne,pe+8,ce.data.length).set(ce.data);const se=oe(ce.type,ce.data);he.setUint32(pe+8+ce.data.length,se),pe+=12+ce.data.length}),new Blob([ne],{type:"image/png"})},C=async y=>{var we,ye,$e,Ke;const k=y==="only_spells"?I:j;if(!k.current)return;const b=y==="only_spells"&&w.pureSpellsExport,N=k.current,M={width:N.style.width,display:N.style.display,maxWidth:N.style.maxWidth,minWidth:N.style.minWidth,backgroundColor:N.style.backgroundColor,boxShadow:N.style.boxShadow},T=Array.from(N.querySelectorAll(".grid")),D=Array.from(N.querySelectorAll(".flex-wrap")),F=N.querySelectorAll(".overflow-y-auto, .custom-scrollbar"),G=T.map(le=>{var ee;return{el:le,gridTemplateColumns:le.style.gridTemplateColumns,computedCols:getComputedStyle(le).gridTemplateColumns.split(" ").filter(We=>We!=="").length,width:le.style.width,parentWidth:(ee=le.parentElement)==null?void 0:ee.style.width}}),Y=D.map(le=>({el:le,width:le.style.width})),K=Array.from(F).map(le=>({el:le,width:le.style.width}));N.style.width="fit-content",N.style.display="inline-block",N.style.maxWidth="none",N.style.minWidth="0",b&&(N.style.backgroundColor="transparent",N.style.boxShadow="none");const Z=N.querySelector(".attributes-container"),ne=Array.from(N.querySelectorAll(".group\\/cell, .group\\/ac"));let he=-1;if(b){for(let le=0;le<ne.length;le++)if(ne[le].querySelector("img")){he=le;break}}const pe=Array.from(F).map(le=>{const ee=le,We={el:ee,maxHeight:ee.style.maxHeight,overflow:ee.style.overflow,height:ee.style.height};return ee.style.maxHeight="none",ee.style.overflow="visible",ee.style.height="auto",ee.style.width="fit-content",We}),ae=[];if(b){ne.forEach((ee,We)=>{const Ue=ee,be=Ue.querySelector("div");if(!be)return;const Et=Ue.classList.contains("group/ac")?Ue:Ue.parentElement,Gr={el:Et,display:Et.style.display,bg:be.style.backgroundColor,border:be.style.borderColor,shadow:be.style.boxShadow};if(We<he||!Ue.querySelector("img"))Et&&(Et.style.display="none");else if(be.style.backgroundColor="transparent",be.style.borderColor="transparent",be.style.boxShadow="none",Ue.classList.contains("group/ac")){const st=Ue.querySelector("div");st&&(st.style.backgroundColor="transparent",st.style.borderColor="transparent",st.style.boxShadow="none")}ae.push(Gr)});const le=(ye=(we=k.current.querySelector(".text-amber-500"))==null?void 0:we.parentElement)==null?void 0:ye.parentElement;le&&(le.style.display="none")}const ce=56+(w.editorSpellGap||0);T.forEach((le,ee)=>{const We=G[ee],Ue=Array.from(le.children).filter(be=>be.style.display!=="none"&&!be.classList.contains("export-ignore"));if(Ue.length>0){const be=Math.min(Ue.length,We.computedCols||1);le.style.gridTemplateColumns=`repeat(${be}, ${ce}px)`,le.style.width="fit-content",le.parentElement&&(le.parentElement.style.width="fit-content")}}),D.forEach(le=>{le.style.width="fit-content"});const ve=N.getBoundingClientRect(),se=Math.ceil(ve.width),Re=Math.ceil(ve.height);let Se="";if(Z){const le=Z;Se=le.style.display,le.style.display="flex"}try{const le=await iy(N,{pixelRatio:3,width:se,height:Re,backgroundColor:b?"transparent":"#0c0c0e",cacheBust:!0,style:{borderRadius:"0",margin:"0",width:`${se}px`,height:`${Re}px`},filter:be=>!(be instanceof HTMLElement&&(be.classList.contains("export-ignore")||b&&(be.classList.contains("lucide-x")||be.innerText==="+"||be.classList.contains("absolute")&&!be.querySelector("img"))))});let ee=await(await fetch(le)).blob();w.embedMetadataInImage&&(ee=await W(ee,$()));const We=URL.createObjectURL(ee),Ue=document.createElement("a");Ue.download=`wand_${new Date().getTime()}.png`,Ue.href=We,Ue.click(),URL.revokeObjectURL(We)}catch(le){console.error("Failed to export image:",le)}finally{pe.forEach(ee=>{ee.el.style.maxHeight=ee.maxHeight,ee.el.style.overflow=ee.overflow,ee.el.style.height=ee.height,ee.el.style.width=""}),N&&(N.style.width=M.width,N.style.display=M.display,N.style.maxWidth=M.maxWidth,N.style.minWidth=M.minWidth,N.style.backgroundColor=M.backgroundColor,N.style.boxShadow=M.boxShadow),G.forEach(ee=>{ee.el.style.gridTemplateColumns=ee.gridTemplateColumns,ee.el.style.width=ee.width,ee.el.parentElement&&(ee.el.parentElement.style.width=ee.parentWidth||"")}),Y.forEach(ee=>{ee.el.style.width=ee.width}),K.forEach(ee=>{ee.el.style.width=ee.width}),Z&&(Z.style.display=Se),ae.forEach(ee=>{ee.el.style.display=ee.display;const We=ee.el.classList.contains("group/ac")?ee.el.querySelector("div"):ee.el.querySelector(".group\\/cell");We instanceof HTMLElement&&(We.style.backgroundColor=ee.bg,We.style.borderColor=ee.border,We.style.boxShadow=ee.shadow)});const le=(Ke=($e=k.current.querySelector(".text-amber-500"))==null?void 0:$e.parentElement)==null?void 0:Ke.parentElement;le&&(le.style.display="")}};return a.jsxs("div",{ref:j,className:"px-6 py-6 bg-[#0c0c0e] border-t border-white/5 space-y-8 select-none",children:[a.jsxs("div",{className:"flex items-start gap-8 attributes-container",children:[a.jsxs("div",{className:"flex flex-wrap items-center bg-zinc-900/50 border border-white/5 rounded-xl p-1 pr-6 shadow-2xl min-w-[600px] wand-attributes-box",onMouseUp:()=>c(e,-1e3),children:[a.jsx("div",{className:"px-6 py-2 border-r border-white/5 flex flex-col items-center justify-center gap-2 h-16 min-w-[80px]",children:(()=>{const y=gc(t.appearance);return y?a.jsx("div",{className:"relative group/wand-sprite",children:a.jsx("img",{src:y,className:"w-12 h-10 object-contain image-pixelated cursor-pointer hover:scale-110 transition-transform",alt:"Wand Sprite",onClick:()=>{var N,M;const k=((N=t.appearance)==null?void 0:N.item_sprite)||((M=t.appearance)==null?void 0:M.sprite)||"",b=prompt(x("editor.enter_sprite_path")||"Enter sprite path:",k);b!==null&&o(e,{appearance:{...t.appearance,sprite:b}})}})}):a.jsx("button",{onClick:()=>{const k=prompt(x("editor.enter_sprite_path")||"Enter sprite path:");k&&o(e,{appearance:{sprite:k}})},className:"p-2 bg-white/5 hover:bg-white/10 rounded-lg text-zinc-500 hover:text-zinc-300 transition-colors",children:a.jsx(al,{size:20})})})()}),a.jsx("div",{className:"px-6 py-2 border-r border-white/5 flex items-center h-16",children:a.jsxs("button",{onClick:()=>o(e,{shuffle_deck_when_empty:!t.shuffle_deck_when_empty}),className:`flex items-center gap-2 px-3 py-1.5 rounded border transition-all ${t.shuffle_deck_when_empty?"bg-red-500/10 border-red-500/30 text-red-400":"bg-emerald-500/10 border-emerald-500/30 text-emerald-400"}`,children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full animate-pulse ${t.shuffle_deck_when_empty?"bg-red-500":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:t.shuffle_deck_when_empty?x("editor.shuffle"):x("editor.no_shuffle")})]})}),a.jsxs("div",{className:"px-8 py-2 border-r border-white/5 flex gap-10",children:[a.jsx(Bn,{label:x("editor.mana_max"),value:t.mana_max,colorClass:"text-cyan-400",onChange:y=>o(e,{mana_max:y})}),a.jsx(Bn,{label:x("editor.recharge"),value:t.mana_charge_speed,colorClass:"text-cyan-400",onChange:y=>o(e,{mana_charge_speed:y})})]}),a.jsxs("div",{className:"px-8 py-2 border-r border-white/5 flex gap-10",children:[P(x("editor.cast_delay"),t.fire_rate_wait,"fire_rate_wait"),P(x("editor.recharge_time"),t.reload_time,"reload_time")]}),a.jsxs("div",{className:"px-8 py-2 flex gap-10",children:[a.jsx(Bn,{label:x("editor.capacity"),value:t.deck_capacity,onChange:y=>o(e,{deck_capacity:y})}),a.jsx(Bn,{label:x("editor.spread"),value:t.spread_degrees,colorClass:t.spread_degrees<=0?"text-emerald-400":"text-red-400",onChange:y=>o(e,{spread_degrees:y})}),a.jsx(Bn,{label:x("editor.spells_per_cast"),value:t.actions_per_round,onChange:y=>o(e,{actions_per_round:Math.max(1,Math.round(y))})}),a.jsx(Bn,{label:x("editor.speed"),value:t.speed_multiplier,colorClass:"text-indigo-400",onChange:y=>o(e,{speed_multiplier:y})})]})]}),a.jsxs("div",{className:"flex items-center gap-3 shrink-0 h-fit export-ignore",children:[a.jsxs("div",{className:"flex items-center bg-white/[0.02] border border-white/5 rounded-lg overflow-hidden",children:[a.jsxs("button",{onClick:()=>C("only_spells"),className:"flex items-center gap-2 px-3 py-2 hover:bg-white/5 text-zinc-400 border-r border-white/5 text-[10px] font-black uppercase tracking-widest transition-all",title:x("settings.export_only_spells"),children:[a.jsx(al,{size:14,className:"opacity-70"}),a.jsx("span",{className:"hidden sm:inline",children:x("settings.export_only_spells")})]}),a.jsxs("button",{onClick:()=>C("full"),className:"flex items-center gap-2 px-3 py-2 hover:bg-white/5 text-zinc-400 text-[10px] font-black uppercase tracking-widest transition-all",title:x("settings.export_wand_and_spells"),children:[a.jsx(n0,{size:14,className:"opacity-70"}),a.jsx("span",{className:"hidden sm:inline",children:x("settings.export_wand_and_spells")})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsxs("button",{onClick:()=>f(t,!0),className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-500/10 hover:bg-indigo-500/20 text-indigo-400 border border-indigo-500/30 rounded-lg text-[10px] font-black uppercase tracking-widest transition-all",title:x("evaluator.force_analyze_desc"),children:[a.jsx(Gs,{size:12,className:"opacity-70"}),x("evaluator.force_analyze")]}),a.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-white/[0.02] border border-white/5 rounded-lg overflow-hidden focus-within:border-indigo-500/50 transition-colors",title:x("evaluator.evaluation_seed_desc"),children:[a.jsx("span",{className:"text-[9px] text-zinc-500 font-black uppercase shrink-0",children:"Seed"}),a.jsx("input",{type:"text",value:w.evaluationSeed||"",onChange:y=>{const k=y.target.value;m(b=>({...b,evaluationSeed:k}))},className:"bg-transparent border-none outline-none text-[10px] text-zinc-300 w-16 font-mono",placeholder:"Auto"})]})]})]})]}),a.jsxs("div",{ref:I,className:"space-y-8",children:[Array.isArray(t.always_cast)&&t.always_cast.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-amber-500/30 to-transparent"}),a.jsx("span",{className:"text-[10px] font-black text-amber-500 uppercase tracking-[0.3em]",children:x("editor.always_cast_slots")}),a.jsx("div",{className:"h-px flex-1 bg-gradient-to-l from-amber-500/30 to-transparent"})]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:t.always_cast.map((y,k)=>{const b=n[y],N=b?v.language.startsWith("en")&&b.en_name?b.en_name:b.name:y,M=-(k+1),T=(s==null?void 0:s.wandSlot)===e&&(s==null?void 0:s.idx)===M;return a.jsx("div",{className:"group/ac relative",onMouseDown:D=>{if(D.ctrlKey&&D.button===1&&y){D.preventDefault(),D.stopPropagation(),H(y);return}l(e,M,D.button===2)},onMouseUp:()=>c(e,M),onMouseMove:D=>d(D,e,M),onMouseLeave:p,onClick:D=>{if(D.altKey){const F=[...t.always_cast];F.splice(k,1),o(e,{always_cast:F},"");return}g(e,`ac-${k}`,D)},children:a.jsxs("div",{className:`
                    w-12 h-12 rounded-lg border flex items-center justify-center relative shadow-[0_0_15px_rgba(245,158,11,0.1)] transition-transform hover:scale-105
                    ${T?"border-indigo-500 bg-indigo-500/20":"border-amber-500/30 bg-amber-500/5"}
                  `,children:[T&&a.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-indigo-400 z-50 animate-pulse rounded-full",style:{[s.isRightHalf?"right":"left"]:"-6px"}}),b?a.jsx("img",{src:Ge(b.icon),className:"w-10 h-10 image-pixelated",alt:"",title:`Always Cast: ${N}
ID: ${y}
(Alt+Click to remove)`}):a.jsx("span",{className:"text-amber-500/20 text-xs",children:"?"}),a.jsx("button",{onClick:D=>{D.stopPropagation();const F=[...t.always_cast];F.splice(k,1),o(e,{always_cast:F})},className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-red-500 text-white flex items-center justify-center opacity-0 group-hover/ac:opacity-100 transition-opacity z-10 shadow-lg",children:a.jsx(un,{size:12})})]})},k)})})]}),a.jsx("div",{className:"max-h-[600px] overflow-y-auto custom-scrollbar p-1 select-none",children:a.jsx("div",{className:"grid gap-0",style:{gridTemplateColumns:`repeat(auto-fill, minmax(${56+(w.editorSpellGap||0)}px, 1fr))`},children:Array.from({length:Math.max(t.deck_capacity,24)}).map((y,k)=>{const b=(k+1).toString(),N=t.spells?t.spells[b]:null,M=N?n[N]:null,T=(t.spell_uses||{})[b]??(M==null?void 0:M.max_uses),D=k>=t.deck_capacity,F=(r==null?void 0:r.wandSlot)===e&&r.indices.includes(k+1),G=(s==null?void 0:s.wandSlot)===e&&(s==null?void 0:s.idx)===k+1,Y=w.editorSpellGap||0;return a.jsx("div",{className:"aspect-square relative",style:{padding:`${Y/2}px`},onMouseMove:K=>!D&&d(K,e,k+1),onMouseLeave:p,children:a.jsxs("div",{onMouseDown:K=>{if(!D){if(K.ctrlKey&&K.button===1&&N){K.preventDefault(),K.stopPropagation(),H(N);return}if(K.button===1&&M){K.preventDefault(),K.stopPropagation();const Z=Array.isArray(t.marked_slots)?t.marked_slots:[],ne=k+1,he=Z.includes(ne)?Z.filter(pe=>pe!==ne):[...Z,ne];o(e,{marked_slots:he});return}K.preventDefault(),l(e,k+1,K.button===2)}},"data-slot-idx":b,onMouseUp:K=>{D||c(e,k+1)},onContextMenu:K=>{M&&K.preventDefault()},onMouseEnter:()=>!D&&u(e,k+1),onClick:K=>{if(K.altKey&&M){if(K.preventDefault(),K.stopPropagation(),N==="IF_HP"||N==="IF_PROJECTILE"||N==="IF_ENEMY"){m(pe=>{const ae={...pe};return N==="IF_HP"&&(ae.simulateLowHp=!pe.simulateLowHp),N==="IF_PROJECTILE"&&(ae.simulateManyProjectiles=!pe.simulateManyProjectiles),N==="IF_ENEMY"&&(ae.simulateManyEnemies=!pe.simulateManyEnemies),ae});return}const Z=T===0?M.max_uses??-1:0,ne={...t.spell_uses||{},[b]:Z},he=x(Z===0?"app.notification.set_charges_0":"app.notification.restore_charges");o(e,{spell_uses:ne},he);return}r&&r.indices.length>1?_(null):!D&&g(e,b,K)},className:`
                      w-full h-full rounded-lg border flex items-center justify-center relative group/cell transition-all active:scale-95
                      ${D?"bg-black/40 border-transparent opacity-10":`bg-zinc-800/80 border-white/5 shadow-inner hover:bg-zinc-700/80 ${w.editorDragMode==="hand"?"cursor-grab active:cursor-grabbing":"cursor-pointer"}`}
                      ${F?"ring-2 ring-indigo-500 ring-inset bg-indigo-500/40 border-indigo-400 shadow-[0_0_20px_rgba(99,102,241,0.3)] z-10 scale-[1.02]":""}
                      ${G&&i&&w.useNoitaSwapLogic?"border-indigo-500 bg-indigo-500/30 scale-105 z-20":"hover:border-indigo-500/50"}
                    `,children:[G&&(i&&w.useNoitaSwapLogic?a.jsx("div",{className:"absolute inset-0 border-2 border-indigo-400 rounded-lg animate-pulse pointer-events-none"}):a.jsx("div",{className:"absolute top-0 bottom-0 w-1 bg-indigo-400 z-50 animate-pulse rounded-full",style:{[s.isRightHalf?"right":"left"]:`-${Y/2+2}px`}})),M?a.jsxs("div",{className:"relative w-full h-full flex items-center justify-center pointer-events-none",children:[(()=>{const K=N==="IF_HP"&&w.simulateLowHp||N==="IF_PROJECTILE"&&w.simulateManyProjectiles||N==="IF_ENEMY"&&w.simulateManyEnemies,Z=T===0||K,ne=Array.isArray(t.marked_slots)&&t.marked_slots.includes(k+1);return a.jsxs(a.Fragment,{children:[a.jsx("img",{src:Ge(M.icon),className:`w-11 h-11 image-pixelated transition-transform group-hover/cell:scale-110 ${Z?"grayscale opacity-50":""}`,alt:"",draggable:"false"}),ne&&a.jsx("div",{className:"absolute inset-0 border-2 border-amber-500 rounded-lg shadow-[0_0_10px_rgba(245,158,11,0.5)] z-10 pointer-events-none"}),K&&a.jsx("div",{className:"absolute bottom-0 left-0",children:a.jsx("svg",{width:"12",height:"12",viewBox:"0 0 12 12",className:"drop-shadow-[0_0_2px_rgba(239,68,68,0.8)]",children:a.jsx("path",{d:"M0 12 L12 12 L0 0 Z",fill:"rgb(239, 68, 68)"})})}),T!==void 0&&(w.showSpellCharges||T===0)&&T!==-1&&!K&&a.jsx("div",{className:`absolute bottom-0 left-0 px-1.5 py-0.5 bg-black/90 text-[10px] font-mono font-black border-tr border-white/10 rounded-tr pointer-events-auto cursor-pointer select-none z-20 shadow-lg ${T===0?"text-red-500":"text-amber-400"}`,title:x("editor.modify_uses_tip"),onClick:he=>{he.stopPropagation();const pe=T===0?M.max_uses??10:0,ae={...t.spell_uses||{},[b]:pe};o(e,{spell_uses:ae})},children:T})]})})(),a.jsx("button",{onClick:K=>{K.stopPropagation();const Z={...t.spells||{}},ne={...t.spell_uses||{}};delete Z[b],delete ne[b],o(e,{spells:Z,spell_uses:ne})},className:"absolute -top-1.5 -right-1.5 w-5 h-5 rounded-full bg-red-500 text-white flex items-center justify-center opacity-0 group-hover/cell:opacity-100 transition-opacity z-10 pointer-events-auto shadow-lg",children:a.jsx(un,{size:12})})]}):!D&&a.jsx("span",{className:"text-zinc-800 text-2xl font-thin opacity-50",children:"+"}),!D&&R[k+1]&&a.jsx("div",{className:`
                      absolute bottom-1 right-1 text-[10px] font-black transition-all duration-200 pointer-events-none
                      ${S||w.showIndices?"text-cyan-400 scale-110 drop-shadow-[0_0_2px_rgba(0,0,0,0.8)]":"text-white/5"}
                    `,children:R[k+1]})]})},k)})})})]})]})}const nd=(e,t)=>{const n=new Map;t.forEach(o=>n.set(o.id,{state:o,children:[]}));const r=[],s=new Set,i=(o,l)=>{var u;let c=l;if(o.shot_id){if(l!==null&&l!==o.shot_id){const d=n.get(l),p=n.get(o.shot_id);d&&p&&!d.children.includes(p)&&d.children.push(p)}else if(l===null){const d=n.get(o.shot_id);d&&!r.includes(d)&&r.push(d)}c=o.shot_id,s.add(o.shot_id)}(u=o.children)==null||u.forEach(d=>i(d,c))};return i(e,null),t.forEach(o=>{if(!s.has(o.id)){const l=n.get(o.id);l&&!r.includes(l)&&r.push(l)}}),r},hl=e=>{if(!e)return 0;let t=1;return e.children&&e.children.forEach(n=>t+=hl(n)),t},eh=(e,t)=>{var s,i;const n=e.name.startsWith("Cast #")?"Cast":e.name,r=t.name.startsWith("Cast #")?"Cast":t.name;if(n!==r||e.count!==t.count||e.extra!==t.extra||(((s=e.children)==null?void 0:s.length)||0)!==(((i=t.children)==null?void 0:i.length)||0))return!1;if(e.children){for(let o=0;o<e.children.length;o++)if(!eh(e.children[o],t.children[o]))return!1}return!0},cy=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const r=Object.keys(e[n].stats),s=Object.keys(t[n].stats);if(r.length!==s.length)return!1;for(const i of r)if(e[n].stats[i]!==t[n].stats[i])return!1}return!0},ml=({nodes:e,hoveredShotId:t,currentCast:n,isRoot:r})=>a.jsx("div",{className:"flex flex-col gap-6",children:e.map(s=>a.jsx("div",{className:"flex items-start shrink-0",children:a.jsxs("div",{className:"relative flex items-start",children:[a.jsx("div",{className:"flex items-center h-[44px] shrink-0",children:!r&&a.jsx("div",{className:"w-8 h-px bg-zinc-800 shrink-0"})}),a.jsx(dy,{state:s.state,isHighlighted:(t==null?void 0:t.cast)===n&&(t==null?void 0:t.id)===s.state.id}),s.children.length>0&&a.jsxs("div",{className:"flex flex-col gap-6 relative",children:[a.jsx("div",{className:"flex flex-col gap-6 ml-0 shrink-0",children:a.jsx(ml,{nodes:s.children,hoveredShotId:t,currentCast:n,isRoot:!1})}),s.children.length>1&&a.jsx("div",{className:"absolute left-0 top-[22px] bottom-[22px] w-px bg-zinc-800"})]})]})},s.state.id))}),uy=({data:e,spellDb:t,onHoverSlots:n,settings:r,markedSlots:s=[],wandSpells:i,deckCapacity:o})=>{const{t:l,i18n:c}=ke(),[u,d]=E.useState({}),[p,g]=E.useState({}),[_,m]=E.useState(!1),[f,L]=E.useState(null),w=E.useMemo(()=>{if(!i||o===void 0)return null;const S={};let z=1;for(let j=1;j<=o;j++)i[j.toString()]&&(S[j]=z++);return S},[i,o]);E.useEffect(()=>{const S=j=>{j.key==="Alt"&&m(!0)},z=j=>{j.key==="Alt"&&m(!1)};return window.addEventListener("keydown",S),window.addEventListener("keyup",z),window.addEventListener("blur",()=>m(!1)),()=>{window.removeEventListener("keydown",S),window.removeEventListener("keyup",z)}},[]);const h=E.useMemo(()=>{var z;return!((z=e==null?void 0:e.tree)!=null&&z.children)||e.tree.children.length<=1?!1:hl(e.tree.children[0])>(r.autoHideThreshold||20)},[e==null?void 0:e.tree,r.autoHideThreshold]);if(E.useEffect(()=>{d({}),g({})},[e]),!e||!e.tree)return null;const x=Object.entries(e.counts||{}).sort(([,S],[,z])=>z-S),v=E.useMemo(()=>{var j;const S=e.tree.children;if(!S||S.length===0)return[];const z=[];if(!r.groupIdenticalCasts)return S.forEach((I,H)=>{var R;const U=H+1;z.push({start:U,end:U,node:I,states:e.states.filter(P=>P.cast===U),counts:((R=e.cast_counts)==null?void 0:R[U.toString()])||{}})}),z;for(let I=0;I<S.length;I++){const H=I+1,U=S[I],R=e.states.filter($=>$.cast===H),P=((j=e.cast_counts)==null?void 0:j[H.toString()])||{};if(z.length>0){const $=z[z.length-1],W=eh($.node,U),C=cy(e.states.filter(k=>k.cast===$.start),R),y=JSON.stringify($.counts)===JSON.stringify(P);if(W&&C&&y){$.end=H;continue}}z.push({start:H,end:H,node:U,states:R,counts:P})}return z},[e,r.groupIdenticalCasts]);return a.jsxs("div",{className:"mt-6 p-4 bg-black/40 border border-white/10 rounded-lg space-y-12 animate-in fade-in slide-in-from-top-4 duration-500",children:[x.length>0&&a.jsxs("section",{children:[a.jsxs("h3",{className:"sticky top-0 z-40 py-2 bg-zinc-950/80 backdrop-blur-sm text-[10px] font-black text-zinc-500 mb-4 flex items-center gap-2 tracking-widest uppercase",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)] rounded-full"}),l("evaluator.overall_counts")]}),a.jsx("div",{className:"flex flex-wrap gap-2 opacity-60 grayscale-[0.5] hover:opacity-100 hover:grayscale-0 transition-all duration-300",children:x.map(([S,z])=>{const j=t[S],I=j?c.language.startsWith("en")&&j.en_name?j.en_name:j.name:S;return a.jsxs("div",{className:"flex items-center gap-2 bg-zinc-900/40 border border-white/5 pl-1 pr-3 py-0.5 rounded-md transition-all group/count",children:[j?a.jsx("img",{src:Ge(j.icon),alt:S,className:"w-5 h-5 image-pixelated"}):a.jsx("div",{className:"w-5 h-5 bg-zinc-800 rounded flex items-center justify-center text-[8px] text-zinc-500 font-mono",children:"?"}),a.jsxs("div",{className:"flex flex-col -space-y-1",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 uppercase tracking-tighter truncate max-w-[60px]",title:S,children:I}),a.jsx("span",{className:"text-[9px] font-black text-amber-500/80 font-mono",children:z.toLocaleString()})]})]},S)})})]}),a.jsxs("section",{children:[a.jsx("div",{className:"sticky top-0 z-40 py-2 bg-zinc-950/80 backdrop-blur-sm flex items-center justify-between mb-4",children:a.jsxs("h3",{className:"text-[10px] font-black text-zinc-500 flex items-center gap-2 tracking-widest uppercase",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)] rounded-full"}),l("evaluator.shot_states")]})}),a.jsx("div",{className:"space-y-6",children:v.map(S=>{const z=S.start!==S.end,j=u[S.start]??!0,I=p[S.start]??!1;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2 cursor-pointer group/h",onClick:()=>d(H=>({...H,[S.start]:!j})),children:[a.jsxs("div",{className:`flex items-center gap-2 px-2 py-0.5 rounded border uppercase tracking-tighter transition-colors ${z?"bg-amber-500/10 text-amber-500 border-amber-500/20":"bg-indigo-500/10 text-indigo-400 border-indigo-500/20"}`,children:[a.jsx("span",{className:"text-[9px] font-black",children:z?`Cast #${S.start} - #${S.end}`:`Cast #${S.start}`}),z&&a.jsx("span",{className:"text-[7px] font-bold bg-amber-500/20 px-1 rounded",children:l("evaluator.repeat_merged")})]}),z&&j&&a.jsx("button",{onClick:H=>{H.stopPropagation(),g(U=>({...U,[S.start]:!I}))},className:"text-[8px] font-black text-zinc-500 hover:text-white bg-white/5 px-2 py-0.5 rounded border border-white/5 transition-all uppercase",children:I?l("evaluator.collapse_preview"):l("evaluator.expand_all_details",{count:S.end-S.start+1})}),a.jsx("div",{className:"h-px flex-1 bg-white/5"}),a.jsx("div",{className:"text-zinc-600 group-hover/h:text-zinc-400 transition-colors",children:j?a.jsx(ra,{size:12}):a.jsx(rl,{size:12})})]}),j&&a.jsx("div",{className:"space-y-6 animate-in fade-in slide-in-from-top-1 duration-200",children:!z||!I?a.jsxs("div",{className:"flex items-start gap-8",children:[a.jsx(mi,{group:S,spellDb:t}),a.jsx("div",{className:"flex-1 overflow-x-auto p-12 custom-scrollbar-mini",children:a.jsx(ml,{nodes:nd(S.node,S.states),hoveredShotId:f,currentCast:S.start,isRoot:!0})})]}):Array.from({length:S.end-S.start+1}).map((H,U)=>{var C,y;const R=S.start+U,P=(C=e.tree.children)==null?void 0:C[R-1],$=e.states.filter(k=>k.cast===R),W=((y=e.cast_counts)==null?void 0:y[R.toString()])||{};return P?a.jsxs("div",{className:"flex items-start gap-8 opacity-90 hover:opacity-100 transition-opacity",children:[a.jsx("div",{className:"shrink-0 w-12 pt-4",children:a.jsxs("span",{className:"text-[8px] font-black text-zinc-600 uppercase",children:["# ",R]})}),a.jsx(mi,{group:{counts:W,states:$,node:P},spellDb:t}),a.jsx("div",{className:"flex-1 overflow-x-auto p-12 custom-scrollbar-mini",children:a.jsx(ml,{nodes:nd(P,$),hoveredShotId:f,currentCast:R,isRoot:!0})})]},R):null})})]},S.start)})})]}),a.jsxs("section",{children:[a.jsxs("h3",{className:"sticky top-0 z-40 py-2 bg-zinc-950/80 backdrop-blur-sm text-[10px] font-black text-zinc-500 mb-4 flex items-center gap-2 tracking-widest uppercase",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)] rounded-full"}),l("evaluator.execution_flow")]}),a.jsx("div",{className:"space-y-4",children:v.map(S=>{const z=hl(S.node),j=S.start!==S.end,I=h&&S.start>1,H=u[S.start]??!I,U=p[S.start]??!1;return a.jsxs("div",{className:"bg-zinc-950/30 rounded-lg border border-white/5 overflow-hidden",children:[a.jsxs("div",{className:"px-4 py-2 bg-white/5 flex items-center justify-between cursor-pointer hover:bg-white/10 transition-colors group/treeh",onClick:()=>d(R=>({...R,[S.start]:!H})),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`text-[10px] font-black uppercase ${j?"text-amber-500":"text-emerald-500"}`,children:j?`Cast #${S.start} - #${S.end}`:`Cast #${S.start}`}),a.jsxs("span",{className:"text-[8px] text-zinc-600 font-mono",children:[l("evaluator.nodes_count"),": ",z]}),j&&H&&a.jsx("button",{onClick:R=>{R.stopPropagation(),g(P=>({...P,[S.start]:!U}))},className:"text-[8px] font-black text-zinc-500 hover:text-white bg-white/5 px-2 py-0.5 rounded border border-white/5 transition-all uppercase",children:U?l("evaluator.collapse_preview"):l("evaluator.expand_all_trees",{count:S.end-S.start+1})}),I&&!H&&a.jsx("span",{className:"text-[8px] bg-amber-500/10 text-amber-500 px-1.5 py-0.5 rounded border border-amber-500/20",children:l("evaluator.auto_folded")})]}),a.jsx("div",{className:"text-zinc-500 group-hover/treeh:text-zinc-300",children:H?a.jsx(ra,{size:14}):a.jsx(rl,{size:14})})]}),H&&a.jsx("div",{className:"p-6 space-y-12 animate-in fade-in slide-in-from-top-1 duration-200",children:!j||!U?a.jsxs("div",{className:"flex items-start gap-8",children:[a.jsx(mi,{group:S,spellDb:t}),a.jsx("div",{className:"flex-1 overflow-x-auto p-12 custom-scrollbar",children:a.jsx("div",{className:"w-fit",children:a.jsx(gl,{node:S.node,spellDb:t,isRoot:!0,onHover:n,onHoverShotId:R=>L(R?{cast:S.start,id:R}:null),markedSlots:s,showIndices:_||r.showIndices,absoluteToOrdinal:w})})})]}):Array.from({length:S.end-S.start+1}).map((R,P)=>{var y,k;const $=S.start+P,W=(y=e.tree.children)==null?void 0:y[$-1],C=((k=e.cast_counts)==null?void 0:k[$.toString()])||{};return W?a.jsxs("div",{className:"flex items-start gap-8 opacity-90 hover:opacity-100 transition-opacity",children:[a.jsx("div",{className:"shrink-0 w-12 pt-4",children:a.jsxs("span",{className:"text-[8px] font-black text-zinc-600 uppercase",children:["# ",$]})}),a.jsx(mi,{group:{counts:C},spellDb:t}),a.jsx("div",{className:"flex-1 overflow-x-auto p-12 custom-scrollbar",children:a.jsx("div",{className:"w-fit",children:a.jsx(gl,{node:W,spellDb:t,isRoot:!0,onHover:n,onHoverShotId:b=>L(b?{cast:$,id:b}:null),markedSlots:s,showIndices:_||r.showIndices,absoluteToOrdinal:w})})})]},$):null})})]},S.start)})})]})]})},mi=Ve.memo(({group:e,spellDb:t})=>{var g;const{t:n,i18n:r}=ke(),s=Object.entries(e.counts||{}).sort(([,_],[,m])=>m-_),i=((g=e.node)==null?void 0:g.extra)||"",o=i.match(/CastDelay:\s*(-?[\d\.]+)/i),l=i.match(/Recharge:\s*(-?[\d\.]+)/i),c=i.match(/Mana:\s*(-?[\d\.]+)/i),u=o?o[1]:null,d=l?l[1]:null,p=c?c[1]:null;return s.length===0?null:a.jsxs("div",{className:"flex-shrink-0 w-48 space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"text-[8px] font-black text-zinc-600 uppercase tracking-widest flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1 h-1 bg-amber-500/50 rounded-full"}),n("evaluator.cast_stats")]}),a.jsx("div",{className:"flex flex-col gap-1.5 max-h-48 overflow-y-auto custom-scrollbar-mini pr-2",children:s.map(([_,m])=>{const f=t[_],L=f?r.language.startsWith("en")&&f.en_name?f.en_name:f.name:_;return a.jsxs("div",{className:"flex items-center gap-2 bg-zinc-900/60 border border-white/5 pl-1 pr-2 py-1 rounded transition-all",children:[f?a.jsx("img",{src:Ge(f.icon),alt:_,className:"w-6 h-6 image-pixelated"}):a.jsx("div",{className:"w-6 h-6 bg-zinc-800 rounded flex items-center justify-center text-[8px] text-zinc-500 font-mono",children:"?"}),a.jsxs("div",{className:"flex-1 flex justify-between items-baseline min-w-0",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 truncate uppercase tracking-tighter mr-2",title:_,children:L}),a.jsxs("span",{className:"text-[10px] font-black text-amber-500 font-mono",children:["x",m.toLocaleString()]})]})]},_)})})]}),(u||d||p)&&a.jsxs("div",{className:"pt-3 border-t border-white/5 space-y-2",children:[a.jsxs("div",{className:"text-[8px] font-black text-zinc-600 uppercase tracking-widest flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1 h-1 bg-blue-500/50 rounded-full"}),n("evaluator.cast_final_settlement")]}),a.jsxs("div",{className:"grid grid-cols-1 gap-1",children:[u&&a.jsxs("div",{className:"flex justify-between items-center bg-blue-500/5 px-2 py-1 rounded border border-blue-500/10",children:[a.jsx("span",{className:"text-[8px] text-zinc-400 font-bold uppercase tracking-tighter",children:n("evaluator.cast_delay")}),a.jsxs("span",{className:"text-[10px] font-mono font-black text-blue-400",children:[u,"f"]})]}),d&&Number(d)>0&&a.jsxs("div",{className:"flex justify-between items-center bg-amber-500/5 px-2 py-1 rounded border border-amber-500/10",children:[a.jsx("span",{className:"text-[8px] text-zinc-400 font-bold uppercase tracking-tighter",children:n("evaluator.recharge_time")}),a.jsxs("span",{className:"text-[10px] font-mono font-black text-amber-500",children:[d,"f"]})]}),p&&a.jsxs("div",{className:"flex justify-between items-center bg-purple-500/5 px-2 py-1 rounded border border-purple-500/10 mt-1",children:[a.jsx("span",{className:"text-[8px] text-zinc-400 font-bold uppercase tracking-tighter",children:n("evaluator.mana_drain")}),a.jsx("span",{className:"text-[10px] font-mono font-black text-purple-400",children:p})]})]})]})]})}),dy=Ve.memo(({state:e,isHighlighted:t})=>{const{t:n}=ke();return a.jsxs("div",{className:`flex-shrink-0 w-56 p-3 bg-zinc-900/50 border rounded-md transition-all duration-300 group/state ${t?"border-blue-500 bg-blue-500/10 scale-105 shadow-[0_0_20px_rgba(59,130,246,0.3)] z-10":"border-white/5 hover:border-blue-500/30"}`,children:[a.jsxs("div",{className:`text-[10px] font-mono font-bold mb-3 border-b border-white/5 pb-1.5 flex justify-between items-center uppercase tracking-tighter ${t?"text-white":"text-blue-400"}`,children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center text-[9px] font-black border transition-colors ${t?"bg-blue-500 border-blue-400 text-white shadow-[0_0_10px_rgba(59,130,246,0.5)]":"bg-zinc-800 border-white/10 text-zinc-400"}`,children:e.id})}),a.jsx("span",{className:`${t?"opacity-100":"opacity-0"} group-hover/state:opacity-100 text-[8px] text-zinc-600 transition-opacity`,children:n("evaluator.shot_state_label")})]}),a.jsx("div",{className:"space-y-1.5",children:Object.entries(e.stats).filter(([r])=>!["reload_time","fire_rate_wait"].includes(r)).map(([r,s])=>{let i="text-zinc-300";return typeof s=="number"&&(["spread_degrees","recoil","delay"].includes(r)?i=s>0?"text-red-400":s<0?"text-emerald-400":"text-zinc-300":(r.includes("damage")||r==="speed_multiplier")&&(i=s>0?"text-emerald-400":s<0?"text-red-400":"text-zinc-300")),a.jsxs("div",{className:"flex justify-between text-[10px] font-mono leading-none",children:[a.jsx("span",{className:"text-zinc-500 uppercase text-[9px]",children:r.replace(/_/g," ")}),a.jsx("span",{className:i,children:s})]},r)})})]})}),gl=Ve.memo(({node:e,spellDb:t,isRoot:n,onHover:r,onHoverShotId:s,markedSlots:i,showIndices:o,absoluteToOrdinal:l})=>{const{i18n:c}=ke(),u=e.name.startsWith("Cast #")||e.name==="Wand",d=t[e.name],p=d?c.language.startsWith("en")&&d.en_name?d.en_name:d.name:e.name,g=d?Ge(d.icon):null,_=e.index&&e.index.some(m=>i.includes(m));return a.jsx("div",{className:"flex items-start shrink-0",children:a.jsxs("div",{className:"relative flex items-start",children:[a.jsxs("div",{className:"flex items-center h-[46px] shrink-0",children:[!n&&a.jsx("div",{className:"w-6 h-px bg-zinc-800 shrink-0"}),a.jsxs("div",{onMouseEnter:()=>{e.index&&(r==null||r(e.index)),e.shot_id&&(s==null||s(e.shot_id))},onMouseLeave:()=>{r==null||r(null),s==null||s(null)},className:`
              group relative p-2 rounded border transition-all cursor-help shrink-0
              ${u?"bg-indigo-500/10 border-indigo-500/30":"bg-zinc-900 border-white/10 shadow-xl"}
              ${_?"ring-2 ring-amber-500 ring-offset-2 ring-offset-black scale-105 z-10 !border-amber-500/50":""}
              hover:scale-110 hover:z-20 hover:border-indigo-400 hover:bg-indigo-400/20
            `,children:[a.jsxs("div",{className:"flex items-center gap-2 min-w-[24px] justify-center",children:[g?a.jsx("img",{src:g,alt:e.name,className:"w-7 h-7 image-pixelated drop-shadow-md",title:p}):a.jsx("span",{className:"text-[10px] font-black font-mono text-zinc-400 px-1 whitespace-nowrap uppercase italic tracking-tighter",children:p}),e.count>1&&a.jsxs("span",{className:"text-[10px] font-black bg-indigo-500 text-white px-1 rounded shadow-sm",children:["x",e.count]}),e.shot_id&&a.jsxs("div",{className:"absolute -top-1.5 -right-1.5 px-1 bg-blue-600 text-white text-[7px] font-black rounded-sm border border-blue-400/50 shadow-lg z-30",children:["@",e.shot_id]}),o&&e.index&&e.index.length>0&&a.jsx("div",{className:"absolute -bottom-1.5 -right-1 text-cyan-400 text-[10px] font-black z-20 scale-110 drop-shadow-[0_0_2px_rgba(0,0,0,0.8)]",children:e.index.map(m=>(l==null?void 0:l[m])||m).join(",")})]}),e.extra&&a.jsx("div",{className:"absolute -top-12 left-0 w-max max-w-[200px] whitespace-normal break-words bg-zinc-950/95 text-[9px] font-bold px-2 py-1.5 rounded border border-white/20 text-zinc-100 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-50 shadow-[0_10px_30px_rgba(0,0,0,0.5)] uppercase tracking-tighter leading-tight",children:e.extra})]})]}),e.children&&e.children.length>0&&a.jsxs("div",{className:"flex flex-col gap-3 relative",children:[a.jsx("div",{className:"flex flex-col gap-3 ml-0 shrink-0",children:e.children.map((m,f)=>a.jsx("div",{className:"flex items-start",children:a.jsx(gl,{node:m,spellDb:t,onHover:r,onHoverShotId:s,markedSlots:i,showIndices:o,absoluteToOrdinal:l})},f))}),e.children.length>1&&a.jsx("div",{className:"absolute left-0 top-[23px] bottom-[23px] w-px bg-zinc-800"})]})]})})});function py({slot:e,data:t,activeTab:n,isConnected:r,spellDb:s,selection:i,hoveredSlot:o,dragSource:l,clipboard:c,toggleExpand:u,deleteWand:d,copyWand:p,copyLegacyWand:g,pasteWand:_,updateWand:m,handleSlotMouseDown:f,handleSlotMouseUp:L,handleSlotMouseEnter:w,handleSlotMouseMove:h,handleSlotMouseLeave:x,openPicker:v,setSelection:S,setSettings:z,evalData:j,requestEvaluation:I,settings:H,onSaveToWarehouse:U}){const{t:R,i18n:P}=ke(),$=(C,y,k)=>{const b=H.showStatsInFrames?y:(y/60).toFixed(2)+"s",N=H.showStatsInFrames?(y/60).toFixed(2)+"s":y;return a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[9px] font-black text-zinc-500 uppercase tracking-wider leading-none mb-1",children:C}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:`text-[13px] font-mono font-bold leading-none ${k}`,children:b}),a.jsx("span",{className:"text-[10px] font-mono text-zinc-600 leading-none",children:N})]})]})},W=({label:C,value:y,colorClass:k})=>a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[9px] font-black text-zinc-500 uppercase tracking-wider leading-none mb-1",children:C}),a.jsx("span",{className:`text-[13px] font-mono font-bold leading-none ${k||"text-zinc-200"}`,children:y})]});return a.jsxs("div",{className:`glass-card group/wand border-white/5 ${n.expandedWands.has(e)?"bg-zinc-900/40":"hover:bg-zinc-900/20 overflow-hidden"}`,children:[a.jsxs("div",{className:"flex items-center px-4 py-2 cursor-pointer gap-4",onClick:()=>u(e),children:[a.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[a.jsx("div",{className:"w-12 h-10 rounded bg-zinc-800 flex items-center justify-center border border-white/5 relative overflow-hidden",children:(()=>{const C=gc(t.appearance);return C?a.jsx("img",{src:C,className:"w-full h-full object-contain image-pixelated p-1",alt:""}):a.jsx(Pi,{size:16,className:`${n.isRealtime?"text-indigo-400":"text-amber-400"}`})})()}),a.jsx("div",{className:"text-[10px] font-black w-6 text-center",children:e})]}),a.jsxs("div",{className:"flex-1 flex items-center gap-1 overflow-x-auto no-scrollbar py-1",children:[Object.entries(t.spells||{}).sort(([C],[y])=>parseInt(C)-parseInt(y)).map(([C,y])=>{const k=s[y],b=(t.spell_uses||{})[C]??(k==null?void 0:k.max_uses),N=y==="IF_HP"&&H.simulateLowHp||y==="IF_PROJECTILE"&&H.simulateManyProjectiles||y==="IF_ENEMY"&&H.simulateManyEnemies,M=(t.marked_slots||[]).includes(parseInt(C)),T=b===0||N,D=(b===0||H.showSpellCharges)&&!N;if(!k)return null;const F=P.language.startsWith("en")&&k.en_name?k.en_name:k.name;return a.jsxs("div",{className:"relative shrink-0",children:[a.jsx("img",{src:Ge(k.icon),className:`w-7 h-7 image-pixelated border rounded bg-black/20 transition-all ${M?"border-amber-500 shadow-[0_0_5px_rgba(245,158,11,0.5)] scale-110 z-10":"border-white/10"} ${T?"grayscale opacity-50":""}`,alt:F,title:`${C}: ${F}${b!==void 0?` (${R("evaluator.cast_stats")} x${b})`:""}`}),N&&a.jsx("div",{className:"absolute bottom-0 left-0",children:a.jsx("svg",{width:"8",height:"8",viewBox:"0 0 12 12",children:a.jsx("path",{d:"M0 12 L12 12 L0 0 Z",fill:"rgb(239, 68, 68)"})})}),b!==void 0&&b!==-1&&D&&a.jsx("div",{className:`absolute bottom-0 left-0 px-0.5 bg-black/80 text-[6px] font-mono leading-none border-tr border-white/10 rounded-tr ${b===0?"text-red-500":"text-amber-400"}`,children:b})]},C)}),Object.keys(t.spells||{}).length===0&&a.jsx("span",{className:"text-[10px] text-zinc-700 italic font-medium ml-2",children:R("tabs.empty_wand")})]}),a.jsxs("div",{className:"flex items-center gap-0 border-l border-white/5 shrink-0 h-10",children:[a.jsx("div",{className:"px-3 h-full flex items-center border-r border-white/5",children:a.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-0.5 rounded border ${t.shuffle_deck_when_empty?"bg-red-500/5 border-red-500/20 text-red-400":"bg-emerald-500/5 border-emerald-500/20 text-emerald-400"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${t.shuffle_deck_when_empty?"bg-red-500":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[9px] font-black uppercase tracking-wider whitespace-nowrap",children:t.shuffle_deck_when_empty?"Shuffle":"No Shuffle"})]})}),a.jsxs("div",{className:"px-3 h-full flex items-center gap-4 border-r border-white/5",children:[a.jsx(W,{label:"Mana Max",value:t.mana_max||0,colorClass:"text-cyan-400"}),a.jsx(W,{label:"Recharge",value:t.mana_charge_speed||0,colorClass:"text-cyan-400"})]}),a.jsxs("div",{className:"px-3 h-full flex items-center gap-4 border-r border-white/5",children:[$("Cast Delay",t.fire_rate_wait,"text-amber-300"),$("Rechg. Time",t.reload_time,"text-amber-300")]}),a.jsxs("div",{className:"px-3 h-full flex items-center gap-4 border-r border-white/5",children:[a.jsx(W,{label:"Capacity",value:t.deck_capacity}),a.jsx(W,{label:"Spread",value:(t.spread_degrees>0?"+":"")+t.spread_degrees+"",colorClass:t.spread_degrees<=0?"text-emerald-400":"text-red-400"}),a.jsx(W,{label:"Cast",value:t.actions_per_round}),a.jsx(W,{label:"Speed",value:(t.speed_multiplier||1).toFixed(2)+"x",colorClass:"text-indigo-400"})]}),a.jsxs("div",{className:"flex items-center bg-black/40 rounded-md p-0.5 ml-2 opacity-0 group-hover/wand:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:C=>{C.stopPropagation(),p(e)},className:"p-1.5 hover:bg-white/10 text-zinc-500 hover:text-indigo-400 rounded transition-colors",title:R("wand_card.copy"),children:a.jsx(x0,{size:14})}),H.showLegacyWandButton&&a.jsx("button",{onClick:C=>{C.stopPropagation(),g(e)},className:"p-1.5 hover:bg-white/10 text-zinc-500 hover:text-amber-400 rounded transition-colors text-[10px] font-black",title:R("wand_card.copy_legacy"),children:"W"}),a.jsx("button",{onClick:C=>{C.stopPropagation(),_(e)},disabled:!c,className:`p-1.5 rounded transition-colors ${c?"hover:bg-white/10 text-zinc-500 hover:text-emerald-400":"text-zinc-800 cursor-not-allowed"}`,title:R("wand_card.paste_overwrite"),children:a.jsx(s0,{size:14})}),a.jsx("div",{className:"w-px h-3 bg-white/10 mx-1"}),a.jsx("button",{onClick:C=>{C.stopPropagation(),U&&U(t)},className:"p-1.5 hover:bg-purple-500/20 text-zinc-500 hover:text-purple-400 rounded transition-colors",title:R("wand_card.save_to_warehouse"),children:a.jsx(Ts,{size:14})}),a.jsx("button",{onClick:C=>{C.stopPropagation(),d(e)},className:"p-1.5 hover:bg-red-500/20 text-zinc-500 hover:text-red-400 rounded transition-colors",children:a.jsx(Rn,{size:14})}),a.jsx("div",{className:"p-1.5 text-zinc-600",children:n.expandedWands.has(e)?a.jsx(r0,{size:16}):a.jsx(ra,{size:16})})]})]})]}),n.expandedWands.has(e)&&a.jsxs(a.Fragment,{children:[a.jsx(ly,{slot:e,data:t,spellDb:s,selection:i,hoveredSlot:o,dragSource:l,updateWand:m,handleSlotMouseDown:f,handleSlotMouseUp:L,handleSlotMouseEnter:w,handleSlotMouseMove:h,handleSlotMouseLeave:x,openPicker:v,setSelection:S,setSettings:z,settings:H,isConnected:r,requestEvaluation:(C,y)=>I(n.id,e,C,y)}),j&&j.data&&a.jsxs("div",{className:`px-4 pb-4 transition-opacity duration-300 ${j.loading?"opacity-50 pointer-events-none":"opacity-100"}`,children:[j.loading&&a.jsxs("div",{className:"flex items-center gap-2 mb-2 text-amber-500 animate-pulse",children:[a.jsx(ln,{size:12}),a.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest italic",children:R("evaluator.analyzing")})]}),a.jsx(uy,{data:j.data,spellDb:s,settings:H,markedSlots:t.marked_slots,wandSpells:t.spells,deckCapacity:t.deck_capacity})]})]})]})}function fy({activeTab:e,isConnected:t,spellDb:n,selection:r,hoveredSlot:s,dragSource:i,clipboard:o,toggleExpand:l,deleteWand:c,copyWand:u,copyLegacyWand:d,pasteWand:p,updateWand:g,requestEvaluation:_,handleSlotMouseDown:m,handleSlotMouseUp:f,handleSlotMouseEnter:L,handleSlotMouseMove:w,handleSlotMouseLeave:h,openPicker:x,setSelection:v,setSettings:S,evalResults:z,settings:j,saveToWarehouse:I}){const{t:H}=ke();return a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 custom-scrollbar bg-black/40",children:[e.wands&&Object.entries(e.wands).map(([U,R])=>a.jsx(py,{slot:U,data:R,activeTab:e,isConnected:t,spellDb:n,selection:r,hoveredSlot:s,dragSource:i,clipboard:o,toggleExpand:l,deleteWand:c,copyWand:u,copyLegacyWand:d,pasteWand:p,updateWand:g,requestEvaluation:_,handleSlotMouseDown:m,handleSlotMouseUp:f,handleSlotMouseEnter:L,handleSlotMouseMove:w,handleSlotMouseLeave:h,openPicker:x,setSelection:v,setSettings:S,evalData:z[`${e.id}-${U}`],settings:j,onSaveToWarehouse:I},U)),(!e.wands||Object.keys(e.wands).length===0)&&a.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-zinc-700 gap-4",children:[a.jsx(ln,{size:32,className:"opacity-20 animate-pulse"}),a.jsx("p",{className:"font-black text-[10px] uppercase tracking-widest",children:H("tabs.waiting_data")})]})]})}function hy({pickerConfig:e,onClose:t,pickerSearch:n,setPickerSearch:r,pickSpell:s,searchResults:i,spellStats:o,settings:l,pickerExpandedGroups:c,setPickerExpandedGroups:u,isConnected:d}){var w;const{t:p,i18n:g}=ke(),[_,m]=E.useState(0),f=Ve.useMemo(()=>{if(n)return(i==null?void 0:i[0])||[];const h=[...o.overall];return l.spellGroups.forEach((x,v)=>{h.push(...o.categories[v])}),h},[n,i,o,l.spellGroups]);E.useEffect(()=>{m(0)},[n]);const L=h=>({[p("settings.spell_groups_list.projectile")]:p("settings.spell_groups_list.projectile"),[p("settings.spell_groups_list.modifier")]:p("settings.spell_groups_list.modifier"),[p("settings.spell_groups_list.utility_multicast_other")]:p("settings.spell_groups_list.utility_multicast_other"),[p("settings.spell_groups_list.static_material_passive")]:p("settings.spell_groups_list.static_material_passive"),:p("settings.spell_groups_list.projectile"),:p("settings.spell_groups_list.modifier"),"++":p("settings.spell_groups_list.utility_multicast_other"),"++":p("settings.spell_groups_list.static_material_passive")})[h]||h;return e?a.jsx("div",{className:"fixed inset-0 z-50 overflow-hidden",onClick:t,children:a.jsxs("div",{className:"absolute glass-card bg-zinc-900/95 border-white/10 shadow-2xl flex flex-col max-h-[600px] animate-in slide-in-from-top-4 duration-200 overflow-hidden",style:{top:Math.min(e.y,window.innerHeight-520),left:Math.min(e.x,window.innerWidth-620),width:Math.max(400,Math.min(window.innerWidth-40,l.wrapLimit*(l.pickerRowHeight+6)+24))},onClick:h=>h.stopPropagation(),children:[a.jsxs("div",{className:"p-3 border-b border-white/5 flex items-center gap-2 bg-black/20",children:[a.jsx(Fs,{size:14,className:"text-zinc-500"}),a.jsx("input",{autoFocus:!0,placeholder:p("settings.title")==="Settings"?"Search spells...":"...",className:"bg-transparent flex-1 text-sm outline-none placeholder:text-zinc-600",value:n,onChange:h=>r(h.target.value),onKeyDown:h=>{if(h.key==="Escape"&&t(),h.key==="Enter"||h.key===" "&&n!==""){n===""&&f.length===0?s(null):f[_]&&(h.preventDefault(),s(f[_].id,!0));return}if(f.length>0){const x=l.wrapLimit||10;if(h.shiftKey&&h.code.startsWith("Digit")){const v=h.code.replace("Digit","");if(v>="1"&&v<="9"){h.preventDefault(),r(n+v);return}}if(h.code.startsWith("Digit")&&h.key>="1"&&h.key<="9"&&!h.shiftKey&&!h.ctrlKey&&!h.altKey&&!h.metaKey){const v=parseInt(h.key)-1;f[v]&&(h.preventDefault(),s(f[v].id,!0));return}h.key==="ArrowRight"?(m(v=>Math.min(f.length-1,v+1)),h.preventDefault()):h.key==="ArrowLeft"?(m(v=>Math.max(0,v-1)),h.preventDefault()):h.key==="ArrowDown"?(m(v=>Math.min(f.length-1,v+x)),h.preventDefault()):h.key==="ArrowUp"&&(m(v=>Math.max(0,v-x)),h.preventDefault())}}}),a.jsx("button",{onClick:()=>s(null),className:"text-[10px] font-black text-red-400 bg-red-400/10 px-2 py-1 rounded hover:bg-red-400/20",children:p("settings.title")==="Settings"?"CLEAR":""})]}),a.jsxs("div",{className:`flex-1 overflow-y-auto custom-scrollbar p-2 ${l.hideLabels?"space-y-2":"space-y-4"}`,children:[n?(w=i==null?void 0:i[0])!=null&&w.length?a.jsxs("div",{children:[!l.hideLabels&&a.jsxs("div",{className:"flex items-center gap-2 px-2 mb-2",children:[a.jsx(Fs,{size:12,className:"text-indigo-400"}),a.jsx("span",{className:"text-[9px] font-black text-zinc-500 uppercase tracking-widest",children:" ()"})]}),a.jsx("div",{className:`flex flex-wrap gap-1.5 px-1 ${l.hideLabels?"mb-4":""}`,children:i[0].map((h,x)=>{const v=l.spellTypes.find(I=>I.id===h.type),z=`${g.language.startsWith("en")&&h.en_name?h.en_name:h.name}${h.aliases?` (${h.aliases})`:""}
ID: ${h.id}`,j=_===x;return a.jsx("button",{onClick:()=>s(h.id,!1),style:{height:l.pickerRowHeight,width:l.pickerRowHeight,backgroundColor:(v==null?void 0:v.color)||"rgba(255,255,255,0.05)"},className:`aspect-square hover:bg-white/10 border rounded flex items-center justify-center transition-all group overflow-hidden ${j?"ring-2 ring-white border-transparent scale-110 z-10 shadow-[0_0_15px_rgba(255,255,255,0.3)]":"border-white/5"}`,title:z,children:a.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[a.jsx("img",{src:Ge(h.icon),className:"w-7 h-7 image-pixelated group-hover:scale-110",alt:""}),x<9&&a.jsx("div",{className:"absolute top-0 left-0 bg-black/60 text-[8px] text-white/50 px-0.5 rounded-br pointer-events-none",children:x+1})]})},h.id)})})]}):null:a.jsxs(a.Fragment,{children:[o.overall.length>0&&a.jsx("div",{className:`rounded-lg overflow-hidden ${l.hideLabels?"bg-white/5 border border-white/5 shadow-inner":""}`,children:a.jsxs("div",{className:`p-2 relative group/header ${l.hideLabels?"pt-1.5 pb-1.5":`bg-gradient-to-r from-indigo-500/10 to-zinc-800/20 ${l.hideLabels?"":"mb-2"}`}`,children:[a.jsxs("div",{className:`flex items-center justify-between ${l.hideLabels?"absolute top-1 right-1 z-10":"mb-2"}`,children:[!l.hideLabels&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ei,{size:12,className:"text-amber-500"}),a.jsx("span",{className:"text-[9px] font-black text-white/70 uppercase tracking-widest",children:" (Global)"})]}),a.jsx("button",{onClick:()=>u(h=>{const x=new Set(h);return x.has(-1)?x.delete(-1):x.add(-1),x}),className:`w-5 h-5 flex items-center justify-center bg-white/10 hover:bg-white/20 rounded transition-all group/plus ${l.hideLabels?"opacity-0 group-hover/header:opacity-100 shadow-lg":"ml-auto"}`,children:c.has(-1)?a.jsx(ol,{size:12,className:"text-white/50 group-hover/plus:text-white"}):a.jsx(Wr,{size:12,className:"text-white/50 group-hover/plus:text-white"})})]}),a.jsx("div",{className:"flex flex-wrap gap-1.5 px-0.5",children:o.overall.map((h,x)=>{const v=l.spellTypes.find(I=>I.id===h.type),z=`${g.language.startsWith("en")&&h.en_name?h.en_name:h.name}${h.aliases?` (${h.aliases})`:""}
ID: ${h.id}`,j=!n&&_===x;return a.jsx("button",{onClick:()=>s(h.id,!1),style:{height:l.pickerRowHeight,width:l.pickerRowHeight,backgroundColor:(v==null?void 0:v.color)||"rgba(0,0,0,0.2)"},className:`aspect-square hover:bg-black/40 border rounded flex items-center justify-center transition-all group overflow-hidden ${j?"ring-2 ring-white border-transparent scale-110 z-10 shadow-[0_0_15px_rgba(255,255,255,0.3)]":"border-white/5"}`,title:z,children:a.jsxs("div",{className:"relative w-full h-full flex items-center justify-center",children:[a.jsx("img",{src:Ge(h.icon),className:"w-7 h-7 image-pixelated group-hover:scale-110",alt:""}),!n&&x<9&&a.jsx("div",{className:"absolute top-0 left-0 bg-black/60 text-[8px] text-white/50 px-0.5 rounded-br pointer-events-none",children:x+1})]})},h.id)})})]})}),l.spellGroups.map((h,x)=>a.jsx("div",{className:`rounded-lg overflow-hidden ${o.categories[x].length===0?"hidden":""} ${l.hideLabels?"bg-white/5 border border-white/5 shadow-inner":""}`,children:a.jsxs("div",{className:`p-2 relative group/header ${l.hideLabels?"pt-1.5 pb-1.5":`bg-gradient-to-r ${h.color||"from-zinc-800/20 to-zinc-800/20"} ${l.hideLabels?"":"mb-2"}`}`,children:[a.jsxs("div",{className:`flex items-center justify-between ${l.hideLabels?"absolute top-1 right-1 z-10":"mb-2"}`,children:[!l.hideLabels&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1 h-3 rounded-full bg-white/20"}),a.jsxs("span",{className:"text-[9px] font-black text-white/70 uppercase tracking-widest",children:[L(h.name)," ",!c.has(x)&&`(Top ${l.categoryLimit})`]})]}),a.jsx("button",{onClick:()=>u(v=>{const S=new Set(v);return S.has(x)?S.delete(x):S.add(x),S}),className:`w-5 h-5 flex items-center justify-center bg-white/10 hover:bg-white/20 rounded transition-all group/plus ${l.hideLabels?"opacity-0 group-hover/header:opacity-100 shadow-lg":"ml-auto"}`,children:c.has(x)?a.jsx(ol,{size:12,className:"text-white/50 group-hover/plus:text-white"}):a.jsx(Wr,{size:12,className:"text-white/50 group-hover/plus:text-white"})})]}),a.jsx("div",{className:"flex flex-wrap gap-1.5 px-0.5",children:o.categories[x].map((v,S)=>{const z=l.spellTypes.find(R=>R.id===v.type),I=`${g.language.startsWith("en")&&v.en_name?v.en_name:v.name}${v.aliases?` (${v.aliases})`:""}
ID: ${v.id}`;let H=o.overall.length;for(let R=0;R<x;R++)H+=o.categories[R].length;H+=S;const U=!n&&_===H;return a.jsx("button",{onClick:()=>s(v.id,!1),style:{height:l.pickerRowHeight,width:l.pickerRowHeight,backgroundColor:(z==null?void 0:z.color)||"rgba(0,0,0,0.2)"},className:`aspect-square hover:bg-black/40 border rounded flex items-center justify-center transition-all group overflow-hidden ${U?"ring-2 ring-white border-transparent scale-110 z-10":"border-white/5"}`,title:I,children:a.jsx("img",{src:Ge(v.icon),className:"w-7 h-7 image-pixelated group-hover:scale-110",alt:""})},v.id)})})]})},h.name))]}),n&&(i==null?void 0:i.every(h=>h.length===0))&&a.jsx("div",{className:"py-10 text-center text-zinc-600 text-xs",children:""})]})]})}):null}const my=()=>{const{i18n:e,t}=ke();return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(c0,{size:12,className:"text-indigo-400"}),t("settings.language")]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>e.changeLanguage("zh"),className:`px-3 py-1.5 rounded text-[11px] font-bold transition-all border ${e.language.startsWith("zh")?"bg-indigo-500/20 border-indigo-500/40 text-white":"bg-black/40 border-white/5 text-zinc-500 hover:text-zinc-300"}`,children:""}),a.jsx("button",{onClick:()=>e.changeLanguage("en"),className:`px-3 py-1.5 rounded text-[11px] font-bold transition-all border ${e.language.startsWith("en")?"bg-indigo-500/20 border-indigo-500/40 text-white":"bg-black/40 border-white/5 text-zinc-500 hover:text-zinc-300"}`,children:"English"})]})]})};function gy({isOpen:e,onClose:t,settings:n,setSettings:r,onImport:s,onExport:i,onReloadSpells:o}){const[l,c]=E.useState("general"),[u,d]=E.useState([]),[p,g]=E.useState(""),[_,m]=E.useState(!1),{t:f}=ke(),L=async()=>{try{const y=await Cf();d(y||[])}catch(y){console.error("Failed to load mod bundles:",y)}};if(Ve.useEffect(()=>{e&&(l==="data"||p)&&L()},[l,p,e]),!e||!n)return null;const w=y=>{var N;const k=(N=y.target.files)==null?void 0:N[0];if(!k)return;const b=new FileReader;b.onload=async M=>{var T;try{const D=JSON.parse((T=M.target)==null?void 0:T.result);if(D.spells&&D.appends){const F={id:D.id||`mod_bundle_${Date.now()}`,name:D.name||"Imported Mod Bundle",timestamp:Date.now(),spells:D.spells,appends:D.appends,active_mods:Array.isArray(D.active_mods)?D.active_mods:[],vfs:D.vfs||{}};await Nf(F),await L(),o==null||o(),alert(f("app.notification.import_mod_bundle_success"))}}catch{alert("Invalid Mod Bundle file")}},b.readAsText(k)};n.themeColors;const h=n.defaultWandStats||{},x=(y,k)=>{r(b=>({...b,defaultWandStats:{...b.defaultWandStats||{},[y]:k}}))},v=(y,k)=>{r(b=>({...b,spellTypes:b.spellTypes.map(N=>N.id===y?{...N,color:k}:N)}))},S=(y,k)=>{r(b=>({...b,spellGroups:b.spellGroups.map((N,M)=>M===y?{...N,color:k}:N)}))},z=(y,k)=>{r(b=>({...b,spellGroups:b.spellGroups.map((N,M)=>M===y?{...N,name:k}:N)}))},j=["from-blue-500/10 to-blue-600/20","from-green-500/10 to-green-600/20","from-purple-500/10 to-purple-600/20","from-orange-500/10 to-orange-600/20","from-red-500/10 to-red-600/20","from-zinc-500/10 to-zinc-600/20"],I=()=>{r(y=>({...y,spellGroups:[...y.spellGroups,{name:f("settings.new_group_default_name"),types:[]}]}))},H=y=>{n.spellGroups.length<=1||r(k=>({...k,spellGroups:k.spellGroups.filter((b,N)=>N!==y)}))},U=(y,k)=>{r(b=>({...b,spellGroups:b.spellGroups.map((N,M)=>{if(M===y){const T=N.types.includes(k);return{...N,types:T?N.types.filter(D=>D!==k):[...N.types,k]}}return N})}))},R=y=>({:f("settings.spell_types_list.projectile"),:f("settings.spell_types_list.static_projectile"),:f("settings.spell_types_list.modifier"),:f("settings.spell_types_list.multicast"),:f("settings.spell_types_list.material"),:f("settings.spell_types_list.other"),:f("settings.spell_types_list.utility"),:f("settings.spell_types_list.passive")})[y]||y,P=y=>({:f("settings.spell_groups_list.projectile"),:f("settings.spell_groups_list.modifier"),"++":f("settings.spell_groups_list.utility_multicast_other"),"++":f("settings.spell_groups_list.static_material_passive")})[y]||y,$=[{id:"general",name:f("settings.categories.general"),icon:a.jsx(Mf,{size:16})},{id:"appearance",name:f("settings.categories.appearance"),icon:a.jsx(mr,{size:16})},{id:"wand",name:f("settings.categories.wand"),icon:a.jsx(Pi,{size:16})},{id:"cast",name:f("settings.categories.cast"),icon:a.jsx(Oi,{size:16})},{id:"spell_types",name:f("settings.categories.spell_types"),icon:a.jsx(Ei,{size:16})},{id:"sync",name:f("settings.categories.sync"),icon:a.jsx(ln,{size:16})},{id:"data",name:f("settings.categories.data"),icon:a.jsx(to,{size:16})}];let W=!1;const C=y=>{if(!p)return!0;const k=y.toLowerCase().includes(p.toLowerCase());return k&&(W=!0),k};return a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-md px-4 py-8",onClick:t,children:[a.jsxs("div",{className:"glass-card bg-[#0c0c0e] border-white/10 w-full max-w-3xl h-full max-h-[600px] flex overflow-hidden shadow-2xl animate-in fade-in zoom-in-95 duration-200",onClick:y=>y.stopPropagation(),children:[a.jsxs("div",{className:"w-40 bg-black/40 border-r border-white/5 flex flex-col shrink-0",children:[a.jsx("div",{className:"p-4 border-b border-white/5",children:a.jsx("h2",{className:"text-[10px] font-black tracking-widest uppercase text-indigo-500",children:f("settings.title")})}),a.jsx("nav",{className:"p-2 space-y-1 flex-1",children:$.map(y=>a.jsxs("button",{onClick:()=>{c(y.id),g("")},className:`w-full flex items-center gap-3 px-3 py-2 rounded text-[11px] font-bold transition-all ${l===y.id&&!p?"bg-indigo-500/10 text-white":"text-zinc-500 hover:bg-white/5"}`,children:[y.icon,a.jsx("span",{className:"hidden sm:inline",children:y.name})]},y.id))}),a.jsx("div",{className:"p-2 mt-auto border-t border-white/5",children:a.jsxs("button",{onClick:()=>m(!0),className:"w-full flex items-center gap-3 px-3 py-2 rounded text-[11px] font-bold text-zinc-500 hover:bg-white/5 transition-all",children:[a.jsx(Pu,{size:14,className:"text-amber-500"}),a.jsx("span",{className:"hidden sm:inline",children:f("guide.button")})]})})]}),a.jsxs("div",{className:"flex-1 flex flex-col min-w-0",children:[a.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center gap-4 bg-black/20",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-600",size:14}),a.jsx("input",{type:"text",placeholder:f("settings.search_placeholder"),value:p,onChange:y=>g(y.target.value),className:"w-full bg-black/40 border border-white/5 rounded-full pl-9 pr-4 py-1.5 text-[11px] outline-none focus:border-indigo-500/30 text-white"})]}),a.jsx("button",{onClick:t,className:"p-1 hover:bg-white/10 rounded-full text-zinc-500 transition-colors",children:a.jsx(un,{size:20})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-8",children:[(p||l==="general")&&a.jsxs("div",{className:"space-y-6",children:[C(f("settings.language"))&&a.jsx(my,{}),C(f("settings.wiki_language"))&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:f("settings.wiki_language")}),a.jsx("div",{className:"flex gap-2",children:["en","zh"].map(y=>a.jsx("button",{onClick:()=>r(k=>({...k,wikiLanguage:y})),className:`px-4 py-1.5 rounded text-[11px] font-bold transition-all ${n.wikiLanguage===y?"bg-indigo-500 text-white":"bg-black/40 text-zinc-500 border border-white/5 hover:bg-white/5"}`,children:y==="en"?"English":""},y))}),a.jsx("div",{className:"text-[9px] text-zinc-600 italic",children:f("settings.wiki_language_desc")})]})]}),(p||l==="appearance")&&a.jsxs("div",{className:"space-y-6",children:[C(f("settings.common_limit"))&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:f("settings.common_limit")}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"range",min:"0",max:"50",value:n.commonLimit,onChange:y=>r(k=>({...k,commonLimit:parseInt(y.target.value)||0})),className:"flex-1 accent-indigo-500"}),a.jsx("span",{className:"text-xs font-mono font-bold text-indigo-400 w-8",children:n.commonLimit})]})]}),C(f("settings.category_limit"))&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:f("settings.category_limit")}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"range",min:"1",max:"50",value:n.categoryLimit,onChange:y=>r(k=>({...k,categoryLimit:parseInt(y.target.value)||1})),className:"flex-1 accent-emerald-500"}),a.jsx("span",{className:"text-xs font-mono font-bold text-emerald-400 w-8",children:n.categoryLimit})]})]}),C(f("settings.wrap_limit"))&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:[f("settings.wrap_limit")," (",n.wrapLimit,")"]}),a.jsx("input",{type:"range",min:"5",max:"40",value:n.wrapLimit,onChange:y=>r(k=>({...k,wrapLimit:parseInt(y.target.value)||20})),className:"w-full accent-indigo-500"})]}),C(f("settings.picker_row_height"))&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:[f("settings.picker_row_height")," (",n.pickerRowHeight,"px)"]}),a.jsx("input",{type:"range",min:"24",max:"64",step:"4",value:n.pickerRowHeight,onChange:y=>r(k=>({...k,pickerRowHeight:parseInt(y.target.value)||32})),className:"w-full accent-amber-500"})]}),C(f("settings.warehouse_folder_height"))&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:[f("settings.warehouse_folder_height")," (",n.warehouseFolderHeight,"px)"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"range",min:"0",max:"800",step:"50",value:n.warehouseFolderHeight,onChange:y=>r(k=>({...k,warehouseFolderHeight:parseInt(y.target.value)||0})),className:"flex-1 accent-indigo-500"}),a.jsx("span",{className:"text-xs font-mono font-bold text-indigo-400 w-12",children:n.warehouseFolderHeight||f("settings.unlimit")})]}),a.jsx("div",{className:"text-[9px] text-zinc-600 italic",children:f("settings.warehouse_folder_height_desc")})]}),C(f("settings.editor_spell_gap"))&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:[f("settings.editor_spell_gap")," (",n.editorSpellGap,"px)"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"range",min:"0",max:"20",step:"2",value:n.editorSpellGap,onChange:y=>r(k=>({...k,editorSpellGap:parseInt(y.target.value)||0})),className:"flex-1 accent-indigo-500"}),a.jsx("span",{className:"text-xs font-mono font-bold text-indigo-400 w-8",children:n.editorSpellGap})]})]}),C(f("settings.hide_labels"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-zinc-500/10 rounded-lg text-zinc-400",children:a.jsx(mr,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.hide_labels")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.hide_labels_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,hideLabels:!y.hideLabels})),className:`w-10 h-5 rounded-full relative transition-colors ${n.hideLabels?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.hideLabels?"left-6":"left-1"}`})})]}),C(f("settings.show_drag_mode_toggle"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:a.jsx(Ef,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.show_drag_mode_toggle")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.show_drag_mode_toggle_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,showDragModeToggle:!y.showDragModeToggle})),className:`w-10 h-5 rounded-full relative transition-colors ${n.showDragModeToggle?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.showDragModeToggle?"left-6":"left-1"}`})})]}),C(f("settings.use_noita_swap_logic"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg text-amber-400",children:a.jsx(Gs,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.use_noita_swap_logic")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.use_noita_swap_logic_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,useNoitaSwapLogic:!y.useNoitaSwapLogic})),className:`w-10 h-5 rounded-full relative transition-colors ${n.useNoitaSwapLogic?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.useNoitaSwapLogic?"left-6":"left-1"}`})})]})]}),(p||l==="wand")&&a.jsxs("div",{className:"space-y-6",children:[C(f("settings.show_stats_in_frames"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-400",children:a.jsx(ln,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.show_stats_in_frames")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.show_stats_in_frames_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,showStatsInFrames:!y.showStatsInFrames})),className:`w-10 h-5 rounded-full relative transition-colors ${n.showStatsInFrames?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.showStatsInFrames?"left-6":"left-1"}`})})]}),C(f("settings.show_legacy_wand_button"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg text-amber-400",children:a.jsx(Pi,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.show_legacy_wand_button")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.show_legacy_wand_button_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,showLegacyWandButton:!y.showLegacyWandButton})),className:`w-10 h-5 rounded-full relative transition-colors ${n.showLegacyWandButton?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.showLegacyWandButton?"left-6":"left-1"}`})})]}),C(f("settings.delete_empty_slots"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-red-500/10 rounded-lg text-red-400",children:a.jsx(Rn,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.delete_empty_slots")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.delete_empty_slots_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,deleteEmptySlots:!y.deleteEmptySlots})),className:`w-10 h-5 rounded-full relative transition-colors ${n.deleteEmptySlots?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.deleteEmptySlots?"left-6":"left-1"}`})})]}),C(f("settings.default_wand_stats"))&&a.jsxs("div",{className:"bg-indigo-500/5 border border-indigo-500/20 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-[11px] font-black text-indigo-400 uppercase mb-4 flex items-center gap-2",children:f("settings.default_wand_stats")}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:["mana_max","mana_charge_speed","deck_capacity","fire_rate_wait","reload_time"].map(y=>{const k=y==="fire_rate_wait"||y==="reload_time",b=k&&!n.showStatsInFrames?parseFloat(((h[y]||0)/60).toFixed(3)):h[y]??"",N=k?`${y.replace(/_/g," ")} (${n.showStatsInFrames?"f":"s"})`:y.replace(/_/g," ");return a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-500 uppercase",children:N}),a.jsx("input",{type:"number",value:b,onChange:M=>{let T=parseFloat(M.target.value)||0;k&&!n.showStatsInFrames&&(T=Math.round(T*60)),x(y,T)},className:"w-full bg-black/40 border border-white/10 rounded px-2 py-1.5 text-xs font-mono text-indigo-300 outline-none focus:border-indigo-500/50"})]},y)})})]})]}),(p||l==="cast")&&a.jsxs("div",{className:"space-y-6",children:[C(f("settings.unlimited_spells"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-purple-500/10 rounded-lg text-purple-400",children:a.jsx(Ei,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.unlimited_spells")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.unlimited_spells_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,unlimitedSpells:!y.unlimitedSpells})),className:`w-10 h-5 rounded-full relative transition-colors ${n.unlimitedSpells?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.unlimitedSpells?"left-6":"left-1"}`})})]}),C(f("settings.initial_if_half"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg text-amber-400",children:a.jsx(ln,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.initial_if_half")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.initial_if_half_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,initialIfHalf:!y.initialIfHalf})),className:`w-10 h-5 rounded-full relative transition-colors ${n.initialIfHalf?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.initialIfHalf?"left-6":"left-1"}`})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[C(f("settings.simulate_low_hp"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.simulate_low_hp")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.simulate_low_hp_desc")})]}),a.jsx("button",{onClick:()=>r(y=>({...y,simulateLowHp:!y.simulateLowHp})),className:`w-8 h-4 rounded-full relative transition-colors shrink-0 ${n.simulateLowHp?"bg-red-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-0.5 w-2 h-2 rounded-full bg-white transition-all ${n.simulateLowHp?"left-5":"left-1"}`})})]}),C(f("settings.simulate_many_enemies"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.simulate_many_enemies")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.simulate_many_enemies_desc")})]}),a.jsx("button",{onClick:()=>r(y=>({...y,simulateManyEnemies:!y.simulateManyEnemies})),className:`w-8 h-4 rounded-full relative transition-colors shrink-0 ${n.simulateManyEnemies?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-0.5 w-2 h-2 rounded-full bg-white transition-all ${n.simulateManyEnemies?"left-5":"left-1"}`})})]}),C(f("settings.simulate_many_projectiles"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.simulate_many_projectiles")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.simulate_many_projectiles_desc")})]}),a.jsx("button",{onClick:()=>r(y=>({...y,simulateManyProjectiles:!y.simulateManyProjectiles})),className:`w-8 h-4 rounded-full relative transition-colors shrink-0 ${n.simulateManyProjectiles?"bg-blue-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-0.5 w-2 h-2 rounded-full bg-white transition-all ${n.simulateManyProjectiles?"left-5":"left-1"}`})})]})]}),C(f("settings.show_spell_charges"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg text-amber-400",children:a.jsx(to,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.show_spell_charges")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.show_spell_charges_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,showSpellCharges:!y.showSpellCharges})),className:`w-10 h-5 rounded-full transition-colors relative ${n.showSpellCharges?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.showSpellCharges?"left-6":"left-1"}`})})]}),C(f("settings.num_casts"))&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-zinc-400 uppercase tracking-widest",children:[f("settings.num_casts")," (",n.numCasts||3,")"]}),a.jsx("div",{className:"text-[10px] text-zinc-500 mb-2 italic",children:f("settings.num_casts_desc")}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"range",min:"1",max:"50",value:n.numCasts||3,onChange:y=>r(k=>({...k,numCasts:parseInt(y.target.value)||3})),className:"flex-1 accent-blue-500"}),a.jsx("span",{className:"text-xs font-mono font-bold text-blue-400 w-8",children:n.numCasts||3})]})]}),C(f("settings.stop_at_recharge"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:a.jsx(Oi,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.stop_at_recharge")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.stop_at_recharge_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,stopAtRecharge:!y.stopAtRecharge})),className:`w-10 h-5 rounded-full relative transition-colors ${n.stopAtRecharge?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.stopAtRecharge?"left-6":"left-1"}`})})]}),C(f("settings.auto_hide_threshold"))&&a.jsxs("div",{className:"space-y-2 text-zinc-400",children:[a.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest",children:f("settings.auto_hide_threshold")}),a.jsx("div",{className:"text-[10px] text-zinc-500 mb-2 italic",children:f("settings.auto_hide_threshold_desc")}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"range",min:"5",max:"100",value:n.autoHideThreshold||20,onChange:y=>r(k=>({...k,autoHideThreshold:parseInt(y.target.value)||20})),className:"flex-1 accent-indigo-500"}),a.jsx("span",{className:"text-xs font-mono font-bold text-indigo-400 w-8",children:n.autoHideThreshold||20})]})]}),C(f("settings.group_identical_casts"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-400",children:a.jsx(mr,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.group_identical_casts")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.group_identical_casts_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,groupIdenticalCasts:!y.groupIdenticalCasts})),className:`w-10 h-5 rounded-full relative transition-colors ${n.groupIdenticalCasts?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.groupIdenticalCasts?"left-6":"left-1"}`})})]}),C(f("settings.fold_nodes"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg text-emerald-400",children:a.jsx(mr,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.fold_nodes")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.fold_nodes_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,foldNodes:!y.foldNodes})),className:`w-10 h-5 rounded-full relative transition-colors ${n.foldNodes?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.foldNodes?"left-6":"left-1"}`})})]}),C(f("settings.show_indices"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-amber-500/10 rounded-lg text-amber-400",children:a.jsx(to,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.show_indices")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.show_indices_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,showIndices:!y.showIndices})),className:`w-10 h-5 rounded-full relative transition-colors ${n.showIndices?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.showIndices?"left-6":"left-1"}`})})]})]}),(p||l==="spell_types")&&a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-[11px] font-black text-zinc-300 uppercase flex items-center gap-2",children:[a.jsx("div",{className:"w-1 h-3 rounded-full bg-amber-500"}),f("settings.spell_type_colors")]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.spellTypes.map(y=>a.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-2 rounded border border-white/5",children:[a.jsx("input",{type:"color",value:y.color,onChange:k=>v(y.id,k.target.value),className:"w-8 h-8 rounded border-0 bg-transparent cursor-pointer overflow-hidden p-0"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] font-bold text-zinc-300",children:R(y.name)}),a.jsx("span",{className:"text-[8px] font-mono text-zinc-500 uppercase",children:y.color})]})]},y.id))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-[11px] font-black text-zinc-300 uppercase flex items-center gap-2",children:[a.jsx("div",{className:"w-1 h-3 rounded-full bg-indigo-500"}),f("settings.spell_group_management")]}),a.jsxs("button",{onClick:I,className:"text-[9px] font-black bg-indigo-500/10 text-indigo-400 px-2 py-1 rounded hover:bg-indigo-500/20 flex items-center gap-1",children:[a.jsx(Wr,{size:10})," ",f("settings.add_group")]})]}),a.jsx("div",{className:"space-y-4",children:n.spellGroups.map((y,k)=>a.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"p-3 border-b border-white/5 bg-black/20 flex items-center gap-3",children:[a.jsx("input",{value:P(y.name),onChange:b=>z(k,b.target.value),className:"bg-transparent text-xs font-bold text-zinc-200 outline-none focus:text-white flex-1"}),a.jsx("div",{className:"flex gap-1",children:j.map(b=>a.jsx("button",{onClick:()=>S(k,b),className:`w-3 h-3 rounded-full bg-gradient-to-r ${b} border ${y.color===b?"border-white":"border-white/10"}`},b))}),a.jsx("button",{onClick:()=>H(k),className:"text-zinc-600 hover:text-red-400 transition-colors ml-1",children:a.jsx(Rn,{size:12})})]}),a.jsxs("div",{className:"p-3",children:[a.jsxs("div",{className:"text-[9px] font-black text-zinc-500 uppercase mb-2 tracking-widest",children:[f("settings.contains_types"),":"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:n.spellTypes.map(b=>a.jsx("button",{onClick:()=>U(k,b.id),className:`
                                  px-2 py-1 rounded text-[10px] font-bold border transition-all
                                  ${y.types.includes(b.id)?"bg-indigo-500/20 border-indigo-500/40 text-indigo-300":"bg-black/20 border-white/5 text-zinc-600 hover:text-zinc-400"}
                                `,children:R(b.name)},b.id))})]})]},k))})]})]}),(p||l==="sync")&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-[11px] font-black text-zinc-300 uppercase",children:f("settings.conflict_strategy")}),["ask","override_game","new_workflow"].map(y=>a.jsx("button",{onClick:()=>r(k=>({...k,conflictStrategy:y})),className:`w-full text-left px-4 py-3 rounded border transition-all ${n.conflictStrategy===y?"bg-indigo-500/10 border-indigo-500/50":"bg-black/20 border-white/5"}`,children:a.jsx("div",{className:"text-[11px] font-bold text-zinc-200",children:f(y==="ask"?"settings.conflict_ask":y==="override_game"?"settings.conflict_override":"settings.conflict_new")})},y))]}),(p||l==="data")&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-[11px] font-black text-zinc-300 uppercase",children:f("settings.data_backup")}),C(f("settings.export_history"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400",children:a.jsx(ln,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.export_history")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.export_history_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,exportHistory:!y.exportHistory})),className:`w-10 h-5 rounded-full relative transition-all ${n.exportHistory?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.exportHistory?"left-6":"left-1"}`})})]}),C(f("settings.embed_metadata"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-400",children:a.jsx(Pi,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.embed_metadata")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.embed_metadata_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,embedMetadataInImage:!y.embedMetadataInImage})),className:`w-10 h-5 rounded-full relative transition-all ${n.embedMetadataInImage?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.embedMetadataInImage?"left-6":"left-1"}`})})]}),C(f("settings.pure_spells_export"))&&a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-emerald-500/10 rounded-lg text-emerald-400",children:a.jsx(al,{size:16})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:f("settings.pure_spells_export")}),a.jsx("div",{className:"text-[10px] text-zinc-500",children:f("settings.pure_spells_export_desc")})]})]}),a.jsx("button",{onClick:()=>r(y=>({...y,pureSpellsExport:!y.pureSpellsExport})),className:`w-10 h-5 rounded-full relative transition-all ${n.pureSpellsExport?"bg-indigo-600":"bg-zinc-700"}`,children:a.jsx("div",{className:`absolute top-1 w-3 h-3 rounded-full bg-white transition-all ${n.pureSpellsExport?"left-6":"left-1"}`})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5",children:[a.jsxs("h3",{className:"text-[11px] font-black text-amber-400 uppercase flex items-center gap-2",children:[a.jsx(Of,{size:14})," ",f("settings.mod_environments")]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:u.map(y=>a.jsxs("div",{className:"flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("div",{className:"text-xs font-bold text-zinc-200",children:y.name}),a.jsxs("div",{className:"text-[9px] text-zinc-500",children:[Object.keys(y.spells).length," Spells | ",new Date(y.timestamp).toLocaleString()]})]}),a.jsx("button",{onClick:async()=>{confirm(f("settings.delete_mod_bundle_confirm"))&&(await Jg(y.id),await L(),o==null||o())},className:"p-2 hover:bg-red-500/20 text-zinc-500 hover:text-red-400 rounded-full transition-colors",children:a.jsx(Rn,{size:14})})]},y.id))}),a.jsxs("label",{className:"neo-button bg-amber-500/10 text-amber-400 border border-amber-500/20 cursor-pointer text-xs py-3 justify-center",children:[f("settings.import_mod_bundle")," ",a.jsx("input",{type:"file",className:"hidden",accept:".json",onChange:w})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("label",{className:"neo-button bg-indigo-500/10 text-indigo-400 border border-indigo-500/20 cursor-pointer text-xs py-3 justify-center",children:[f("settings.import_json")," ",a.jsx("input",{type:"file",className:"hidden",onChange:s})]}),a.jsx("button",{onClick:i,className:"neo-button bg-white/5 border border-white/10 text-xs py-3 justify-center",children:f("settings.export_backup")})]})]}),p&&!W&&a.jsx("div",{className:"text-center py-20 text-zinc-600 text-xs font-black uppercase tracking-widest",children:f("settings.no_results")})]})]})]}),_&&a.jsxs("div",{className:"absolute inset-0 z-[200] bg-black/90 backdrop-blur-xl flex flex-col p-8 animate-in fade-in zoom-in-95 duration-200",onClick:()=>m(!1),children:[a.jsxs("div",{className:"flex items-center justify-between mb-8 border-b border-white/10 pb-4",onClick:y=>y.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-amber-500/10 rounded-xl text-amber-500",children:a.jsx(Pu,{size:24})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black uppercase tracking-widest text-white",children:f("guide.title")}),a.jsx("p",{className:"text-xs text-zinc-500 uppercase tracking-widest font-bold",children:f("guide.subtitle")})]})]}),a.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-white/10 rounded-full text-zinc-500 transition-colors",children:a.jsx(un,{size:24})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar pr-4 space-y-8",onClick:y=>y.stopPropagation(),children:[a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-xs font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(mr,{size:14})," ",f("guide.categories.basic")]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx(pt,{keys:["Ctrl","C / V / X"],label:f("guide.shortcuts.copy_paste")}),a.jsx(pt,{keys:["Ctrl","A"],label:f("guide.shortcuts.select_all")}),a.jsx(pt,{keys:["Ctrl","Z / Y"],label:f("guide.shortcuts.undo_redo")}),a.jsx(pt,{keys:["Delete","Backspace"],label:f("guide.shortcuts.delete")}),a.jsx(pt,{keys:["Space"],label:f("guide.shortcuts.insert_slot")}),a.jsx(pt,{keys:["Delete"],label:f("guide.shortcuts.remove_slot")})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-xs font-black text-emerald-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Oi,{size:14})," ",f("guide.categories.mouse")]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx(pt,{keys:["L-Click"],label:f("guide.shortcuts.select_toggle")}),a.jsx(pt,{keys:["L-Drag"],label:f("guide.shortcuts.box_select")}),a.jsx(pt,{keys:["R-Drag"],label:f("guide.shortcuts.move_spells")}),a.jsx(pt,{keys:["Right Half","AC Zone"],label:f("guide.shortcuts.to_always_cast")})]})]}),a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h4",{className:"text-xs font-black text-amber-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ei,{size:14})," ",f("guide.categories.advanced")]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsx(pt,{keys:["Alt","L-Click"],label:f("guide.shortcuts.modify_uses")}),a.jsx(pt,{keys:["Hold Alt"],label:f("guide.shortcuts.show_indices")}),a.jsx(pt,{keys:["Ctrl","B"],label:f("guide.shortcuts.toggle_warehouse")}),a.jsx(pt,{keys:["Ctrl","H"],label:f("guide.shortcuts.toggle_history")})]})]}),a.jsxs("section",{className:"mt-8 p-4 bg-white/[0.02] border border-white/5 rounded-2xl space-y-3",children:[a.jsxs("h4",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em] flex items-center gap-2",children:[a.jsx(Pf,{size:14})," ",f("guide.categories.tips")]}),a.jsxs("ul",{className:"text-xs text-zinc-400 space-y-2 list-disc list-inside leading-relaxed",children:[a.jsx("li",{children:f("guide.tips.triggered")}),a.jsx("li",{children:f("guide.tips.skipped")}),a.jsx("li",{children:f("guide.tips.rounds")})]})]})]})]})]})}function pt({keys:e,label:t}){return a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/[0.03] border border-white/5 rounded-xl hover:bg-white/[0.05] transition-colors group",children:[a.jsx("span",{className:"text-xs text-zinc-400 group-hover:text-zinc-300 transition-colors",children:t}),a.jsx("div",{className:"flex gap-1",children:e.map((n,r)=>a.jsxs(Ve.Fragment,{children:[a.jsx("kbd",{className:"px-2 py-1 bg-zinc-800 border-b-2 border-zinc-950 rounded text-[10px] font-mono font-bold text-zinc-200",children:n}),r<e.length-1&&a.jsx("span",{className:"text-zinc-600 text-[10px] self-center",children:"+"})]},r))})]})}function xy({conflict:e,activeTab:t,onResolve:n}){const{t:r}=ke();return e?a.jsx("div",{className:"fixed inset-0 z-[400] flex items-center justify-center bg-black/80 backdrop-blur-md px-4",children:a.jsxs("div",{className:"glass-card bg-zinc-900 border-indigo-500/30 w-full max-w-md p-6 shadow-2xl animate-in zoom-in duration-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4 text-amber-400",children:[a.jsx(Gs,{className:"animate-spin-slow"}),a.jsx("h2",{className:"text-sm font-black tracking-widest uppercase",children:r("conflict.title")})]}),a.jsx("p",{className:"text-xs text-zinc-400 leading-relaxed mb-6",children:r("conflict.description")}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>n("web"),className:"w-full flex flex-col items-start px-4 py-3 rounded-lg bg-indigo-500/10 border border-indigo-500/30 hover:bg-indigo-500/20 transition-all group",children:[a.jsx("span",{className:"text-xs font-bold text-indigo-400 group-hover:text-indigo-300",children:r("conflict.use_web")}),a.jsx("span",{className:"text-[10px] text-zinc-500",children:r("conflict.use_web_desc")})]}),a.jsxs("button",{onClick:()=>n("game"),className:"w-full flex flex-col items-start px-4 py-3 rounded-lg bg-white/5 border border-white/10 hover:bg-white/10 transition-all group",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-300 group-hover:text-white",children:r("conflict.use_game")}),a.jsx("span",{className:"text-[10px] text-zinc-500",children:r("conflict.use_game_desc")})]}),a.jsxs("button",{onClick:()=>n("both"),className:"w-full flex flex-col items-start px-4 py-3 rounded-lg bg-emerald-500/10 border border-emerald-500/30 hover:bg-emerald-500/20 transition-all group",children:[a.jsx("span",{className:"text-xs font-bold text-emerald-400 group-hover:text-emerald-300",children:r("conflict.use_both")}),a.jsx("span",{className:"text-[10px] text-zinc-500",children:r("conflict.use_both_desc")})]})]})]})}):null}function yy({isOpen:e,onClose:t,activeTab:n,spellDb:r,onJumpPast:s,onJumpFuture:i,onUndo:o,onRedo:l,isConnected:c}){var d,p;const{t:u}=ke();return e?a.jsxs("div",{className:"fixed inset-y-0 right-0 w-80 bg-zinc-900/95 backdrop-blur-xl border-l border-white/10 shadow-[0_0_50px_rgba(0,0,0,0.5)] z-[300] flex flex-col animate-in slide-in-from-right duration-300",children:[a.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between bg-black/40",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Lf,{size:18,className:"text-indigo-400"}),a.jsx("h2",{className:"text-sm font-black uppercase tracking-widest",children:u("history.title")})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full text-zinc-500 hover:text-white transition-colors",title:u("history.close"),children:a.jsx(un,{size:18})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:a.jsxs("div",{className:"flex flex-col",children:[(!n.past||n.past.length===0)&&(!n.future||n.future.length===0)&&a.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-zinc-600 gap-2",children:[a.jsx(i0,{size:32,className:"opacity-10"}),a.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest opacity-40",children:u("history.no_records")})]}),a.jsx("div",{className:"flex flex-col",children:n.past&&n.past.map((g,_)=>a.jsxs("button",{onClick:()=>s(_),className:"flex flex-col px-4 py-3 text-left border-b border-white/5 transition-all hover:bg-indigo-500/5 group/hitem relative overflow-hidden",children:[a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-500/0 group-hover/hitem:bg-indigo-500 transition-all"}),a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-300 group-hover/hitem:text-white",children:g.name}),a.jsx("span",{className:"text-[9px] font-mono text-zinc-600 group-hover/hitem:text-indigo-300/50",children:new Date(g.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),g.icons&&g.icons.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 max-h-12 overflow-hidden group-hover/hitem:max-h-none transition-all duration-300",children:[g.icons.slice(0,15).map((m,f)=>{const L=r[m];return L?a.jsx("img",{src:Ge(L.icon),className:"w-5 h-5 image-pixelated border border-white/5 rounded-sm bg-black/40 shadow-sm",alt:""},f):null}),g.icons.length>15&&a.jsxs("span",{className:"text-[8px] text-zinc-500 flex items-center px-1 font-black",children:["+",g.icons.length-15]})]})]},g.id))}),(((d=n.past)==null?void 0:d.length)>0||((p=n.future)==null?void 0:p.length)>0)&&a.jsxs("div",{className:"px-4 py-4 bg-indigo-600/20 border-l-4 border-l-indigo-500 border-y border-white/10 sticky top-0 z-10 backdrop-blur-md",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 animate-pulse"}),a.jsx("span",{className:"text-xs font-black text-white uppercase tracking-wider",children:u("history.current_state")})]}),a.jsx("div",{className:"text-[9px] text-indigo-400/70 uppercase font-black tracking-widest mt-1",children:u("history.latest_version")})]}),a.jsx("div",{className:"flex flex-col",children:n.future&&n.future.map((g,_)=>a.jsxs("button",{onClick:()=>i(_),className:"flex flex-col px-4 py-3 text-left border-b border-white/5 group/fitem relative overflow-hidden transition-all hover:bg-emerald-500/10",children:[a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-emerald-500/0 group-hover/fitem:bg-emerald-500 transition-all"}),a.jsxs("div",{className:"flex justify-between items-start mb-2 opacity-50 group-hover/fitem:opacity-100 transition-opacity",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-400 group-hover/fitem:text-emerald-400",children:g.name}),a.jsx("span",{className:"text-[9px] font-mono text-zinc-700",children:new Date(g.timestamp).toLocaleTimeString([],{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),g.icons&&g.icons.length>0&&a.jsx("div",{className:"flex flex-wrap gap-1 opacity-30 group-hover/fitem:opacity-100 transition-all",children:g.icons.slice(0,15).map((m,f)=>{const L=r[m];return L?a.jsx("img",{src:Ge(L.icon),className:"w-4 h-4 image-pixelated border border-white/5 rounded-sm bg-black/40 grayscale group-hover/fitem:grayscale-0",alt:""},f):null})})]},g.id))})]})}),a.jsxs("div",{className:"p-4 bg-black/40 border-t border-white/10 space-y-3 shadow-[0_-10px_30px_rgba(0,0,0,0.3)]",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:o,disabled:!n.past||n.past.length===0,className:"flex-1 py-2.5 bg-zinc-800 hover:bg-indigo-600 disabled:bg-zinc-900 disabled:opacity-20 disabled:cursor-not-allowed rounded-lg text-[10px] font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2 group shadow-lg active:scale-95",children:[a.jsx(y0,{size:14,className:"group-hover:-translate-x-0.5 transition-transform"}),u("history.undo")]}),a.jsxs("button",{onClick:l,disabled:!n.future||n.future.length===0,className:"flex-1 py-2.5 bg-zinc-800 hover:bg-emerald-600 disabled:bg-zinc-900 disabled:opacity-20 disabled:cursor-not-allowed rounded-lg text-[10px] font-black uppercase tracking-widest transition-all flex items-center justify-center gap-2 group shadow-lg active:scale-95",children:[u("history.redo"),a.jsx(g0,{size:14,className:"group-hover:translate-x-0.5 transition-transform"})]})]}),a.jsx("p",{className:"text-[9px] text-zinc-600 text-center uppercase font-black tracking-[0.2em] opacity-50",children:u("history.scope_info")})]})]}):null}function wy(e,t,n){if(!e)return!0;if(!t||!n)return!1;const r=[];let s=-1;for(const l of n){const c=t.indexOf(l,s+1);if(c===-1)return!1;r.push(c),s=c}let i=0,o=0;for(let l=0;l<e.length;l++){const c=e[l];let u=!1;for(let d=o;d<r.length;d++)if(c===n[d]){i=r[d]+1,o=d+1,u=!0;break}if(u||i<t.length&&c===t[i]&&(i++,o<r.length&&i-1===r[o]&&o++,u=!0),!u)return!1}return!0}function vs(e,t,n){const r=t.split(" "),s=n.split(" ");for(let i=0;i<r.length;i++)if(wy(e,r[i],s[i]))return!0;return!1}function th(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=th(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function xc(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=th(e))&&(r&&(r+=" "),r+=t);return r}function vy(){for(var e=0,t,n,r="";e<arguments.length;)(t=arguments[e++])&&(n=nh(t))&&(r&&(r+=" "),r+=n);return r}function nh(e){if(typeof e=="string")return e;for(var t,n="",r=0;r<e.length;r++)e[r]&&(t=nh(e[r]))&&(n&&(n+=" "),n+=t);return n}var yc="-";function _y(e){var t=ky(e),n=e.conflictingClassGroups,r=e.conflictingClassGroupModifiers,s=r===void 0?{}:r;function i(l){var c=l.split(yc);return c[0]===""&&c.length!==1&&c.shift(),rh(c,t)||by(l)}function o(l,c){var u=n[l]||[];return c&&s[l]?[].concat(u,s[l]):u}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function rh(e,t){var o;if(e.length===0)return t.classGroupId;var n=e[0],r=t.nextPart.get(n),s=r?rh(e.slice(1),r):void 0;if(s)return s;if(t.validators.length!==0){var i=e.join(yc);return(o=t.validators.find(function(l){var c=l.validator;return c(i)}))==null?void 0:o.classGroupId}}var rd=/^\[(.+)\]$/;function by(e){if(rd.test(e)){var t=rd.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}}function ky(e){var t=e.theme,n=e.prefix,r={nextPart:new Map,validators:[]},s=Sy(Object.entries(e.classGroups),n);return s.forEach(function(i){var o=i[0],l=i[1];xl(l,r,o,t)}),r}function xl(e,t,n,r){e.forEach(function(s){if(typeof s=="string"){var i=s===""?t:sd(t,s);i.classGroupId=n;return}if(typeof s=="function"){if(jy(s)){xl(s(r),t,n,r);return}t.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(function(o){var l=o[0],c=o[1];xl(c,sd(t,l),n,r)})})}function sd(e,t){var n=e;return t.split(yc).forEach(function(r){n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n}function jy(e){return e.isThemeGetter}function Sy(e,t){return t?e.map(function(n){var r=n[0],s=n[1],i=s.map(function(o){return typeof o=="string"?t+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],u=l[1];return[t+c,u]})):o});return[r,i]}):e}function Ny(e){if(e<1)return{get:function(){},set:function(){}};var t=0,n=new Map,r=new Map;function s(i,o){n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)}return{get:function(o){var l=n.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return s(o,l),l},set:function(o,l){n.has(o)?n.set(o,l):s(o,l)}}}var sh="!";function Cy(e){var t=e.separator||":",n=t.length===1,r=t[0],s=t.length;return function(o){for(var l=[],c=0,u=0,d,p=0;p<o.length;p++){var g=o[p];if(c===0){if(g===r&&(n||o.slice(p,p+s)===t)){l.push(o.slice(u,p)),u=p+s;continue}if(g==="/"){d=p;continue}}g==="["?c++:g==="]"&&c--}var _=l.length===0?o:o.substring(u),m=_.startsWith(sh),f=m?_.substring(1):_,L=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:f,maybePostfixModifierPosition:L}}}function zy(e){if(e.length<=1)return e;var t=[],n=[];return e.forEach(function(r){var s=r[0]==="[";s?(t.push.apply(t,n.sort().concat([r])),n=[]):n.push(r)}),t.push.apply(t,n.sort()),t}function Ey(e){return{cache:Ny(e.cacheSize),splitModifiers:Cy(e),..._y(e)}}var Ly=/\s+/;function Py(e,t){var n=t.splitModifiers,r=t.getClassGroupId,s=t.getConflictingClassGroupIds,i=new Set;return e.trim().split(Ly).map(function(o){var l=n(o),c=l.modifiers,u=l.hasImportantModifier,d=l.baseClassName,p=l.maybePostfixModifierPosition,g=r(p?d.substring(0,p):d),_=!!p;if(!g){if(!p)return{isTailwindClass:!1,originalClassName:o};if(g=r(d),!g)return{isTailwindClass:!1,originalClassName:o};_=!1}var m=zy(c).join(":"),f=u?m+sh:m;return{isTailwindClass:!0,modifierId:f,classGroupId:g,originalClassName:o,hasPostfixModifier:_}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,u=o.hasPostfixModifier,d=l+c;return i.has(d)?!1:(i.add(d),s(c,u).forEach(function(p){return i.add(l+p)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function Oy(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,s,i,o=l;function l(u){var d=t[0],p=t.slice(1),g=p.reduce(function(_,m){return m(_)},d());return r=Ey(g),s=r.cache.get,i=r.cache.set,o=c,c(u)}function c(u){var d=s(u);if(d)return d;var p=Py(u,r);return i(u,p),p}return function(){return o(vy.apply(null,arguments))}}function Ne(e){var t=function(r){return r[e]||[]};return t.isThemeGetter=!0,t}var ih=/^\[(?:([a-z-]+):)?(.+)\]$/i,My=/^\d+\/\d+$/,Iy=new Set(["px","full","screen"]),Ry=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$y=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Dy=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function At(e){return qn(e)||Iy.has(e)||My.test(e)||yl(e)}function yl(e){return lr(e,"length",Hy)}function Ty(e){return lr(e,"size",ah)}function Fy(e){return lr(e,"position",ah)}function Ay(e){return lr(e,"url",Vy)}function gi(e){return lr(e,"number",qn)}function qn(e){return!Number.isNaN(Number(e))}function Wy(e){return e.endsWith("%")&&qn(e.slice(0,-1))}function rs(e){return id(e)||lr(e,"number",id)}function fe(e){return ih.test(e)}function ss(){return!0}function vn(e){return Ry.test(e)}function Uy(e){return lr(e,"",By)}function lr(e,t,n){var r=ih.exec(e);return r?r[1]?r[1]===t:n(r[2]):!1}function Hy(e){return $y.test(e)}function ah(){return!1}function Vy(e){return e.startsWith("url(")}function id(e){return Number.isInteger(Number(e))}function By(e){return Dy.test(e)}function Gy(){var e=Ne("colors"),t=Ne("spacing"),n=Ne("blur"),r=Ne("brightness"),s=Ne("borderColor"),i=Ne("borderRadius"),o=Ne("borderSpacing"),l=Ne("borderWidth"),c=Ne("contrast"),u=Ne("grayscale"),d=Ne("hueRotate"),p=Ne("invert"),g=Ne("gap"),_=Ne("gradientColorStops"),m=Ne("gradientColorStopPositions"),f=Ne("inset"),L=Ne("margin"),w=Ne("opacity"),h=Ne("padding"),x=Ne("saturate"),v=Ne("scale"),S=Ne("sepia"),z=Ne("skew"),j=Ne("space"),I=Ne("translate"),H=function(){return["auto","contain","none"]},U=function(){return["auto","hidden","clip","visible","scroll"]},R=function(){return["auto",fe,t]},P=function(){return[fe,t]},$=function(){return["",At]},W=function(){return["auto",qn,fe]},C=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},y=function(){return["solid","dashed","dotted","double","none"]},k=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},b=function(){return["start","end","center","between","around","evenly","stretch"]},N=function(){return["","0",fe]},M=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},T=function(){return[qn,gi]},D=function(){return[qn,fe]};return{cacheSize:500,theme:{colors:[ss],spacing:[At],blur:["none","",vn,fe],brightness:T(),borderColor:[e],borderRadius:["none","","full",vn,fe],borderSpacing:P(),borderWidth:$(),contrast:T(),grayscale:N(),hueRotate:D(),invert:N(),gap:P(),gradientColorStops:[e],gradientColorStopPositions:[Wy,yl],inset:R(),margin:R(),opacity:T(),padding:P(),saturate:T(),scale:T(),sepia:N(),skew:D(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[vn]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(C(),[fe])}],overflow:[{overflow:U()}],"overflow-x":[{"overflow-x":U()}],"overflow-y":[{"overflow-y":U()}],overscroll:[{overscroll:H()}],"overscroll-x":[{"overscroll-x":H()}],"overscroll-y":[{"overscroll-y":H()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[f]}],"inset-x":[{"inset-x":[f]}],"inset-y":[{"inset-y":[f]}],start:[{start:[f]}],end:[{end:[f]}],top:[{top:[f]}],right:[{right:[f]}],bottom:[{bottom:[f]}],left:[{left:[f]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",rs]}],basis:[{basis:R()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:N()}],shrink:[{shrink:N()}],order:[{order:["first","last","none",rs]}],"grid-cols":[{"grid-cols":[ss]}],"col-start-end":[{col:["auto",{span:["full",rs]},fe]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[ss]}],"row-start-end":[{row:["auto",{span:[rs]},fe]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal"].concat(b())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(b(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(b(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[h]}],px:[{px:[h]}],py:[{py:[h]}],ps:[{ps:[h]}],pe:[{pe:[h]}],pt:[{pt:[h]}],pr:[{pr:[h]}],pb:[{pb:[h]}],pl:[{pl:[h]}],m:[{m:[L]}],mx:[{mx:[L]}],my:[{my:[L]}],ms:[{ms:[L]}],me:[{me:[L]}],mt:[{mt:[L]}],mr:[{mr:[L]}],mb:[{mb:[L]}],ml:[{ml:[L]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",fe,t]}],"min-w":[{"min-w":["min","max","fit",fe,At]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[vn]},vn,fe]}],h:[{h:[fe,t,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",fe,At]}],"max-h":[{"max-h":[fe,t,"min","max","fit"]}],"font-size":[{text:["base",vn,yl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",gi]}],"font-family":[{font:[ss]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",qn,gi]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",fe,At]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[w]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[w]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(y(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",At]}],"underline-offset":[{"underline-offset":["auto",fe,At]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[w]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(C(),[Fy])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Ty]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Ay]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[w]}],"border-style":[{border:[].concat(y(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[w]}],"divide-style":[{divide:y()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(y())}],"outline-offset":[{"outline-offset":[fe,At]}],"outline-w":[{outline:[At]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:$()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[w]}],"ring-offset-w":[{"ring-offset":[At]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",vn,Uy]}],"shadow-color":[{shadow:[ss]}],opacity:[{opacity:[w]}],"mix-blend":[{"mix-blend":k()}],"bg-blend":[{"bg-blend":k()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",vn,fe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[p]}],saturate:[{saturate:[x]}],sepia:[{sepia:[S]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[w]}],"backdrop-saturate":[{"backdrop-saturate":[x]}],"backdrop-sepia":[{"backdrop-sepia":[S]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[v]}],"scale-x":[{"scale-x":[v]}],"scale-y":[{"scale-y":[v]}],rotate:[{rotate:[rs,fe]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",e]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[At,gi]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var wc=Oy(Gy);function lo(...e){return wc(xc(e))}const oh=Ve.memo(e=>{const{folder:t,depth:n,groupedFolders:r,selectedFolderId:s,draggedFolderId:i,dragOverFolderId:o,onSelect:l,onToggle:c,onCreateSubfolder:u,onRename:d,onDelete:p,onDragStart:g,onDragOver:_,onDrop:m,onContextMenu:f}=e,{t:L}=ke(),w=t.isOpen,h=r[t.id]||[],x=s===t.id;return a.jsxs("div",{className:"select-none",children:[a.jsxs("div",{className:lo("group/folder flex items-center gap-1 py-1 px-2 rounded-lg cursor-pointer transition-all border border-transparent",x?"bg-purple-600/20 text-purple-300 border-purple-500/20":"text-zinc-400 hover:bg-white/5 hover:text-zinc-200",i===t.id&&"opacity-50",o===t.id&&"bg-indigo-500/20 border-indigo-500/50 outline-dashed outline-1 outline-indigo-500/50"),style:{paddingLeft:`${n*12+8}px`},draggable:!0,onDragStart:v=>g(v,"folder",t.id),onClick:()=>l(t.id),onDragOver:v=>_(v,"folder",t.id),onDrop:v=>m(v,"folder",t.id),onContextMenu:v=>f(v,t.id),children:[a.jsx("div",{className:"p-0.5 rounded hover:bg-white/10 transition-colors",onClick:v=>{v.stopPropagation(),c(t.id)},children:h.length>0?w?a.jsx(ra,{size:12}):a.jsx(rl,{size:12}):a.jsx("div",{className:"w-3"})}),w?a.jsx(sl,{size:14,className:lo(x?"text-purple-400":"text-amber-500/80")}):a.jsx(l0,{size:14,className:lo(x?"text-purple-400":"text-amber-500/80")}),a.jsx("span",{className:"text-xs font-bold truncate flex-1",children:t.name}),a.jsx("div",{className:"opacity-0 group-hover/folder:opacity-100 flex items-center gap-0.5 transition-opacity",children:a.jsx("button",{onClick:v=>{v.stopPropagation(),u(t.id)},className:"p-1 hover:text-indigo-400 hover:bg-indigo-500/10 rounded",title:L("warehouse.new_subfolder"),children:a.jsx(il,{size:10})})})]}),w&&h.length>0&&a.jsx("div",{className:"mt-0.5",children:h.map(v=>a.jsx(oh,{...e,folder:v,depth:n+1},v.id))})]})});function ad(...e){return wc(xc(e))}const Ky=Ve.memo(({wand:e,viewMode:t,isMaximized:n,spellDb:r,draggedWandId:s,dragOverWandId:i,dragOverPos:o,wandSmartTags:l,onImport:c,onRename:u,onAddTag:d,onDelete:p,onUpdateTags:g,onDragStart:_,onDragOver:m,onDragLeave:f,onDrop:L,isSelected:w,onClick:h,isConnected:x})=>{const{t:v,i18n:S}=ke(),z=E.useMemo(()=>{const j=[],I=Math.max(e.deck_capacity,...Object.keys(e.spells).map(Number)),H=t==="list"?14:45;for(let U=0;U<Math.min(I,H);U++){const R=e.spells[(U+1).toString()];j.push(R?r[R]:null)}return j},[e.spells,e.deck_capacity,r,t]);return a.jsxs("div",{className:ad("group relative bg-zinc-900 border border-white/5 hover:border-purple-500/50 rounded-lg transition-all hover:bg-zinc-800 shadow-md overflow-visible select-none",t==="list"?"flex items-center gap-3 p-2 h-16":"flex flex-col p-2 gap-2 h-40",s===e.id&&"opacity-30 grayscale",i===e.id&&"ring-2 ring-purple-500 z-10 scale-[1.02]",w&&"ring-2 ring-purple-500 bg-purple-500/10 border-purple-500/50"),draggable:!0,onDragStart:j=>_(j,e.id),onDragOver:j=>m(j,e.id),onDragLeave:f,onDrop:j=>L(j,e.id),onClick:h,children:[i===e.id&&o==="top"&&a.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-purple-500 shadow-[0_0_10px_rgba(168,85,247,1)] z-20"}),i===e.id&&o==="bottom"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-purple-500 shadow-[0_0_10px_rgba(168,85,247,1)] z-20"}),a.jsxs("div",{className:ad("bg-black/40 rounded border border-white/5 overflow-hidden relative transition-all",t==="list"?"w-64 h-full shrink-0":"w-full flex-1 min-h-[80px]"),children:[(()=>{const j=gc(e.appearance);return j?a.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-20 transition-opacity duration-200 pointer-events-none",children:a.jsx("img",{src:j,className:"w-full h-full object-contain image-pixelated p-2",alt:""})}):null})(),a.jsxs("div",{className:"absolute inset-0 flex flex-wrap content-start p-1 gap-0.5 overflow-hidden",children:[z.map((j,I)=>a.jsx("div",{className:"w-5 h-5 shrink-0 flex items-center justify-center relative",children:j?a.jsx("img",{src:Ge(j.icon),className:"w-full h-full object-contain image-pixelated",alt:""}):a.jsx("div",{className:"w-full h-full bg-white/5 rounded-sm"})},I)),e.deck_capacity>z.length&&a.jsxs("span",{className:"text-[9px] text-zinc-600 pl-1",children:["+",e.deck_capacity-z.length]})]}),e.always_cast&&e.always_cast.length>0&&a.jsx("div",{className:"absolute top-0 right-0 bg-blue-500/20 text-blue-300 text-[8px] px-1 rounded-bl",children:"AC"})]}),a.jsxs("div",{className:"flex-none flex flex-col justify-between gap-1 w-full",children:[a.jsx("div",{className:"flex items-start justify-between gap-2 relative",children:a.jsxs("div",{className:"min-w-0 w-full",children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-300 truncate leading-tight group-hover:text-purple-300",children:e.name||v("app.notification.my_wand")}),a.jsxs("div",{className:"hidden group-hover:flex absolute top-full left-0 right-0 mt-1 bg-zinc-900/95 border border-white/10 rounded-lg p-2 flex-col gap-1 z-50 shadow-xl backdrop-blur-md pointer-events-none animate-in fade-in slide-in-from-top-1 duration-200",children:[a.jsx("div",{className:"flex items-center justify-between text-[10px] font-bold text-zinc-400 border-b border-white/5 pb-1 mb-1",children:a.jsx("span",{children:v("settings.categories.wand")})}),a.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 text-[10px] font-mono",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-zinc-500",children:v("wand_stats.mana_max")})," ",a.jsx("span",{className:"text-cyan-400",children:e.mana_max})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-zinc-500",children:v("wand_stats.mana_charge_speed")})," ",a.jsx("span",{className:"text-cyan-400",children:e.mana_charge_speed})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-zinc-500",children:v("wand_stats.fire_rate_wait")})," ",a.jsxs("span",{className:"text-amber-400",children:[e.fire_rate_wait,"s"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-zinc-500",children:v("wand_stats.reload_time")})," ",a.jsxs("span",{className:"text-green-400",children:[e.reload_time,"s"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-zinc-500",children:v("wand_stats.deck_capacity")})," ",a.jsx("span",{className:"text-zinc-300",children:e.deck_capacity})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-zinc-500",children:v("wand_stats.spread_degrees")})," ",a.jsxs("span",{className:"text-zinc-300",children:[e.spread_degrees,""]})]})]}),e.always_cast&&e.always_cast.length>0&&a.jsxs("div",{className:"mt-1 pt-1 border-t border-white/5",children:[a.jsx("span",{className:"text-[9px] text-blue-400 block mb-0.5",children:v("wand_stats.always_casts")}),a.jsx("div",{className:"flex gap-0.5",children:e.always_cast.map((j,I)=>{const H=r[j],U=H?S.language.startsWith("en")&&H.en_name?H.en_name:H.name:j;return H?a.jsx("img",{src:Ge(H.icon),className:"w-4 h-4",title:U},I):null})})]})]})]})}),(e.tags.length>0||l.length>0)&&a.jsxs("div",{className:"flex flex-wrap gap-1 mt-1 h-4 overflow-hidden",children:[l.slice(0,3).map(j=>a.jsx("span",{className:"text-[8px] px-1 rounded bg-amber-500/10 text-amber-500 border border-amber-500/20 truncate max-w-[60px]",children:j.name},j.id)),e.tags.slice(0,3).map(j=>a.jsxs("span",{className:"text-[8px] px-1 rounded bg-zinc-800 text-zinc-400 border border-white/5 truncate max-w-[60px]",children:["#",j]},j))]})]}),a.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-zinc-900/90 rounded-lg border border-white/10 p-0.5 backdrop-blur-sm z-20",children:[a.jsx("button",{onClick:j=>{j.stopPropagation(),c(e)},className:"p-1.5 hover:bg-purple-500 hover:text-white text-zinc-400 rounded transition-colors",title:v("nav.import"),children:a.jsx(Lu,{size:12})}),a.jsx("button",{onClick:j=>{j.stopPropagation(),u(e)},className:"p-1.5 hover:bg-white/20 hover:text-white text-zinc-400 rounded transition-colors",title:v("tabs.rename"),children:a.jsx(Lu,{size:12})}),a.jsx("button",{onClick:j=>{j.stopPropagation(),p(e.id)},className:"p-1.5 hover:bg-red-500 hover:text-white text-zinc-400 rounded transition-colors",title:v("warehouse.delete"),children:a.jsx(Rn,{size:12})})]})]})});function bt(...e){return wc(xc(e))}const Jy="bones_folder";function Qy({isOpen:e,onClose:t,onImportWand:n,spellDb:r,wands:s,setWands:i,folders:o,setFolders:l,smartTags:c,setSmartTags:u,settings:d,isConnected:p,pullBones:g,pushBones:_}){var Qs,Ys;const{t:m,i18n:f}=ke(),[L,w]=E.useState(!1),[h,x]=E.useState(""),[v,S]=E.useState("grid"),[z,j]=E.useState("root"),[I,H]=E.useState("date"),[U,R]=E.useState(50),[P,$]=E.useState([]),[W,C]=E.useState(!1),[y,k]=E.useState(null),[b,N]=E.useState(""),[M,T]=E.useState(new Set);E.useEffect(()=>{if(!y)return;const O=A=>{var B;const V=(B=A.clipboardData)==null?void 0:B.getData("text");if(V)try{try{const q=JSON.parse(V);if(Array.isArray(q)){k(ue=>ue?{...ue,spells:q}:null);return}else if(q.spells&&typeof q.spells=="object"){const ue=Object.values(q.spells);k(te=>te?{...te,spells:ue}:null);return}}catch{}const Q=V.split(/[, \n]+/).map(q=>q.trim()).filter(q=>r[q]);Q.length>0&&k(q=>q?{...q,spells:Q}:null)}catch(Q){console.error("Paste failed",Q)}};return document.addEventListener("paste",O),()=>document.removeEventListener("paste",O)},[y,r]);const[D,F]=E.useState(null),[G,Y]=E.useState(null),[K,Z]=E.useState(null),[ne,he]=E.useState(null),[pe,ae]=E.useState(null),[oe,ce]=E.useState(null);E.useEffect(()=>{R(50),T(new Set)},[z,h,P,I]);const ve=E.useCallback(O=>{const{scrollTop:A,scrollHeight:V,clientHeight:B}=O.currentTarget;V-A-B<200&&R(Q=>Q+50)},[]),se=E.useCallback(O=>{const A=M.has(O)?Array.from(M):[O],V=A.length>1?m("warehouse.delete_multiple_confirm",{count:A.length}):m("warehouse.delete_wand_confirm");if(confirm(V)){const B=new Set(A);i(Q=>Q.filter(q=>!B.has(q.id))),T(Q=>{const q=new Set(Q);return A.forEach(ue=>q.delete(ue)),q})}},[i,m,M]),Re=E.useCallback((O,A)=>{i(V=>V.map(B=>B.id===O?{...B,...A}:B))},[i]),Se=E.useCallback(async O=>{const A=prompt(m("warehouse.rename_wand"),O.name);if(A){let V="",B="";if(!f.language.startsWith("en"))try{const q=await(await fetch("/api/pinyin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:A})})).json();q.success&&(V=q.pinyin,B=q.initials)}catch{}Re(O.id,{name:A,pinyin:V,pinyin_initials:B})}},[Re,m,f.language]),we=E.useCallback(O=>{const A=prompt(m("warehouse.add_tag"));A&&Re(O.id,{tags:[...O.tags,A]})},[Re,m]),ye=E.useCallback(O=>{l(A=>A.map(V=>V.id===O?{...V,isOpen:!V.isOpen}:V))},[l]),$e=E.useCallback((O=null)=>{const A=prompt(m("warehouse.new_folder"));if(A){const V={id:Math.random().toString(36).substring(2,11),name:A,order:o.length,isOpen:!0,parentId:O};l(B=>[...B,V]),O&&l(B=>B.map(Q=>Q.id===O?{...Q,isOpen:!0}:Q))}},[o.length,l,m]),Ke=E.useCallback((O,A)=>{O.stopPropagation(),O.ctrlKey||O.metaKey?T(V=>{const B=new Set(V);return B.has(A)?B.delete(A):B.add(A),B}):T(new Set([A]))},[]),le=E.useCallback(O=>{if(confirm(m("warehouse.delete_folder_confirm"))){const A=(Q,q)=>{const ue=Q.filter(me=>me.parentId===q);let te=ue.map(me=>me.id);return ue.forEach(me=>{te=[...te,...A(Q,me.id)]}),te},V=[O,...A(o,O)],B=new Set(V);l(Q=>Q.filter(q=>!B.has(q.id))),i(Q=>Q.filter(q=>!q.folderId||!B.has(q.folderId))),z&&B.has(z)&&j("root")}},[o,l,i,z,m]),ee=E.useCallback(O=>{const A=o.find(B=>B.id===O);if(!A)return;const V=prompt(m("warehouse.rename_folder"),A.name);V&&l(B=>B.map(Q=>Q.id===O?{...Q,name:V}:Q))},[o,l,m]),We=E.useCallback(O=>{const A=o.find(Pe=>Pe.id===O);if(!A)return;const V=(Pe,Te)=>{const xn=Pe.filter(Vn=>Vn.parentId===Te);return[Te,...xn.flatMap(Vn=>V(Pe,Vn.id))]},B=V(o,O),Q=new Set(B),q=o.filter(Pe=>Q.has(Pe.id)),ue=s.filter(Pe=>Pe.folderId&&Q.has(Pe.folderId)),te=JSON.stringify({wands:ue,folders:q},null,2),me=new Blob([te],{type:"application/json"}),ge=URL.createObjectURL(me),Le=document.createElement("a");Le.href=ge,Le.download=`wand_warehouse_folder_${A.name}_${new Date().toISOString().split("T")[0]}.json`,Le.click(),URL.revokeObjectURL(ge)},[o,s]),Ue=E.useCallback((O,A,V)=>{if(A==="wand"){const B=M.has(V)?Array.from(M):[V];O.dataTransfer.setData("wandIds",JSON.stringify(B)),F(V),Y(null)}else Y(V),F(null);O.dataTransfer.setData("type",A),O.dataTransfer.setData("id",V),O.dataTransfer.effectAllowed="move"},[M]),be=E.useCallback((O,A,V)=>{if(O.preventDefault(),O.stopPropagation(),A==="folder"||A==="root")Z(V),he(null),ae(null);else if(A==="wand"){const B=O.currentTarget.getBoundingClientRect(),q=O.clientY-B.top>B.height/2;he(V),ae(q?"bottom":"top"),s.find(ue=>ue.id===V)}},[s]),gn=E.useCallback((O,A,V)=>{O.preventDefault(),O.stopPropagation();const B=O.dataTransfer.getData("type")||(D?"wand":G?"folder":""),Q=O.dataTransfer.getData("id")||D||G;if(!Q||!B)return;const q=O.dataTransfer.getData("wandIds"),ue=q?JSON.parse(q):[Q];if(B==="wand"){if(A==="folder"||A==="root"){const te=A==="root"?null:V;i(me=>{const ge=new Set(ue),Le=me.filter(Te=>!ge.has(Te.id)),Pe=me.filter(Te=>ge.has(Te.id)).map(Te=>({...Te,folderId:te}));return[...Le,...Pe]}),te&&l(me=>me.map(ge=>ge.id===te?{...ge,isOpen:!0}:ge))}else if(A==="wand"){if(Q===V)return;i(te=>{const me=new Set(ue),ge=te.filter(wt=>me.has(wt.id));if(ge.length===0)return te;const Le=te.find(wt=>wt.id===V);if(!Le)return te;const Pe=te.filter(wt=>!me.has(wt.id));let Te=Pe.findIndex(wt=>wt.id===V);pe==="bottom"&&Te++;const xn=[...Pe],Vn=ge.map(wt=>({...wt,folderId:Le.folderId}));return xn.splice(Te,0,...Vn),xn.map((wt,za)=>({...wt,order:za}))})}}else if(B==="folder"&&(A==="folder"||A==="root")){if(Q===V)return;const te=A==="root"?null:V,me=(ge,Le)=>{const Pe=o.find(Te=>Te.id===ge);return!Pe||!Pe.parentId?!1:Pe.parentId===Le?!0:me(Pe.parentId,Le)};if(te&&(Q===te||me(te,Q)))return;l(ge=>{const Le=ge.find(Te=>Te.id===Q);return Le?[...ge.filter(Te=>Te.id!==Q),{...Le,parentId:te}].map((Te,xn)=>({...Te,order:xn})):ge}),te&&l(ge=>ge.map(Le=>Le.id===te?{...Le,isOpen:!0}:Le))}F(null),Y(null),Z(null),he(null),ae(null)},[D,G,o,l,i,pe]),Et=E.useCallback(async()=>{if(confirm(m("warehouse.pull_bones_confirm")))try{await g(),alert(m("warehouse.pull_bones_success"))}catch{alert(m("warehouse.pull_bones_failed"))}},[m,g]),Gr=E.useCallback(async()=>{if(confirm(m("warehouse.push_bones_confirm")))try{await _(),alert(m("warehouse.push_bones_success"))}catch{alert(m("warehouse.push_bones_failed"))}},[m,_]),st=E.useMemo(()=>{const O={};return s.forEach(A=>{const V=[],B=Math.max(0,...Object.keys(A.spells).map(Number));for(let Q=1;Q<=B;Q++)V.push(A.spells[Q.toString()]||"");for(;V.length>0&&V[V.length-1]==="";)V.pop();O[A.id]=c.filter(Q=>{if(Q.spells.length===0)return!1;if(Q.mode==="strict"){for(let q=0;q<=V.length-Q.spells.length;q++){let ue=!0;for(let te=0;te<Q.spells.length;te++)if(V[q+te]!==Q.spells[te]){ue=!1;break}if(ue)return!0}return!1}else return Q.spells.every(q=>V.includes(q))})}),O},[s,c]),Hn=E.useCallback(O=>st[O]||[],[st]),Ca=E.useMemo(()=>{const O={root:[]};return[...o].sort((V,B)=>(V.order||0)-(B.order||0)).forEach(V=>{const B=V.parentId||"root";O[B]||(O[B]=[]),O[B].push(V)}),O},[o]),nn=E.useMemo(()=>{const O=h.toLowerCase(),A=f.language.startsWith("en");if(O)return s.filter(Q=>{const ue=Hn(Q.id).map(me=>me.name),te=Object.values(Q.spells).some(me=>{const ge=r[me];return ge?!!((A&&ge.en_name?ge.en_name:ge.name).toLowerCase().includes(O)||!A&&((ge.pinyin||"").toLowerCase().includes(O)||vs(O,(ge.pinyin||"").toLowerCase(),(ge.pinyin_initials||"").toLowerCase())||(ge.aliases||"").toLowerCase().includes(O)||vs(O,(ge.alias_pinyin||"").toLowerCase(),(ge.alias_initials||"").toLowerCase()))):!1});return Q.name.toLowerCase().includes(O)||!A&&(Q.pinyin||"").toLowerCase().includes(O)||!A&&vs(O,(Q.pinyin||"").toLowerCase(),(Q.pinyin_initials||"").toLowerCase())||Q.tags.some(me=>me.toLowerCase().includes(O))||ue.some(me=>me.toLowerCase().includes(O))||te}).sort((Q,q)=>q.createdAt-Q.createdAt);const V=z==="root"?null:z;let B=s.filter(Q=>Q.folderId===V);return P.length>0&&(B=B.filter(Q=>{const ue=Hn(Q.id).map(te=>te.name);return P.every(te=>Q.tags.includes(te)||ue.includes(te))})),B.sort((Q,q)=>I==="name"?Q.name.localeCompare(q.name):Q.order!==void 0&&q.order!==void 0&&Q.order!==q.order?Q.order-q.order:q.createdAt-Q.createdAt)},[s,h,z,P,I,Hn,r,f.language]);E.useEffect(()=>{if(!e||y||W)return;const O=A=>{A.target instanceof HTMLInputElement||A.target instanceof HTMLTextAreaElement||(A.key==="Delete"&&M.size>0&&(A.preventDefault(),A.stopPropagation(),se(Array.from(M)[0])),A.key==="a"&&(A.ctrlKey||A.metaKey)&&(A.preventDefault(),A.stopPropagation(),T(new Set(nn.map(V=>V.id)))),A.key==="Escape"&&M.size>0&&T(new Set))};return window.addEventListener("keydown",O,!0),()=>window.removeEventListener("keydown",O,!0)},[e,M,se,nn,y,W]);const Kr={groupedFolders:Ca,selectedFolderId:z,draggedFolderId:G,dragOverFolderId:K,onSelect:j,onToggle:ye,onCreateSubfolder:$e,onRename:ee,onDelete:le,onDragStart:Ue,onDragOver:be,onDrop:gn,onContextMenu:(O,A)=>{O.preventDefault(),O.stopPropagation(),ce({x:O.clientX,y:O.clientY,folderId:A})}},Ks=E.useMemo(()=>{const O=new Set;return s.forEach(A=>A.tags.forEach(V=>O.add(V))),Array.from(O).sort()},[s]),Js=E.useMemo(()=>c.map(O=>O.name).sort(),[c]);return e?a.jsxs("div",{className:bt("fixed inset-y-0 left-0 bg-zinc-950/95 backdrop-blur-xl border-r border-white/10 shadow-2xl z-[400] flex flex-col transition-all duration-300",L?"w-full":"w-[900px] max-w-full"),children:[a.jsxs("div",{className:"h-12 border-b border-white/10 flex items-center justify-between px-4 bg-black/40 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ts,{size:18,className:"text-purple-400"}),a.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-zinc-200",children:m("warehouse.title")}),a.jsx("span",{className:"bg-purple-500/20 text-purple-400 text-[10px] px-1.5 py-0.5 rounded-full font-mono",children:s.length})]}),a.jsxs("div",{className:"flex-1 flex items-center justify-center px-8 gap-4",children:[a.jsxs("div",{className:"relative w-64",children:[a.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:14}),a.jsx("input",{type:"text",placeholder:m("warehouse.search_placeholder"),value:h,onChange:O=>x(O.target.value),className:"w-full bg-zinc-900 border border-white/5 rounded-full pl-9 pr-4 py-1.5 text-xs focus:outline-none focus:border-purple-500/50 transition-colors"})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-zinc-900/50 p-1 rounded-lg border border-white/5",children:[a.jsxs("button",{onClick:()=>$e(z==="root"?null:z),className:"flex items-center gap-1.5 px-3 py-1 bg-zinc-800 hover:bg-zinc-700 hover:text-white text-zinc-400 rounded-md text-[10px] font-bold transition-all",children:[a.jsx(il,{size:14}),m("warehouse.new_folder")]}),a.jsx("div",{className:"w-px h-4 bg-white/10 mx-1"}),a.jsx("button",{onClick:()=>H("date"),className:bt("p-1.5 rounded hover:bg-white/10 transition-colors",I==="date"?"text-purple-400":"text-zinc-500"),title:m("warehouse.sort_by_date"),children:a.jsx(t0,{size:14})}),a.jsx("button",{onClick:()=>H("name"),className:bt("p-1.5 rounded hover:bg-white/10 transition-colors",I==="name"?"text-purple-400":"text-zinc-500"),title:m("warehouse.sort_by_name"),children:a.jsx(e0,{size:14})})]}),z===Jy&&a.jsxs("div",{className:"flex items-center gap-1 bg-amber-500/10 p-1 rounded-lg border border-amber-500/20 animate-in fade-in slide-in-from-left-2 duration-300",children:[a.jsxs("button",{onClick:Et,className:"flex items-center gap-1.5 px-3 py-1 bg-amber-600/20 hover:bg-amber-600/40 text-amber-400 rounded-md text-[10px] font-bold transition-all",title:m("warehouse.pull_bones"),children:[a.jsx(qt,{size:14}),a.jsx("span",{className:"hidden sm:inline",children:m("warehouse.pull_bones")})]}),a.jsx("div",{className:"w-px h-3 bg-amber-500/20 mx-0.5"}),a.jsxs("button",{onClick:Gr,className:"flex items-center gap-1.5 px-3 py-1 bg-amber-600/20 hover:bg-amber-600/40 text-amber-400 rounded-md text-[10px] font-bold transition-all",title:m("warehouse.push_bones"),children:[a.jsx(Li,{size:14}),a.jsx("span",{className:"hidden sm:inline",children:m("warehouse.push_bones")})]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>w(!L),className:"p-2 hover:bg-white/10 rounded-lg text-zinc-500 hover:text-white transition-colors",children:L?a.jsx(ol,{size:16}):a.jsx(h0,{size:16})}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-lg text-zinc-500 hover:text-white transition-colors",children:a.jsx(un,{size:18})})]})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsxs("div",{className:"w-60 border-r border-white/5 bg-black/20 flex flex-col",children:[a.jsx("div",{className:"p-2 border-b border-white/5 flex items-center justify-between",children:a.jsx("span",{className:"text-[10px] font-black uppercase text-zinc-500 tracking-wider pl-2",children:m("warehouse.folders")})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-0.5 custom-scrollbar",onDragOver:O=>be(O,"root","root"),onDrop:O=>gn(O,"root","root"),children:[a.jsxs("div",{className:bt("flex items-center gap-2 py-1.5 px-3 rounded-lg cursor-pointer transition-all mb-1",z==="root"?"bg-purple-600/20 text-purple-300 border border-purple-500/20":"text-zinc-400 hover:bg-white/5 hover:text-zinc-200 border border-transparent",K==="root"&&"bg-indigo-500/20 border-indigo-500/50 outline-dashed outline-1 outline-indigo-500/50"),onClick:()=>j("root"),onDragOver:O=>be(O,"root","root"),onDrop:O=>gn(O,"root","root"),children:[a.jsx(Ts,{size:14}),a.jsx("span",{className:"text-xs font-bold",children:m("warehouse.root_folder")})]}),(Qs=Ca.root)==null?void 0:Qs.map(O=>a.jsx(oh,{...Kr,folder:O,depth:0},O.id)),a.jsxs("div",{className:"mt-4 p-4 border border-dashed border-white/5 rounded-lg text-center text-[10px] text-zinc-600 hover:text-zinc-400 hover:border-white/10 cursor-pointer transition-colors",onClick:()=>$e("root"),children:["+ ",m("warehouse.new_folder")]})]}),a.jsx("div",{className:"p-2 border-t border-white/5",children:a.jsxs("button",{onClick:()=>C(!0),className:"w-full py-2 bg-amber-500/10 hover:bg-amber-500/20 text-amber-500 rounded-lg text-[10px] font-bold flex items-center justify-center gap-2 transition-colors",children:[a.jsx(no,{size:14})," ",m("warehouse.manage_smart_tags")]})})]}),a.jsxs("div",{className:"flex-1 flex flex-col bg-zinc-900/30",children:[a.jsxs("div",{className:"px-4 py-2 flex items-center gap-2 text-xs text-zinc-500 border-b border-white/5",children:[a.jsx(sl,{size:14}),a.jsx("span",{className:"font-bold",children:z==="root"?m("warehouse.root_folder"):((Ys=o.find(O=>O.id===z))==null?void 0:Ys.name)||"???"}),a.jsx("span",{className:"bg-zinc-800 px-1.5 rounded-full text-[10px]",children:m("warehouse.all_wands",{count:nn.length})}),M.size>0&&a.jsx("span",{className:"bg-purple-500/20 text-purple-400 px-1.5 rounded-full text-[10px] font-bold animate-in fade-in zoom-in-95 duration-200",children:m("warehouse.selected_wands",{count:M.size})}),a.jsx("div",{className:"flex-1"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>S("grid"),className:bt("p-1 rounded transition-colors",v==="grid"?"bg-purple-500/20 text-purple-300":"hover:bg-white/5"),children:a.jsx(d0,{size:14})}),a.jsx("button",{onClick:()=>S("list"),className:bt("p-1 rounded transition-colors",v==="list"?"bg-purple-500/20 text-purple-300":"hover:bg-white/5"),children:a.jsx(p0,{size:14})})]})]}),(Ks.length>0||Js.length>0)&&a.jsxs("div",{className:"px-4 py-2 border-b border-white/5 flex flex-wrap gap-1 items-center bg-black/10",children:[a.jsx(o0,{size:12,className:"text-zinc-600 mr-1"}),Js.map(O=>a.jsxs("button",{onClick:()=>$(A=>A.includes(O)?A.filter(V=>V!==O):[...A,O]),className:bt("px-2 py-0.5 rounded text-[9px] font-bold transition-all border flex items-center gap-1",P.includes(O)?"bg-amber-500/20 border-amber-500/50 text-amber-300":"bg-zinc-800 border-white/5 text-zinc-500 hover:text-amber-400/70"),children:[a.jsx(no,{size:10})," ",O]},`smart-${O}`)),Ks.map(O=>a.jsxs("button",{onClick:()=>$(A=>A.includes(O)?A.filter(V=>V!==O):[...A,O]),className:bt("px-2 py-0.5 rounded text-[9px] font-bold transition-all border",P.includes(O)?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-zinc-800 border-white/5 text-zinc-500 hover:text-purple-400/70"),children:["#",O]},`manual-${O}`))]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",onScroll:ve,onDragOver:O=>be(O,"folder",z||"root"),onDrop:O=>gn(O,"folder",z||"root"),onContextMenu:O=>{O.preventDefault(),ce({x:O.clientX,y:O.clientY,folderId:z||"root"})},onClick:()=>T(new Set),children:[nn.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-600 gap-4 opacity-50",children:[a.jsx(sl,{size:48,strokeWidth:1}),a.jsx("p",{className:"text-xs uppercase tracking-widest",children:m("warehouse.empty_folder")})]}):a.jsx("div",{className:bt(v==="grid"?"grid gap-3 grid-cols-[repeat(auto-fill,minmax(180px,1fr))]":"space-y-1"),children:nn.slice(0,U).map(O=>a.jsx(Ky,{wand:O,viewMode:v,isMaximized:L,spellDb:r,draggedWandId:D,dragOverWandId:ne,dragOverPos:pe,wandSmartTags:Hn(O.id),onImport:n,onRename:Se,onAddTag:we,onDelete:se,onUpdateTags:(A,V)=>Re(A,{tags:V}),onDragStart:(A,V)=>Ue(A,"wand",V),onDragOver:(A,V)=>be(A,"wand",V),onDragLeave:()=>{he(null),ae(null)},onDrop:(A,V)=>gn(A,"wand",V),isConnected:p,isSelected:M.has(O.id),onClick:A=>Ke(A,O.id)},O.id))}),nn.length>U&&a.jsxs("div",{className:"py-4 text-center text-[10px] text-zinc-600 italic",children:[m("warehouse.loading_more")," (",U," / ",nn.length,")"]})]}),a.jsxs("div",{className:"p-3 border-t border-white/5 bg-black/20 flex items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:async()=>{if(confirm(m("warehouse.import_yukimi_confirm")))try{const A=await(await fetch("/api/import/wand-editor")).json();A.success?(i(V=>[...V,...A.wands]),l(V=>[...V,...A.folders]),alert(m("warehouse.import_success",{count:A.wands.length}))):alert("Import failed: "+A.error)}catch{alert("Import error")}},className:"text-[10px] text-zinc-500 hover:text-zinc-300 flex items-center gap-1 transition-colors",children:[a.jsx(qt,{size:12})," ",m("warehouse.import_wand_editor")]}),a.jsxs("button",{onClick:async()=>{if(confirm(m("warehouse.import_spell_lab_confirm")))try{const A=await(await fetch("/api/import/spell-lab")).json();A.success?(i(V=>[...V,...A.wands]),l(V=>[...V,...A.folders]),alert(m("warehouse.import_success",{count:A.wands.length}))):alert("Import failed: "+A.error)}catch{alert("Import error")}},className:"text-[10px] text-zinc-500 hover:text-zinc-300 flex items-center gap-1 transition-colors",children:[a.jsx(qt,{size:12})," ",m("warehouse.import_spell_lab")]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("label",{className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 rounded text-[10px] font-bold text-zinc-300 hover:text-white transition-colors cursor-pointer flex items-center gap-2",children:[a.jsx(Li,{size:12}),m("warehouse.restore"),a.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:O=>{var B;const A=(B=O.target.files)==null?void 0:B[0];if(!A)return;const V=new FileReader;V.onload=Q=>{var q,ue;try{const te=JSON.parse((q=Q.target)==null?void 0:q.result);te.wands?(confirm(m("warehouse.backup_detected",{wandCount:te.wands.length,folderCount:((ue=te.folders)==null?void 0:ue.length)||0}))?(i(me=>[...me,...te.wands]),te.folders&&l(me=>[...me,...te.folders]),te.smartTags&&u(me=>[...me,...te.smartTags])):(i(te.wands),te.folders&&l(te.folders),te.smartTags&&u(te.smartTags)),alert("Import success!")):alert("Invalid backup file format")}catch(te){alert("File parsing failed"),console.error(te)}},V.readAsText(A),O.target.value=""}})]}),a.jsxs("button",{onClick:()=>{const O=JSON.stringify({wands:s,folders:o,smartTags:c},null,2),A=new Blob([O],{type:"application/json"}),V=URL.createObjectURL(A),B=document.createElement("a");B.href=V,B.download=`wand_warehouse_backup_${new Date().toISOString().split("T")[0]}.json`,B.click()},className:"px-3 py-1.5 bg-zinc-800 hover:bg-zinc-700 rounded text-[10px] font-bold text-zinc-300 hover:text-white transition-colors flex items-center gap-2",children:[a.jsx(qt,{size:12}),m("warehouse.backup")]})]})]})]})]}),oe&&a.jsxs("div",{className:"fixed z-[1000] bg-zinc-900 border border-white/10 rounded-lg shadow-2xl py-1 w-40 overflow-hidden",style:{left:oe.x,top:oe.y},onClick:()=>ce(null),children:[a.jsxs("button",{onClick:()=>$e(oe.folderId==="root"?null:oe.folderId),className:"w-full px-4 py-2 text-left text-[11px] font-bold text-zinc-300 hover:bg-purple-600 hover:text-white flex items-center gap-2 transition-colors",children:[a.jsx(il,{size:14})," ",m("warehouse.new_subfolder")]}),oe.folderId!=="root"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>We(oe.folderId),className:"w-full px-4 py-2 text-left text-[11px] font-bold text-zinc-300 hover:bg-purple-600 hover:text-white flex items-center gap-2 transition-colors",children:[a.jsx(qt,{size:14})," ",m("warehouse.export_folder")]}),a.jsx("div",{className:"h-px bg-white/5 my-1"}),a.jsxs("button",{onClick:()=>ee(oe.folderId),className:"w-full px-4 py-2 text-left text-[11px] font-bold text-zinc-300 hover:bg-purple-600 hover:text-white flex items-center gap-2 transition-colors",children:[a.jsx(Ou,{size:14})," ",m("warehouse.rename_folder")]}),a.jsxs("button",{onClick:()=>le(oe.folderId),className:"w-full px-4 py-2 text-left text-[11px] font-bold text-red-400 hover:bg-red-600 hover:text-white flex items-center gap-2 transition-colors",children:[a.jsx(Rn,{size:14})," ",m("warehouse.delete")]})]})]}),oe&&a.jsx("div",{className:"fixed inset-0 z-[900]",onClick:()=>ce(null)}),W&&a.jsxs("div",{className:"absolute inset-0 z-[500] bg-zinc-950 flex flex-col animate-in slide-in-from-bottom duration-300",children:[a.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between bg-black/40",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(no,{size:18,className:"text-amber-400"}),a.jsx("h2",{className:"text-sm font-black uppercase tracking-widest",children:m("warehouse.smart_tags_title")})]}),a.jsx("button",{onClick:()=>C(!1),className:"p-2 hover:bg-white/10 rounded-lg text-zinc-500 hover:text-white transition-colors",children:a.jsx(un,{size:18})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[a.jsxs("button",{onClick:()=>k({id:Math.random().toString(36).substring(2,11),name:m("warehouse.new_smart_tag"),spells:[],mode:"strict"}),className:"w-full py-3 bg-amber-500/10 border border-amber-500/20 text-amber-400 rounded-xl text-xs font-black uppercase tracking-widest flex items-center justify-center gap-2 hover:bg-amber-500/20 transition-all",children:[a.jsx(Wr,{size:16})," ",m("warehouse.new_smart_tag")]}),a.jsx("div",{className:"space-y-2",children:c.length===0?a.jsx("div",{className:"text-center py-10 text-zinc-600 text-xs italic",children:m("warehouse.no_smart_tags")}):c.map(O=>a.jsxs("div",{className:"bg-zinc-900 border border-white/5 rounded-xl p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-bold text-zinc-200",children:O.name}),a.jsx("span",{className:bt("text-[10px] px-2 py-0.5 rounded-full font-black uppercase tracking-tighter",O.mode==="strict"?"bg-red-500/10 text-red-400":"bg-blue-500/10 text-blue-400"),children:O.mode==="strict"?m("warehouse.strict_order"):m("warehouse.contains")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{const A=JSON.stringify([O],null,2),V=new Blob([A],{type:"application/json"}),B=URL.createObjectURL(V),Q=document.createElement("a");Q.href=B,Q.download=`smart_tag_${O.name}.json`,Q.click(),URL.revokeObjectURL(B)},className:"p-2 hover:bg-white/5 rounded text-zinc-500 hover:text-amber-400 transition-colors",title:m("warehouse.export_tag"),children:a.jsx(qt,{size:14})}),a.jsx("button",{onClick:()=>k({...O}),className:"p-2 hover:bg-white/5 rounded text-zinc-500 hover:text-white transition-colors",children:a.jsx(Ou,{size:14})}),a.jsx("button",{onClick:()=>{confirm(m("warehouse.delete_smart_tag_confirm"))&&u(A=>A.filter(V=>V.id!==O.id))},className:"p-2 hover:bg-red-500/10 rounded text-zinc-500 hover:text-red-400 transition-colors",children:a.jsx(Rn,{size:14})})]})]}),a.jsx("div",{className:"flex flex-wrap gap-1",children:O.spells.map((A,V)=>{const B=r[A];return a.jsx("div",{className:"w-8 h-8 bg-black/40 border border-white/5 rounded flex items-center justify-center overflow-hidden",children:B&&a.jsx("img",{src:Ge(B.icon),className:"w-6 h-6 image-pixelated",alt:"",title:B.name})},V)})})]},O.id))})]}),a.jsxs("div",{className:"p-4 bg-black/40 border-t border-white/10 flex gap-2",children:[a.jsxs("label",{className:"flex-1 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg text-[10px] font-black uppercase tracking-widest text-zinc-400 hover:text-white flex items-center justify-center gap-2 transition-all cursor-pointer",children:[a.jsx(Li,{size:14})," ",m("warehouse.import_plans"),a.jsx("input",{type:"file",className:"hidden",accept:".json",multiple:!0,onChange:async O=>{const A=O.target.files;if(!A||A.length===0)return;const V=[];for(let B=0;B<A.length;B++)try{const Q=await A[B].text(),q=JSON.parse(Q),ue=Array.isArray(q)?q:[q];V.push(...ue)}catch{console.error("Failed to parse file",A[B].name)}V.length>0&&u(B=>{const Q=new Set(B.map(ue=>ue.id)),q=[];return V.forEach(ue=>{ue.id&&ue.name&&!Q.has(ue.id)&&(q.push(ue),Q.add(ue.id))}),q.length>0?(alert(m("warehouse.import_tags_success",{count:q.length})),[...B,...q]):(alert(m("warehouse.import_tags_none")),B)}),O.target.value=""}})]}),a.jsxs("button",{onClick:()=>{const O=JSON.stringify(c,null,2),A=new Blob([O],{type:"application/json"}),V=URL.createObjectURL(A),B=document.createElement("a");B.href=V,B.download="smart_tags_backup.json",B.click()},className:"flex-1 py-2 bg-zinc-800 hover:bg-zinc-700 rounded-lg text-[10px] font-black uppercase tracking-widest text-zinc-400 hover:text-white flex items-center justify-center gap-2 transition-all",children:[a.jsx(qt,{size:14})," ",m("warehouse.export_plans")]})]})]}),y&&a.jsxs("div",{className:"absolute inset-0 z-[600] bg-zinc-950 flex flex-col animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-white/10 flex items-center justify-between bg-black/40",children:[a.jsx("h2",{className:"text-sm font-black uppercase tracking-widest",children:m("warehouse.edit_smart_tag")}),a.jsx("button",{onClick:()=>k(null),className:"p-2 hover:bg-white/10 rounded-lg text-zinc-500 hover:text-white transition-colors",children:a.jsx(un,{size:18})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:m("warehouse.tag_name")}),a.jsx("input",{type:"text",value:y.name,onChange:O=>k({...y,name:O.target.value}),className:"w-full bg-zinc-900 border border-white/10 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-amber-500/50 transition-all",placeholder:m("warehouse.combination_placeholder")})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:m("warehouse.match_mode")}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{onClick:()=>k({...y,mode:"strict"}),className:bt("py-3 rounded-xl border text-[10px] font-black uppercase tracking-widest transition-all",y.mode==="strict"?"bg-red-500/10 border-red-500/50 text-red-400":"bg-zinc-900 border-white/5 text-zinc-500 hover:border-white/20"),children:m("warehouse.strict_order")}),a.jsx("button",{onClick:()=>k({...y,mode:"contains"}),className:bt("py-3 rounded-xl border text-[10px] font-black uppercase tracking-widest transition-all",y.mode==="contains"?"bg-blue-500/10 border-blue-500/50 text-blue-400":"bg-zinc-900 border-white/5 text-zinc-500 hover:border-white/20"),children:m("warehouse.contains")})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest flex items-center gap-2",children:[a.jsx("span",{children:m("warehouse.spell_combination")}),a.jsxs("span",{className:"text-zinc-700 font-normal",children:["| ",m("warehouse.smart_tag_edit_tip")]})]})}),a.jsx("div",{className:"bg-black/40 p-3 rounded-xl border border-white/10 overflow-x-auto custom-scrollbar",children:a.jsx("div",{className:"flex gap-1 min-w-max",children:Array.from({length:26}).map((O,A)=>{const V=y.spells[A],B=V?r[V]:null;return a.jsxs("button",{onClick:()=>{},onContextMenu:Q=>{Q.preventDefault();const q=[...y.spells];for(;q.length<=A;)q.push("");q[A]="",k({...y,spells:q})},className:bt("w-10 h-10 rounded border flex items-center justify-center relative group transition-all shrink-0",B?"bg-zinc-800 border-zinc-600 hover:border-amber-500":"bg-white/5 border-white/5 hover:bg-white/10 hover:border-white/20"),title:(B==null?void 0:B.name)||m("warehouse.empty_slot_tip"),children:[B&&a.jsx("img",{src:Ge(B.icon),className:"w-8 h-8 image-pixelated",alt:""}),a.jsx("div",{className:"absolute top-0.5 right-0.5 w-1.5 h-1.5 rounded-full bg-zinc-700/50"})]},A)})})})]}),a.jsxs("div",{className:"space-y-3 pt-4 border-t border-white/5",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Fs,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:12}),a.jsx("input",{type:"text",placeholder:m("warehouse.search_spells"),value:b,className:"w-full bg-zinc-900 border border-white/5 rounded-lg pl-9 pr-4 py-2 text-[10px] focus:outline-none focus:border-white/20",onChange:O=>N(O.target.value)})]}),a.jsx("div",{className:"grid grid-cols-8 gap-1.5 max-h-48 overflow-y-auto custom-scrollbar p-1",children:Object.values(r).filter(O=>{const A=b.toLowerCase();return O.name.toLowerCase().includes(A)||(O.en_name||"").toLowerCase().includes(A)}).slice(0,200).map(O=>a.jsx("button",{onClick:()=>{const A=[...y.spells];let V=!1;for(let B=0;B<26;B++)if(!A[B]){A[B]=O.id,V=!0;break}!V&&A.length<26&&A.push(O.id),k({...y,spells:A})},className:"aspect-square bg-black/40 border border-white/5 rounded hover:border-amber-500/50 transition-all flex items-center justify-center group",title:O.name,children:a.jsx("img",{src:Ge(O.icon),className:"w-7 h-7 image-pixelated group-hover:scale-110 transition-transform",alt:""})},O.id))})]})]}),a.jsxs("div",{className:"p-4 bg-black/40 border-t border-white/10 flex gap-3",children:[a.jsx("button",{onClick:()=>k(null),className:"flex-1 py-3 bg-zinc-800 hover:bg-zinc-700 text-zinc-400 rounded-xl text-xs font-black uppercase tracking-widest transition-all",children:m("warehouse.cancel")}),a.jsx("button",{onClick:()=>{y&&(u(O=>{const A={...y,spells:y.spells.filter(B=>B&&B.trim()!=="")},V=O.findIndex(B=>B.id===A.id);if(V>=0){const B=[...O];return B[V]=A,B}return[...O,A]}),k(null))},className:"flex-[2] py-3 bg-amber-600 hover:bg-amber-500 text-white rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-lg shadow-amber-900/20",children:m("warehouse.save_smart_tag")})]})]})]}):null}function Yy({settings:e,setSettings:t}){const{t:n}=ke(),[r,s]=E.useState(!1),i=E.useRef({x:0,y:0}),o=E.useRef(e.dragModeTogglePos||{x:window.innerWidth-180,y:window.innerHeight-100}),l=E.useRef(null);if(E.useEffect(()=>{if(!e.showDragModeToggle)return;const d=g=>{if(!r)return;const _=g.clientX-i.current.x,m=g.clientY-i.current.y,f=Math.max(10,Math.min(window.innerWidth-150,_)),L=Math.max(10,Math.min(window.innerHeight-60,m));o.current={x:f,y:L},l.current&&(l.current.style.left=`${f}px`,l.current.style.top=`${L}px`,l.current.style.bottom="auto",l.current.style.right="auto")},p=()=>{r&&(s(!1),t(g=>({...g,dragModeTogglePos:o.current})))};return window.addEventListener("mousemove",d),window.addEventListener("mouseup",p),()=>{window.removeEventListener("mousemove",d),window.removeEventListener("mouseup",p)}},[r,e.showDragModeToggle,t]),!e.showDragModeToggle)return null;const c=d=>{var g;s(!0);const p=(g=l.current)==null?void 0:g.getBoundingClientRect();p&&(i.current={x:d.clientX-p.left,y:d.clientY-p.top})},u=e.dragModeTogglePos?{left:e.dragModeTogglePos.x,top:e.dragModeTogglePos.y}:{bottom:"100px",right:"40px"};return a.jsxs("div",{ref:l,className:"fixed z-[5000] flex items-center bg-zinc-900/90 backdrop-blur-md border border-white/10 rounded-xl p-1 shadow-2xl select-none",style:u,children:[a.jsx("div",{className:"px-1.5 py-3 cursor-grab active:cursor-grabbing text-zinc-500 hover:text-zinc-300 transition-colors",onMouseDown:c,children:a.jsx(u0,{size:16})}),a.jsxs("div",{className:"flex bg-black/40 rounded-lg p-1 gap-1",children:[a.jsx("button",{onClick:()=>t(d=>({...d,editorDragMode:"cursor"})),className:`
            flex items-center justify-center w-10 h-10 rounded-md transition-all
            ${e.editorDragMode==="cursor"?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"text-zinc-500 hover:text-zinc-300 hover:bg-white/5"}
          `,title:n("settings.drag_mode_cursor"),children:a.jsx(m0,{size:18})}),a.jsx("button",{onClick:()=>t(d=>({...d,editorDragMode:"hand"})),className:`
            flex items-center justify-center w-10 h-10 rounded-md transition-all
            ${e.editorDragMode==="hand"?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"text-zinc-500 hover:text-zinc-300 hover:bg-white/5"}
          `,title:n("settings.drag_mode_hand"),children:a.jsx(Ef,{size:18})})]})]})}function qy({pickerConfig:e,setPickerConfig:t,pickerSearch:n,setPickerSearch:r,pickSpell:s,searchResults:i,spellStats:o,settings:l,setSettings:c,pickerExpandedGroups:u,setPickerExpandedGroups:d,isConnected:p,isSettingsOpen:g,setIsSettingsOpen:_,importAllData:m,exportAllData:f,tabMenu:L,setTabMenu:w,tabs:h,setTabs:x,toggleSync:v,exportWorkflow:S,conflict:z,activeTab:j,resolveConflict:I,isHistoryOpen:H,setIsHistoryOpen:U,spellDb:R,jumpToPast:P,jumpToFuture:$,undo:W,redo:C,isWarehouseOpen:y,setIsWarehouseOpen:k,warehouseWands:b,setWarehouseWands:N,warehouseFolders:M,setWarehouseFolders:T,smartTags:D,setSmartTags:F,performAction:G,activeTabId:Y,syncWand:K,setNotification:Z,dragSource:ne,mousePos:he,isDraggingFile:pe,setSelection:ae,onReloadSpells:oe,pullBones:ce,pushBones:ve}){var Re,Se;const{t:se}=ke();return a.jsxs(a.Fragment,{children:[a.jsx(hy,{pickerConfig:e,onClose:()=>t(null),pickerSearch:n,setPickerSearch:r,pickSpell:s,searchResults:i,spellStats:o,settings:l,pickerExpandedGroups:u,setPickerExpandedGroups:d,isConnected:p}),a.jsx(gy,{isOpen:g,onClose:()=>_(!1),settings:l,setSettings:c,onImport:m,onExport:f,onReloadSpells:oe}),L&&a.jsxs("div",{className:"fixed z-[200] w-48 bg-zinc-900 border border-white/10 rounded-lg shadow-2xl py-1 animate-in fade-in zoom-in duration-100",style:{top:L.y,left:L.x},onClick:we=>we.stopPropagation(),children:[a.jsx("div",{className:"px-3 py-1.5 border-b border-white/5 mb-1",children:a.jsx("span",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-widest",children:se("tabs.workflow_options")})}),a.jsxs("button",{onClick:()=>{v(L.tabId),w(null)},className:"w-full px-3 py-2 text-left text-xs text-zinc-300 hover:bg-white/5 flex items-center gap-2",children:[a.jsx(ln,{size:12,className:(Re=h.find(we=>we.id===L.tabId))!=null&&Re.isRealtime?"text-green-500":"text-zinc-500"}),(Se=h.find(we=>we.id===L.tabId))!=null&&Se.isRealtime?se("tabs.off_sync"):se("tabs.on_sync")]}),a.jsxs("button",{onClick:()=>{const we=h.find($e=>$e.id===L.tabId),ye=prompt(se("app.notification.renamed_workflow"),we==null?void 0:we.name);ye&&x($e=>$e.map(Ke=>Ke.id===L.tabId?{...Ke,name:ye}:Ke)),w(null)},className:"w-full px-3 py-2 text-left text-xs text-zinc-300 hover:bg-white/5 flex items-center gap-2",children:[a.jsx(Gs,{size:12,className:"text-zinc-500"})," ",se("tabs.rename")]}),a.jsxs("button",{onClick:()=>{S(L.tabId),w(null)},className:"w-full px-3 py-2 text-left text-xs text-zinc-300 hover:bg-white/5 flex items-center gap-2",children:[a.jsx(qt,{size:12,className:"text-zinc-500"})," ",se("tabs.export_json")]}),a.jsx("div",{className:"h-px bg-white/5 my-1"}),a.jsxs("button",{onClick:()=>{k(!0),w(null)},className:"w-full px-3 py-2 text-left text-xs text-zinc-300 hover:bg-white/5 flex items-center justify-between group",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ts,{size:12,className:"text-indigo-400"})," ",se("tabs.open_warehouse")]}),a.jsx("span",{className:"text-[9px] text-zinc-500 font-mono group-hover:text-zinc-400",children:"Ctrl+B"})]}),a.jsxs("button",{onClick:()=>{U(!0),w(null)},className:"w-full px-3 py-2 text-left text-xs text-zinc-300 hover:bg-white/5 flex items-center justify-between group",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Lf,{size:12,className:"text-indigo-400"})," ",se("tabs.open_history")]}),a.jsx("span",{className:"text-[9px] text-zinc-500 font-mono group-hover:text-zinc-400",children:"Ctrl+H"})]}),a.jsxs("button",{onClick:()=>{confirm(se("tabs.clear_history_confirm"))&&x(we=>we.map(ye=>ye.id===L.tabId?{...ye,past:[],future:[]}:ye)),w(null)},className:"w-full px-3 py-2 text-left text-xs text-red-400 hover:bg-red-400/10 flex items-center gap-2",children:[a.jsx(Rn,{size:12})," ",se("tabs.clear_history")]})]}),a.jsx(xy,{conflict:z,activeTab:j,onResolve:we=>I(we,z,j)}),a.jsx(yy,{isOpen:H,onClose:()=>U(!1),activeTab:j,spellDb:R,onJumpPast:P,onJumpFuture:$,onUndo:W,onRedo:C,isConnected:p}),a.jsx(Qy,{isOpen:y,onClose:()=>k(!1),spellDb:R,wands:b,setWands:N,folders:M,setFolders:T,smartTags:D,setSmartTags:F,settings:l,isConnected:p,pullBones:ce,pushBones:ve,onImportWand:we=>{const ye=(Math.max(0,...Object.keys(j.wands).map(Number))+1).toString();G($e=>({...$e,[ye]:{...we}}),se("app.notification.imported_from_warehouse",{name:we.name})),x($e=>$e.map(Ke=>Ke.id===Y?{...Ke,expandedWands:new Set([...Ke.expandedWands,ye])}:Ke)),j.isRealtime&&K(ye,we),Z({msg:se("app.notification.imported_wand_success",{name:we.name}),type:"success"})}}),a.jsx(Yy,{settings:l,setSettings:c}),ne&&R[ne.sid]&&a.jsx("div",{className:"fixed pointer-events-none z-[1000] w-12 h-12",style:{left:he.x+5,top:he.y+5},children:a.jsx("img",{src:Ge(R[ne.sid].icon),className:"w-full h-full image-pixelated border-2 border-indigo-500 rounded bg-zinc-900/80 shadow-2xl animate-pulse",alt:""})}),pe&&a.jsx("div",{className:"fixed inset-0 z-[2000] bg-indigo-500/20 backdrop-blur-sm border-4 border-dashed border-indigo-500 flex items-center justify-center pointer-events-none animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-zinc-900 px-8 py-4 rounded-2xl shadow-2xl border border-white/10 flex flex-col items-center gap-4",children:[a.jsx(qt,{size:48,className:"text-indigo-400 animate-bounce"}),a.jsx("p",{className:"text-xl font-black uppercase tracking-widest text-indigo-100",children:se("app.notification.drop_to_import")}),a.jsx("p",{className:"text-zinc-400 text-sm",children:se("app.notification.import_formats")})]})})]})}const od="twwe_settings",Xy="wand2h_settings",Zy=()=>{const[e,t]=E.useState(()=>{const n=localStorage.getItem(od)||localStorage.getItem(Xy),r={commonLimit:20,categoryLimit:20,allowCompactEdit:!1,pickerRowHeight:32,themeColors:["from-blue-500/10 to-blue-600/20","from-green-500/10 to-green-600/20","from-purple-500/10 to-purple-600/20","from-orange-500/10 to-orange-600/20"],wrapLimit:21,hideLabels:!1,conflictStrategy:"ask",autoExpandOnPaste:!0,defaultWandStats:{},numCasts:3,autoHideThreshold:20,showSpellCharges:!1,unlimitedSpells:!0,initialIfHalf:!0,simulateLowHp:!1,simulateManyEnemies:!1,simulateManyProjectiles:!1,evaluationSeed:"",groupIdenticalCasts:!0,foldNodes:!0,showIndices:!0,editorSpellGap:6,showStatsInFrames:!0,showLegacyWandButton:!1,deleteEmptySlots:!0,exportHistory:!0,embedMetadataInImage:!0,pureSpellsExport:!1,showDragModeToggle:!0,editorDragMode:"cursor",useNoitaSwapLogic:!1,spellTypes:Qg,spellGroups:Yg,warehouseFolderHeight:200,wikiLanguage:"en",stopAtRecharge:!0};if(n)try{const s=JSON.parse(n);return{...r,...s,defaultWandStats:s.defaultWandStats||{}}}catch(s){console.error("Failed to load settings from localStorage:",s)}return r});return E.useEffect(()=>{localStorage.setItem(od,JSON.stringify(e))},[e]),{settings:e,setSettings:t}},ew=({activeTab:e,activeTabId:t,tabs:n,settings:r,spellDb:s,dragSource:i,pickerConfig:o,notification:l,setTabs:c,setActiveTabId:u,setIsHistoryOpen:d,setIsWarehouseOpen:p,setSelection:g,setIsSelecting:_,setDragSource:m,setMousePos:f,setIsDraggingFile:L,setNotification:w,setTabMenu:h,selectionRef:x,hoveredSlotRef:v,importFromText:S,copyToClipboard:z,pasteFromClipboard:j,readMetadataFromPng:I,insertEmptySlot:H,updateWand:U})=>{const{t:R}=ke();E.useEffect(()=>{if(l){const $=setTimeout(()=>w(null),4e3);return()=>clearTimeout($)}},[l,w]),E.useEffect(()=>{const $=C=>{h(null),C.target.closest(".glass-card")||g(null)},W=C=>{C.target instanceof HTMLInputElement||C.target instanceof HTMLTextAreaElement||C.preventDefault(),h(null)};return window.addEventListener("click",$),window.addEventListener("contextmenu",W),()=>{window.removeEventListener("click",$),window.removeEventListener("contextmenu",W)}},[g,h]),E.useEffect(()=>{const $=W=>{i&&f({x:W.clientX,y:W.clientY})};return window.addEventListener("mousemove",$),()=>window.removeEventListener("mousemove",$)},[i,f]),E.useEffect(()=>{const $=()=>{_(!1),i&&m(null)},W=async N=>{var M,T;if(!(N.target instanceof HTMLInputElement||N.target instanceof HTMLTextAreaElement)){if(N.ctrlKey||N.metaKey)if(N.key==="h")N.preventDefault(),d(D=>!D);else if(N.key==="b")N.preventDefault(),p(D=>!D);else if(N.key==="a"){const D=((M=x.current)==null?void 0:M.wandSlot)||Object.keys(e.wands).find(F=>e.expandedWands.has(F));if(D){N.preventDefault();const F=e.wands[D];if(F){const G=Array.from({length:F.deck_capacity},(Y,K)=>K+1);g({wandSlot:D,indices:G,startIdx:1})}}}else N.key==="c"?(N.preventDefault(),z()):N.key==="x"?(N.preventDefault(),z(!0)):N.key==="v"&&(N.preventDefault(),j());else if(N.key==="Delete"||N.key==="Backspace"){const D=x.current,F=v.current;let G=null,Y=[];if(D&&F&&F.wandSlot===D.wandSlot&&D.indices.includes(F.idx)?(G=D.wandSlot,Y=D.indices):F&&F.wandSlot?(G=F.wandSlot,Y=[F.idx]):D&&D.indices.length>0&&(G=D.wandSlot,Y=D.indices),G){N.preventDefault();const K=e.wands[G];if(K)if(r.deleteEmptySlots&&N.key==="Delete"){const Z=new Set(Y.filter(ne=>ne<=K.deck_capacity));if(Z.size>0){const ne={},he={};let pe=1;for(let oe=1;oe<=K.deck_capacity;oe++)Z.has(oe)||(K.spells[oe.toString()]&&(ne[pe.toString()]=K.spells[oe.toString()],((T=K.spell_uses)==null?void 0:T[oe.toString()])!==void 0&&(he[pe.toString()]=K.spell_uses[oe.toString()])),pe++);const ae=Math.max(1,K.deck_capacity-Z.size);U(G,{spells:ne,spell_uses:he,deck_capacity:ae},R("app.notification.delete_wand_slot")),g(null)}}else{const Z={...K.spells},ne={...K.spell_uses||{}};Y.forEach(he=>{delete Z[he],delete ne[he]}),U(G,{spells:Z,spell_uses:ne},R("app.notification.delete_spell"))}}}else N.key===" "&&(N.target instanceof HTMLInputElement||N.target instanceof HTMLTextAreaElement||(N.preventDefault(),H()));N.key==="Escape"&&g(null)}},C=async N=>{var D,F;const M=N.target instanceof HTMLInputElement||N.target instanceof HTMLTextAreaElement,T=Array.from(((D=N.clipboardData)==null?void 0:D.items)||[]);for(const G of T)if(G.type.startsWith("image/")){const Y=G.getAsFile();if(Y){const K=await I(Y);if(K&&(K.includes("{{Wand2")||K.includes("{{Wand"))){N.preventDefault(),await S(K);return}}}if(!M){const G=(F=N.clipboardData)==null?void 0:F.getData("text/plain").trim();G&&await S(G)&&N.preventDefault()}},y=async N=>{var D,F;N.preventDefault(),L(!1);const M=Array.from(((D=N.dataTransfer)==null?void 0:D.files)||[]);if(M.length>0){for(const G of M){if(G.type.startsWith("image/")){const Y=await I(G);if(Y&&(Y.includes("{{Wand2")||Y.includes("{{Wand"))){await S(Y),w({msg:R("app.notification.imported_from_image"),type:"success"});continue}}if(G.name.endsWith(".json")){const Y=new FileReader;Y.onload=K=>{var Z;try{const ne=JSON.parse((Z=K.target)==null?void 0:Z.result),he=Date.now().toString(),pe=G.name.replace(".json",""),ae=ne&&ne.type==="twwe_workflow"&&ne.wands,oe=ae?ne.wands:ne;c(ce=>[...ce,{id:he,name:ae&&ne.name||pe,isRealtime:!1,wands:oe,expandedWands:new Set(Object.keys(oe)),past:ae?ne.past||[]:[],future:ae?ne.future||[]:[]}]),u(he),w({msg:R("app.notification.imported_workflow_name",{name:pe}),type:"success"})}catch(ne){console.error("Drop import failed:",ne)}},Y.readAsText(G)}}return}const T=Array.from(((F=N.dataTransfer)==null?void 0:F.items)||[]);for(const G of T)G.kind==="string"&&G.type==="text/plain"&&G.getAsString(async Y=>{await S(Y)&&w({msg:R("app.notification.imported_from_text"),type:"success"})})},k=N=>{N.preventDefault(),L(!0)},b=N=>{N.preventDefault(),(N.clientX<=0||N.clientY<=0||N.clientX>=window.innerWidth||N.clientY>=window.innerHeight)&&L(!1)};return window.addEventListener("mouseup",$),window.addEventListener("keydown",W),window.addEventListener("paste",C),window.addEventListener("drop",y),window.addEventListener("dragover",k),window.addEventListener("dragleave",b),()=>{window.removeEventListener("mouseup",$),window.removeEventListener("keydown",W),window.removeEventListener("paste",C),window.removeEventListener("drop",y),window.removeEventListener("dragover",k),window.removeEventListener("dragleave",b)}},[e,t,r,s,i,c,u,d,p,g,_,m,f,L,w,x,v,S,z,j,I,H,U,R]);const P=E.useRef(!1);E.useEffect(()=>{if(P.current)return;const $=new URLSearchParams(window.location.search);let W=$.get("wand")||$.get("data");if(W){if(P.current=!0,window.history.replaceState({},"",window.location.pathname),!W.startsWith("{{")&&!W.includes(","))try{W=atob(W)}catch{}S(W)}},[])},tw=e=>{const{t,i18n:n}=ke(),[r,s]=E.useState({}),i=E.useCallback(async()=>{let c={};try{const u=await zf();u&&u.spells&&Object.entries(u.spells).forEach(([d,p])=>{c[d]={...p,id:d,is_mod:!0,icon:p.icon_base64||p.icon}})}catch(u){console.error("Failed to load mod bundle from IndexedDB:",u)}try{const d=await(await fetch("/api/fetch-spells")).json();if(d.success&&d.spells){const p={};return Object.entries(d.spells).forEach(([g,_])=>{p[g]={..._,id:g}}),s({...p,...c}),!0}}catch{console.log("API fetch-spells failed, trying static...")}try{const d=await(await fetch("./static_data/spells.json")).json();return s({...d,...c}),!0}catch(u){return console.error("Failed to fetch spells from anywhere:",u),!1}},[]),o=E.useMemo(()=>{const c={},u=d=>d.toLowerCase().replace(/\[\[|\]\]/g,"").split("|")[0].replace(/[^a-z0-9\u4e00-\u9fa5]/g,"").trim();return Object.entries(r).forEach(([d,p])=>{var _;const g=u(d);if(g&&(c[g]=d),d.includes("_")){const m=d.toLowerCase().replace(/_/g,"");m&&(c[m]=d)}if(p.name){const m=u(p.name);m&&(c[m]=d)}if(p.en_name){const m=u(p.en_name);m&&(c[m]=d)}(_=p.aliases)==null||_.split(",").forEach(m=>{const f=u(m);f&&(c[f]=d)})}),c},[r]),l=E.useCallback(async c=>{if(e){c({msg:t("app.notification.syncing_mod_spells"),type:"info"});try{const d=await(await fetch("/api/sync-game-spells")).json();d.success?(await i(),c({msg:t("app.notification.sync_mod_spells_success",{count:d.count}),type:"success"})):c({msg:t("app.notification.sync_failed_with_error",{error:d.error}),type:"info"})}catch{c({msg:t("app.notification.sync_failed"),type:"info"})}}},[e,t,i]);return E.useEffect(()=>{const c=Object.values(r);if(c.length===0)return;const u=setTimeout(()=>{c.forEach(d=>{const p=new Image;p.src=d.icon_base64||Ge(d.icon)})},1e3);return()=>clearTimeout(u)},[r,e]),E.useEffect(()=>{i()},[i]),{spellDb:r,spellNameToId:o,fetchSpellDb:i,syncGameSpells:l}},ld=async e=>new Promise(t=>{const n=new FileReader;n.onload=async r=>{var l;const s=(l=r.target)==null?void 0:l.result;if(!s)return t(null);const i=new DataView(s);if(i.byteLength<8||i.getUint32(0)!==2303741511||i.getUint32(4)!==218765834)return t(null);let o=8;for(;o<i.byteLength&&!(o+8>i.byteLength);){const c=i.getUint32(o),u=String.fromCharCode(i.getUint8(o+4),i.getUint8(o+5),i.getUint8(o+6),i.getUint8(o+7));if(u==="tEXt"){const d=new Uint8Array(s,o+8,c),p=new TextDecoder().decode(d),[g,..._]=p.split("\0"),m=_.join("\0");if(g==="Wand2Data"||g==="Wand2")return t(m)}else if(u==="iTXt"){const d=new Uint8Array(s,o+8,c),p=new TextDecoder().decode(d);if(p.includes("{{Wand2")){const g=p.indexOf("{{Wand2"),_=p.lastIndexOf("}}")+2;if(g!==-1&&_>g)return t(p.substring(g,_))}}o+=c+12}t(null)},n.readAsArrayBuffer(e)}),nw=({activeTab:e,activeTabId:t,spellDb:n,spellNameToId:r,settings:s,t:i,performAction:o,updateWand:l,syncWand:c,setTabs:u,setActiveTabId:d,setNotification:p,hoveredSlotRef:g,selectionRef:_})=>{const m=E.useCallback((h,x)=>{const v=j=>({mana_max:Math.round(j.mana_max),mana_charge_speed:Math.round(j.mana_charge_speed),reload_time:j.reload_time,fire_rate_wait:j.fire_rate_wait,deck_capacity:j.deck_capacity,actions_per_round:j.actions_per_round,shuffle_deck_when_empty:j.shuffle_deck_when_empty,spread_degrees:Math.round((j.spread_degrees||0)*100)/100,speed_multiplier:Math.round((j.speed_multiplier||1)*100)/100,spells:Object.fromEntries(Object.entries(j.spells).filter(([I,H])=>!!H)),always_cast:j.always_cast||[],appearance:j.appearance?{sprite:j.appearance.sprite,item_sprite:j.appearance.item_sprite}:void 0}),S=JSON.stringify(v(h)),z=JSON.stringify(v(x));return S===z},[]),f=E.useCallback(async(h,x)=>{var P,$,W;if(h.includes("?spells=")||h.includes("&spells=")){const C=new URL(h.startsWith("http")?h:`http://x.com/${h}`),y=C.searchParams.get("spells");if(y){const k=y.split(",").filter(M=>!!M),b=(x==null?void 0:x.slot)||((P=g.current)==null?void 0:P.wandSlot)||(Math.max(0,...Object.keys(e.wands).map(Number))+1).toString(),N={...Je,mana_max:parseFloat(C.searchParams.get("mana_max")||"400"),mana_charge_speed:parseFloat(C.searchParams.get("mana_charge_speed")||"10"),reload_time:parseInt(C.searchParams.get("reload_time")||"0"),fire_rate_wait:parseInt(C.searchParams.get("cast_delay")||"0"),deck_capacity:parseInt(C.searchParams.get("deck_capacity")||"10"),actions_per_round:parseInt(C.searchParams.get("actions_per_round")||"1"),shuffle_deck_when_empty:C.searchParams.get("shuffle_deck_when_empty")==="true",spells:k.reduce((M,T,D)=>({...M,[(D+1).toString()]:T}),{})};return o(M=>({...M,[b]:N}),i("app.notification.import_from_url")),!0}}const v=h.includes("{{Wand2"),S=h.includes("{{Wand")&&!v,z=v||S,j=h.includes(",")||Object.keys(n).some(C=>h.includes(C));if(!z&&!j)return!1;const I=C=>C.toLowerCase().replace(/\[\[|\]\]/g,"").split("|")[0].replace(/[^a-z0-9\u4e00-\u9fa5]/g,"").trim();let H=x==null?void 0:x.slot,U=x==null?void 0:x.idx;if(!H&&g.current){H=g.current.wandSlot;const C=g.current.idx;if(C<0){const y=-C-1,k=h.split(",").map(b=>b.trim()).filter(b=>!!b).map(b=>{const N=I(b);return r[N]||b.toUpperCase()});return k.length>0?(o(b=>{const N={...b},M={...N[H]},T=[...M.always_cast||[]],D=y+(g.current.isRightHalf?1:0);return T.splice(D,0,...k),M.always_cast=T,N[H]=M,e.isRealtime&&c(H,M),N},i("app.notification.paste_to_always_cast")),!0):!1}U=C+(g.current.isRightHalf?1:0)}else!H&&_.current&&(H=_.current.wandSlot,U=Math.min(..._.current.indices));if(!H||!U){if(z){const C=D=>{const F=new RegExp(`\\|\\s*${D}\\s*=\\s*([^|\\n}]+)`),G=h.match(F);return G?G[1].trim():null},y={},k=[];let b=0;if(v){const D=C("spells");(D?D.split(",").map(Y=>Y.trim()):[]).forEach((Y,K)=>{if(Y){const Z=I(Y);y[(K+1).toString()]=r[Z]||Y.toUpperCase()}}),b=parseInt(C("capacity")||"0")||Je.deck_capacity;const G=C("alwaysCasts")||C("always_cast");G&&G.split(",").forEach(Y=>{const K=Y.trim();if(K){const Z=I(K);k.push(r[Z]||K.toUpperCase())}})}else{b=parseInt(C("capacity")||"0")||Je.deck_capacity;for(let F=1;F<=Math.max(b,100);F++){const G=C(`spell${F}`);if(G){const Y=I(G),K=r[Y];K&&(y[F.toString()]=K)}}const D=C("alwaysCasts")||C("always_cast");D&&D.split(",").forEach(F=>{const G=I(F.trim()),Y=r[G];Y&&k.push(Y)})}const N={...Je,shuffle_deck_when_empty:(($=C("shuffle"))==null?void 0:$.toLowerCase())==="yes"||C("shuffle")==="true"||C("shuffle")==="",actions_per_round:parseInt(C("spellsCast")||(v?"1":""))||parseInt(C("spellsPerCast")||"1")||Je.actions_per_round,mana_max:parseFloat(C("manaMax")||"0")||Je.mana_max,mana_charge_speed:parseFloat(C("manaCharge")||"0")||Je.mana_charge_speed,reload_time:Math.round(parseFloat(C("rechargeTime")||"0")*60)||Je.reload_time,fire_rate_wait:Math.round(parseFloat(C("castDelay")||"0")*60)||Je.fire_rate_wait,deck_capacity:b,spread_degrees:parseFloat(C("spread")||"0")||Je.spread_degrees,speed_multiplier:parseFloat(C("speed")||"1")||Je.speed_multiplier,spells:y,always_cast:k,appearance:(()=>{const D=C("wandPic")||C("wand_file");return D?td(D)||{sprite:D}:void 0})()},M=Object.keys(e.wands).find(D=>m(e.wands[D],N));if(M)return o(D=>{const F={},G=Object.entries(D).sort(([K],[Z])=>Number(K)-Number(Z));F[1]=D[M];let Y=2;for(const[K,Z]of G)K!==M&&(F[Y.toString()]=Z,Y++);return F},i("app.notification.move_existing_wand_to_top")),p({msg:i("app.notification.wand_already_exists_moving_to_top"),type:"info"}),d(t),window.scrollTo({top:0,behavior:"smooth"}),!0;const T=(Math.max(0,...Object.keys(e.wands).map(Number))+1).toString();return o(D=>({...D,[T]:N}),i("app.notification.create_new_wand_from_paste",{slot:T})),e.isRealtime&&c(T,N),u(D=>D.map(F=>F.id===t?{...F,expandedWands:new Set([...F.expandedWands,T])}:F)),p({msg:i("app.notification.pasted_new_wand",{slot:T}),type:"success"}),!0}return!1}const R=e.wands[H]||{...Je};if(z){const C=M=>{const T=new RegExp(`\\|\\s*${M}\\s*=\\s*([^|\\n}]+)`),D=h.match(T);return D?D[1].trim():null},y={},k=[];let b=R.deck_capacity;if(v){const M=C("spells");(M?M.split(",").map(F=>F.trim()):[]).forEach((F,G)=>{if(F){const Y=I(F);y[(G+1).toString()]=r[Y]||F.toUpperCase()}}),b=parseInt(C("capacity")||"0")||b;const D=C("alwaysCasts")||C("always_cast");D&&D.split(",").forEach(F=>{const G=F.trim();if(G){const Y=I(G);k.push(r[Y]||G.toUpperCase())}})}else{b=parseInt(C("capacity")||"0")||b;for(let T=1;T<=Math.max(b,100);T++){const D=C(`spell${T}`);if(D){const F=I(D),G=r[F];G&&(y[T.toString()]=G)}}const M=C("alwaysCasts")||C("always_cast");M&&M.split(",").forEach(T=>{const D=I(T.trim()),F=r[D];F&&k.push(F)})}const N={shuffle_deck_when_empty:((W=C("shuffle"))==null?void 0:W.toLowerCase())==="yes"||C("shuffle")==="true"||C("shuffle")==="",actions_per_round:parseInt(C("spellsCast")||(v?"1":""))||parseInt(C("spellsPerCast")||"1")||R.actions_per_round,mana_max:parseFloat(C("manaMax")||"0")||R.mana_max,mana_charge_speed:parseFloat(C("manaCharge")||"0")||R.mana_charge_speed,reload_time:Math.round(parseFloat(C("rechargeTime")||"0")*60)||R.reload_time,fire_rate_wait:Math.round(parseFloat(C("castDelay")||"0")*60)||R.fire_rate_wait,deck_capacity:b,spread_degrees:parseFloat(C("spread")||"0")||R.spread_degrees,speed_multiplier:parseFloat(C("speed")||"1")||R.speed_multiplier,always_cast:k,appearance:(()=>{const M=C("wandPic")||C("wand_file");return M?td(M)||{sprite:M}:R.appearance})()};return l(H,{...N,spells:y},i("app.notification.paste_wand_data"),Object.values(y)),!0}else{const C=h.split(",").map(Y=>Y.trim()).map(Y=>{const K=I(Y);return r[K]||Y.toUpperCase()}),y=[],k=Math.max(R.deck_capacity,...Object.keys(R.spells).map(Number));for(let Y=1;Y<=k;Y++)y.push(R.spells[Y.toString()]||null);const b=U-1;y[b]===null?y.splice(b,1):y[b-1]===null&&(y.splice(b-1,1),U--);const N=y.slice(0,U-1),M=y.slice(U-1),T=[...N,...C,...M],D={};T.forEach((Y,K)=>{Y&&(D[(K+1).toString()]=Y)});let F=R.deck_capacity;const G=T.reduce((Y,K,Z)=>K!==null?Z+1:Y,0);return G>R.deck_capacity&&(s.autoExpandOnPaste||confirm(i("app.notification.insert_exceed_capacity_confirm",{lastIdx:G,capacity:R.deck_capacity})))&&(F=G),l(H,{spells:D,deck_capacity:F},i("app.notification.insert_spell_sequence"),C.filter(Y=>Y)),!0}},[n,s,t,e,r,o,c,i,l,g,_]),L=E.useCallback(async(h=!1)=>{let x,v;const S=_.current,z=g.current;if(S&&z&&z.wandSlot===S.wandSlot&&S.indices.includes(z.idx))x=S.wandSlot,v=S.indices;else if(z&&z.wandSlot)x=z.wandSlot,v=[z.idx];else if(S)x=S.wandSlot,v=S.indices;else return;const j=e.wands[x];if(!j)return;const I=[...v].sort((R,P)=>R-P);let H="";const U=I.map(R=>R<0?j.always_cast[-R-1]||"":j.spells[R.toString()]||"");if(!(U.length===1&&!U[0]&&!h)){if(I.length>=j.deck_capacity&&I.length>1){const R=Zf(j.appearance);let P=["{{Wand2"];P.push("| wandCard     = Yes"),R&&P.push(`| wandPic      = ${R}`),j.shuffle_deck_when_empty&&P.push("| shuffle      = Yes"),j.actions_per_round!==1&&P.push(`| spellsCast   = ${j.actions_per_round}`),P.push(`| castDelay    = ${(j.fire_rate_wait/60).toFixed(2)}`),P.push(`| rechargeTime = ${(j.reload_time/60).toFixed(2)}`),P.push(`| manaMax      = ${j.mana_max.toFixed(2)}`),P.push(`| manaCharge   = ${j.mana_charge_speed.toFixed(2)}`),P.push(`| capacity     = ${j.deck_capacity}`),P.push(`| spread       = ${j.spread_degrees}`),P.push(`| speed        = ${j.speed_multiplier.toFixed(2)}`),j.always_cast&&j.always_cast.length>0&&P.push(`| alwaysCasts  = ${j.always_cast.join(",")}`),P.push(`| spells       = ${U.join(",")}`),P.push("}}"),H=P.join(`
`)}else H=U.join(",");if(H!==void 0&&(await navigator.clipboard.writeText(H),p({msg:i(h?"app.notification.cut_to_clipboard":"app.notification.copied_to_clipboard"),type:"success"}),h)){const R={...j.spells},P={...j.spell_uses||{}};v.forEach($=>{delete R[$.toString()],delete P[$.toString()]}),l(x,{spells:R,spell_uses:P},i("app.notification.cut_spell"),U.filter($=>$))}}},[e,_,g,i,p,l]),w=E.useCallback(async h=>{try{const x=await navigator.clipboard.read();for(const v of x){if(v.types.includes("image/png")){const S=await v.getType("image/png"),z=new File([S],"pasted.png",{type:"image/png"}),j=await ld(z);if(j&&(j.includes("{{Wand2")||j.includes("{{Wand")))return await f(j,h)}if(v.types.includes("text/plain")){const z=(await(await v.getType("text/plain")).text()).trim();if(z)return await f(z,h)}}}catch{const v=(await navigator.clipboard.readText()).trim();if(v)return f(v,h)}return!1},[f]);return{importFromText:f,copyToClipboard:L,pasteFromClipboard:w,readMetadataFromPng:ld}},rw=({activeTab:e,activeTabId:t,settings:n,setTabs:r,performAction:s,setNotification:i,setConflict:o,t:l,lastLocalUpdateRef:c})=>{const[u,d]=E.useState(!1),p=E.useRef(!1),g=E.useRef({}),_=E.useCallback(async()=>{try{const v=await(await fetch("/api/status")).json();d(v.connected)}catch{d(!1)}},[]),m=E.useCallback(async(x,v,S=!1)=>{if(!(!e.isRealtime||!u))try{await fetch("/api/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slot:parseInt(x),delete:S,...v||{}})})}catch{}},[e.isRealtime,u]),f=E.useCallback(async(x=!1)=>{if(!(!x&&Date.now()-c.current<3e3))try{const S=await(await fetch("/api/pull")).json();if(S.success){const z=S.wands||{},j=g.current[t],I=e.wands,H=j&&JSON.stringify(z)!==JSON.stringify(j),U=j&&JSON.stringify(I)!==JSON.stringify(j),R=JSON.stringify(z)===JSON.stringify(I),P=($,W,C)=>{s(()=>W,C,[],x),g.current[$]=JSON.parse(JSON.stringify(W))};if(R){g.current[t]=JSON.parse(JSON.stringify(z));return}if(x){P(t,z,l("app.notification.force_pull_game_data"));return}if(H&&U)if(n.conflictStrategy==="override_game")Object.entries(I).forEach(([$,W])=>m($,W)),g.current[t]=JSON.parse(JSON.stringify(I)),i({msg:l("app.notification.auto_sync_web_over_game"),type:"success"});else if(n.conflictStrategy==="new_workflow"){const $=Date.now().toString();r(W=>[...W,{id:$,name:`[] ${e.name}`,isRealtime:!1,wands:z,expandedWands:new Set(Object.keys(z)),past:[],future:[]}]),g.current[t]=JSON.parse(JSON.stringify(I)),i({msg:l("app.notification.auto_sync_game_to_new"),type:"info"})}else o({tabId:t,gameWands:z});else if(U&&!H)e.isRealtime&&Object.entries(I).forEach(([$,W])=>m($,W)),g.current[t]=JSON.parse(JSON.stringify(I));else if(H&&!U){if(!x&&Date.now()-c.current<5e3)return;P(t,z,l("app.notification.sync_from_game"))}else j||P(t,z,l("app.notification.initial_sync"))}}catch{}},[t,e.wands,e.isRealtime,e.name,u,n,l,s,i,o,m,c,r]),L=E.useCallback((x,v,S)=>{if(x==="web")Object.entries(S.wands).forEach(([z,j])=>m(z,j)),g.current[v.tabId]=JSON.parse(JSON.stringify(S.wands)),o(null);else if(x==="game")s(()=>v.gameWands,l("app.notification.force_pull_game_data")),g.current[v.tabId]=JSON.parse(JSON.stringify(v.gameWands)),o(null);else if(x==="both"){const z=Date.now().toString();r(j=>[...j,{id:z,name:`[] ${S.name}`,isRealtime:!1,wands:v.gameWands,expandedWands:new Set(Object.keys(v.gameWands)),past:[],future:[]}]),g.current[v.tabId]=JSON.parse(JSON.stringify(S.wands)),o(null)}},[m,s,r,l,o]),w=E.useCallback(async()=>{if(!u){i({msg:l("app.notification.not_connected_to_game"),type:"info"});return}const x=e.wands,v=Object.entries(x);if(v.length!==0)try{for(const[S,z]of v)await fetch("/api/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slot:parseInt(S),delete:!1,...z})});i({msg:l("app.notification.pushed_to_game",{count:v.length}),type:"success"})}catch{i({msg:l("app.notification.push_failed"),type:"info"})}},[e.wands,u,l,i]),h=E.useCallback(x=>{r(v=>v.map(S=>S.id===x?{...S,isRealtime:!S.isRealtime}:S))},[r]);return E.useEffect(()=>{{d(!1);return}},[_]),E.useEffect(()=>{let x;return e.isRealtime&&u&&(x=setInterval(()=>f(),1e3)),()=>clearInterval(x)},[e.isRealtime,u,f]),E.useEffect(()=>{u&&!p.current&&(g.current={},e.isRealtime&&f(!0)),p.current=u},[u,e.isRealtime,f]),{isConnected:u,syncWand:m,pullData:f,pushAllToGame:w,toggleSync:h,resolveConflict:L}},sw=(e,t)=>{const{t:n}=ke(),[r,s]=E.useState(()=>{const m=localStorage.getItem("twwe_tabs")||localStorage.getItem("wand2h_tabs");if(m)try{const f=JSON.parse(m);if(Array.isArray(f)&&f.length>0)return f.map(L=>({...L,expandedWands:new Set(L.expandedWands||[]),past:Array.isArray(L.past)?L.past:[],future:Array.isArray(L.future)?L.future:[]}))}catch(f){console.error("Failed to load tabs from localStorage:",f)}return[{id:"1",name:n("tabs.realtime"),isRealtime:!0,wands:{1:{...Je}},expandedWands:new Set(["1"]),past:[],future:[]},{id:"2",name:n("tabs.sandbox"),isRealtime:!1,wands:{1:{...Je}},expandedWands:new Set(["1"]),past:[],future:[]}]}),[i,o]=E.useState("1"),l=E.useMemo(()=>r.find(m=>m.id===i)||r[0],[r,i]);E.useEffect(()=>{const m=r.map(f=>({...f,expandedWands:Array.from(f.expandedWands)}));localStorage.setItem("twwe_tabs",JSON.stringify(m))},[r]);const c=E.useCallback(()=>{const m=Date.now().toString(),f={...Je,...e.defaultWandStats},L={id:m,name:n("app.notification.new_workflow_default",{id:r.length+1}),isRealtime:!1,wands:{1:f},expandedWands:new Set(["1"]),past:[],future:[]};s([...r,L]),o(m)},[r,e.defaultWandStats,n]),u=E.useCallback((m,f)=>{if(f&&f.stopPropagation(),r.length<=1)return;const L=r.filter(w=>w.id!==m);s(L),i===m&&o(L[0].id)},[r,i]),d=E.useCallback(()=>{const m={version:"1.0",timestamp:Date.now(),settings:e,tabs:r.map(h=>{const x={...h,expandedWands:Array.from(h.expandedWands)};return e.exportHistory||(x.past=[],x.future=[]),x})},f=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),L=URL.createObjectURL(f),w=document.createElement("a");w.href=L,w.download=`twwe_full_backup_${new Date().toISOString().split("T")[0]}.json`,w.click()},[r,e]),p=E.useCallback(m=>{var w;const f=(w=m.target.files)==null?void 0:w[0];if(!f||!confirm(n("app.notification.import_backup_confirm")))return;const L=new FileReader;L.onload=h=>{var x;try{const v=JSON.parse((x=h.target)==null?void 0:x.result);if(v.settings&&t(v.settings),v.tabs){const S=v.tabs.map(z=>({...z,expandedWands:new Set(z.expandedWands)}));s(S),S.length>0&&o(S[0].id)}alert(n("app.notification.import_all_success"))}catch{alert(n("app.notification.import_failed_format"))}},L.readAsText(f),m.target.value=""},[n,t]),g=E.useCallback(m=>{var w;const f=(w=m.target.files)==null?void 0:w[0];if(!f)return;const L=new FileReader;L.onload=h=>{var x;try{const v=JSON.parse((x=h.target)==null?void 0:x.result),S=Date.now().toString(),z=f.name.replace(".json",""),j=v&&v.type==="twwe_workflow"&&v.wands,I=j?v.wands:v,H=j?v.past||[]:[],U=j?v.future||[]:[];s(R=>[...R,{id:S,name:j&&v.name||z,isRealtime:!1,wands:I,expandedWands:new Set(Object.keys(I)),past:H,future:U}]),o(S)}catch{alert(n("app.notification.import_failed_generic"))}},L.readAsText(f),m.target.value=""},[]),_=E.useCallback(m=>{const f=m?r.find(v=>v.id===m):l;if(!f)return;let L=f.wands;e.exportHistory&&(L={type:"twwe_workflow",name:f.name,wands:f.wands,past:f.past,future:f.future});const w=new Blob([JSON.stringify(L,null,2)],{type:"application/json"}),h=URL.createObjectURL(w),x=document.createElement("a");x.href=h,x.download=`wand_workflow_${f.name}.json`,x.click()},[r,l,e.exportHistory]);return{tabs:r,setTabs:s,activeTabId:i,setActiveTabId:o,activeTab:l,addNewTab:c,deleteTab:u,exportAllData:d,importAllData:p,importWorkflow:g,exportWorkflow:_}},iw=e=>{const{activeTab:t,settings:n,performAction:r,syncWand:s}=e,{t:i}=ke(),[o,l]=E.useState(null),[c,u]=E.useState(!1),[d,p]=E.useState(null),[g,_]=E.useState(!1),[m,f]=E.useState({x:0,y:0}),[L,w]=E.useState(null),h=E.useRef(L);E.useEffect(()=>{h.current=L},[L]);const x=E.useRef(o);E.useEffect(()=>{x.current=o},[o]);const v=E.useCallback((U,R,P=!1)=>{const $=n.editorDragMode==="hand";if(P||$&&!P){const W=t.wands[U],C=R<0?W==null?void 0:W.always_cast[-R-1]:W==null?void 0:W.spells[R.toString()];C&&p({wandSlot:U,idx:R,sid:C})}P||$||R<0||(u(!0),l({wandSlot:U,indices:[R],startIdx:R}))},[t.wands,n.editorDragMode]),S=E.useCallback((U,R)=>{if(d){const P=d.wandSlot,$=d.idx,W=U,C=R;r(y=>{var D,F,G,Y,K,Z,ne,he,pe;const k={...y},b={...k[P]},N=$<0?b.always_cast[-$-1]:b.spells[$.toString()],M=$<0||(D=b.spell_uses)==null?void 0:D[$.toString()];if($<0){const ae=[...b.always_cast||[]];ae.splice(-$-1,1),b.always_cast=ae}else{const ae={...b.spells},oe={...b.spell_uses||{}};delete ae[$.toString()],delete oe[$.toString()],b.spells=ae,b.spell_uses=oe}const T=P===W?b:{...k[W]};if(C===-1e3||C<0){const ae=[...T.always_cast||[]];if(C===-1e3)ae.push(N);else{const oe=-C-1,ce=((F=h.current)==null?void 0:F.wandSlot)===W&&((G=h.current)==null?void 0:G.idx)===C&&((Y=h.current)==null?void 0:Y.isRightHalf);ae.splice(oe+(ce?1:0),0,N)}T.always_cast=ae}else if(n.useNoitaSwapLogic){const ae=T.spells[C.toString()],oe=(K=T.spell_uses)==null?void 0:K[C.toString()],ce={...T.spells},ve={...T.spell_uses||{}};if(ce[C.toString()]=N,M!==void 0?ve[C.toString()]=M:delete ve[C.toString()],T.spells=ce,T.spell_uses=ve,$>=0){const se=P===W?T:b,Re={...se.spells},Se={...se.spell_uses||{}};ae?(Re[$.toString()]=ae,oe!==void 0?Se[$.toString()]=oe:delete Se[$.toString()]):(delete Re[$.toString()],delete Se[$.toString()]),se.spells=Re,se.spell_uses=Se}else ae&&(T.always_cast=[...T.always_cast,ae]);C>T.deck_capacity&&(T.deck_capacity=C)}else{const ae=((Z=h.current)==null?void 0:Z.wandSlot)===W&&((ne=h.current)==null?void 0:ne.idx)===C&&((he=h.current)==null?void 0:he.isRightHalf),oe=C+(ae?1:0),ce=Math.max(T.deck_capacity,...Object.keys(T.spells).map(Number),P===W?$:0),ve=[];for(let ye=1;ye<=ce;ye++)P===W&&ye===$||ve.push({sid:T.spells[ye.toString()]||"",uses:(pe=T.spell_uses)==null?void 0:pe[ye.toString()]});let se=oe;P===W&&$>=0&&$<oe&&se--,ve.splice(Math.max(0,se-1),0,{sid:N,uses:M});const Re={},Se={};ve.forEach((ye,$e)=>{ye.sid&&(Re[($e+1).toString()]=ye.sid,ye.uses!==void 0&&(Se[($e+1).toString()]=ye.uses))}),T.spells=Re,T.spell_uses=Se;const we=ve.reduce((ye,$e,Ke)=>$e.sid!==""?Ke+1:ye,0);we>T.deck_capacity&&(T.deck_capacity=we)}return k[P]=b,P!==W&&(k[W]=T),t.isRealtime&&(s(P,b),P!==W&&s(W,T)),k},i("app.notification.move_spell"),[d.sid]),p(null)}u(!1)},[d,t.isRealtime,n.useNoitaSwapLogic,r,s,i]),z=E.useCallback((U,R)=>{if(c&&o&&o.wandSlot===U){const P=o.startIdx,$=R,W=Math.min(P,$),C=Math.max(P,$),y=[];for(let k=W;k<=C;k++)y.push(k);l({...o,indices:y})}},[c,o]),j=E.useCallback((U,R,P)=>{const $=U.currentTarget.getBoundingClientRect(),W=U.clientX>$.left+$.width/2;w({wandSlot:R,idx:P,isRightHalf:W})},[]),I=E.useCallback(()=>{w(null)},[]),H=E.useCallback(U=>{var D;let R=(D=h.current)==null?void 0:D.wandSlot,P=h.current&&h.current.idx>0?h.current.idx+(h.current.isRightHalf?1:0):null;if(!R&&x.current&&(R=x.current.wandSlot,P=Math.min(...x.current.indices.filter(F=>F>0))),!R||P===null||P<=0)return;const $=t.wands[R];if(!$)return;const W=[],C=Math.max($.deck_capacity,...Object.keys($.spells).map(Number));for(let F=1;F<=C;F++)W.push($.spells[F.toString()]||null);const y=W.slice(0,P-1),k=W.slice(P-1),b=[...y,null,...k],N={};b.forEach((F,G)=>{F&&(N[(G+1).toString()]=F)});let M=$.deck_capacity;const T=b.reduce((F,G,Y)=>G!==null?Y+1:F,0);T>$.deck_capacity&&(M=T),U(R,{spells:N,deck_capacity:M},i("app.notification.insert_empty_slot"))},[t.wands,i]);return{selection:o,setSelection:l,selectionRef:x,isSelecting:c,setIsSelecting:u,dragSource:d,setDragSource:p,isDraggingFile:g,setIsDraggingFile:_,mousePos:m,setMousePos:f,hoveredSlot:L,setHoveredSlot:w,hoveredSlotRef:h,handleSlotMouseDown:v,handleSlotMouseUp:S,handleSlotMouseEnter:z,handleSlotMouseMove:j,handleSlotMouseLeave:I,insertEmptySlot:H}},aw=(e,t,n)=>{const[r,s]=E.useState({}),i=E.useRef({}),o=E.useRef({}),l=E.useRef({}),c=E.useCallback(async(u,d,p,g=!1)=>{const _=`${u}-${d}`;try{s(f=>({...f,[_]:{...f[_]||{data:null,id:0},loading:!0}}));const m=await oy(p,t,n,u,d,g);m&&m.id>=(o.current[_]||0)&&(o.current[_]=m.id,s(f=>({...f,[_]:{data:m.data,id:m.id,loading:!1}})))}catch(m){console.error("Evaluation failed:",m),s(f=>({...f,[_]:{...f[_]||{data:null,id:0},loading:!1}}))}},[t.numCasts,t.unlimitedSpells,t.initialIfHalf,t.simulateLowHp,t.simulateManyEnemies,t.simulateManyProjectiles,t.evaluationSeed,t.foldNodes,t.stopAtRecharge,n]);return E.useEffect(()=>{!e||!e.expandedWands||e.expandedWands.forEach(u=>{const d=e.wands[u];if(!d)return;const p=`${e.id}-${u}`,g=JSON.stringify({wand:d,numCasts:t.numCasts,unlimited:t.unlimitedSpells,ifHalf:t.initialIfHalf,lowHp:t.simulateLowHp,manyEnemies:t.simulateManyEnemies,manyProjectiles:t.simulateManyProjectiles,seed:t.evaluationSeed,fold:t.foldNodes,stopAtRecharge:t.stopAtRecharge});l.current[p]!==g&&(i.current[p]&&clearTimeout(i.current[p]),i.current[p]=setTimeout(()=>{l.current[p]=g,c(e.id,u,d)},500))})},[e.wands,e.expandedWands,e.id,c,t]),{evalResults:r,requestEvaluation:c}},ow=(e,t,n)=>{const{i18n:r}=ke(),[s,i]=E.useState(""),[o,l]=E.useState(new Set),c=E.useMemo(()=>{const d={};e.forEach(f=>{f.wands&&Object.values(f.wands).forEach(L=>{!L||!L.spells||Object.values(L.spells).forEach(w=>{d[w]=(d[w]||0)+1})})});const p=(f,L,w=!1)=>{const h=[...f].sort((x,v)=>(d[v.id]||0)-(d[x.id]||0));return w?h:h.slice(0,L)},g=Object.values(t),_=p(g,n.commonLimit,o.has(-1)),m=n.spellGroups.map((f,L)=>{const w=g.filter(h=>f.types.includes(h.type));return p(w,n.categoryLimit,o.has(L))});return{overall:_,categories:m}},[e,t,n.commonLimit,n.categoryLimit,n.spellGroups,o]),u=E.useMemo(()=>{if(!s)return null;const d=s.toLowerCase().replace(/[^a-z0-9]/g,"");if(!d)return null;const p=Object.values(t),g=r.language.startsWith("en"),_=p.map(m=>{let f=0;const L=m.id.toLowerCase(),w=m.name.toLowerCase(),h=(m.en_name||"").toLowerCase(),x=(m.pinyin||"").toLowerCase(),v=(m.pinyin_initials||"").toLowerCase(),S=(m.aliases||"").toLowerCase(),z=(m.alias_pinyin||"").toLowerCase(),j=(m.alias_initials||"").toLowerCase();return L===d?f+=100:w===d?f+=90:h===d?f+=85:S.includes(d)?f+=80:L.startsWith(d)?f+=70:w.startsWith(d)?f+=65:h.startsWith(d)?f+=60:!g&&v.startsWith(d)?f+=55:!g&&x.startsWith(d)?f+=50:!g&&vs(d,x,v)?f+=48:!g&&j.startsWith(d)?f+=45:!g&&z.startsWith(d)?f+=40:!g&&vs(d,z,j)?f+=38:L.includes(d)?f+=30:w.includes(d)?f+=25:h.includes(d)?f+=20:!g&&v.includes(d)?f+=15:!g&&x.includes(d)?f+=10:!g&&j.includes(d)?f+=8:!g&&z.includes(d)&&(f+=5),{spell:m,score:f}}).filter(m=>m.score>0);return _.sort((m,f)=>f.score-m.score||m.spell.id.localeCompare(f.spell.id)),[_.map(m=>m.spell)]},[s,t,r.language]);return{pickerSearch:s,setPickerSearch:i,pickerExpandedGroups:o,setPickerExpandedGroups:l,spellStats:c,searchResults:u}},lw=e=>{const{t}=ke(),[n,r]=E.useState(!1),[s,i]=E.useState(()=>{const _=localStorage.getItem("twwe_warehouse");return _?JSON.parse(_):[]}),[o,l]=E.useState(()=>{const _=localStorage.getItem("twwe_warehouse_folders");let m=_?JSON.parse(_):[];return m.some(f=>f.id==="bones_folder")||m.push({id:"bones_folder",name:" (Bones)",order:-1,isOpen:!0,parentId:null}),m}),[c,u]=E.useState(()=>{const _=localStorage.getItem("twwe_smart_tags");return _?JSON.parse(_):[]});E.useEffect(()=>{o.some(_=>_.id==="bones_folder")||l(_=>[..._,{id:"bones_folder",name:" (Bones)",order:-1,isOpen:!0,parentId:null}])},[o,l]),E.useEffect(()=>{localStorage.setItem("twwe_warehouse",JSON.stringify(s))},[s]),E.useEffect(()=>{localStorage.setItem("twwe_warehouse_folders",JSON.stringify(o))},[o]),E.useEffect(()=>{localStorage.setItem("twwe_smart_tags",JSON.stringify(c))},[c]);const d=E.useCallback(async _=>{const m=prompt(t("app.notification.enter_wand_name"),t("app.notification.my_wand"));if(!m)return;let f="",L="";try{const x=await(await fetch("/api/pinyin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:m})})).json();x.success&&(f=x.pinyin,L=x.initials)}catch(h){console.error("Pinyin fetch failed",h)}const w={..._,id:Math.random().toString(36).substring(2,11),name:m,pinyin:f,pinyin_initials:L,tags:[],createdAt:Date.now(),folderId:null};i(h=>[w,...h]),e({msg:t("app.notification.saved_to_warehouse",{name:m}),type:"success"}),r(!0)},[t,e]),p=E.useCallback(async()=>{try{const _=await fetch("/api/bones");if(!_.ok)throw new Error("Failed to fetch bones");const f=(await _.json()).wands||[];i(L=>{const w=L.filter(x=>x.folderId!=="bones_folder"),h=f.map(x=>({...x,folderId:"bones_folder",id:x.id||`bone_${Math.random().toString(36).substr(2,9)}`,createdAt:x.createdAt||Date.now()}));return[...w,...h]})}catch(_){throw console.error("Pull bones error:",_),_}},[i]),g=E.useCallback(async()=>{try{const _=s.filter(f=>f.folderId==="bones_folder"),m=await fetch("/api/bones",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wands:_})});if(!m.ok){const f=await m.json();throw new Error(f.error||"Failed to push bones")}}catch(_){throw console.error("Push bones error:",_),_}},[s]);return{isWarehouseOpen:n,setIsWarehouseOpen:r,warehouseWands:s,setWarehouseWands:i,warehouseFolders:o,setWarehouseFolders:l,smartTags:c,setSmartTags:u,saveToWarehouse:d,pullBones:p,pushBones:g}},cw=e=>{const{tabs:t,activeTab:n,activeTabId:r,settings:s,spellDb:i,clipboard:o,setClipboard:l,performAction:c,syncWand:u,setTabs:d,setNotification:p,lastLocalUpdateRef:g,setSelection:_,setPickerConfig:m,setPickerSearch:f,setPickerExpandedGroups:L,updateWand:w}=e,{t:h}=ke(),x=E.useCallback(()=>{const R=(Math.max(0,...Object.keys(n.wands).map(Number))+1).toString(),P={...Je,...s.defaultWandStats};g.current=Date.now(),c($=>({...$,[R]:P}),h("app.notification.add_new_wand",{slot:R})),n.isRealtime&&u(R,P),d($=>$.map(W=>W.id===r?{...W,expandedWands:new Set([...W.expandedWands,R])}:W))},[n,s.defaultWandStats,g,c,h,u,d,r]),v=E.useCallback(R=>{g.current=Date.now(),c(P=>{const $={...P};return delete $[R],$},h("app.notification.delete_wand",{slot:R})),n.isRealtime&&u(R,null,!0)},[g,c,h,n.isRealtime,u]),S=E.useCallback(R=>{d(P=>P.map($=>{if($.id===r){const W=new Set($.expandedWands);return W.has(R)?W.delete(R):W.add(R),{...$,expandedWands:W}}return $}))},[d,r]),z=E.useCallback(async R=>{const P=n.wands[R];if(P){const $=JSON.parse(JSON.stringify(P));l({type:"wand",data:$});const W=`{{Wand2
| wandCard     = Yes
| wandPic      = 
| spellsCast   = ${P.actions_per_round}
| shuffle      = ${P.shuffle_deck_when_empty?"Yes":"No"}
| castDelay    = ${(P.fire_rate_wait/60).toFixed(2)}
| reload_time = ${((P.reload_time||0)/60).toFixed(2)}
| manaMax      = ${(P.mana_max||0).toFixed(2)}
| manaCharge   = ${(P.mana_charge_speed||0).toFixed(2)}
| capacity     = ${P.deck_capacity||0}
| spread       = ${P.spread_degrees||0}
| speed        = ${(P.speed_multiplier||1).toFixed(2)}
| spells       = ${Array.from({length:P.deck_capacity}).map((C,y)=>P.spells[(y+1).toString()]||"").join(",")}
}}`;try{await navigator.clipboard.writeText(W),p({msg:h("app.notification.copied_to_clipboard"),type:"success"})}catch(C){console.error("Clipboard error:",C)}}},[n.wands,l,h,p]),j=E.useCallback(async R=>{var $;const P=n.wands[R];if(P){let W=`{{Wand
| wandPic =
| capacity = ${P.deck_capacity}
| shuffle = ${P.shuffle_deck_when_empty?"Yes":"No"}
| spellsCast = ${P.actions_per_round}
| alwaysCasts = ${P.always_cast?P.always_cast.map(C=>{var y;return((y=i[C])==null?void 0:y.en_name)||C}).join(","):""}
`;for(let C=1;C<=P.deck_capacity;C++){const y=P.spells[C.toString()],k=y?(($=i[y])==null?void 0:$.en_name)||y:"";W+=`| spell${C} = ${k}
`}W+="}}";try{await navigator.clipboard.writeText(W),p({msg:h("app.notification.copied_legacy_template"),type:"success"})}catch(C){console.error("Clipboard error:",C)}}},[n.wands,i,h,p]),I=E.useCallback(R=>{z(R),v(R)},[z,v]),H=E.useCallback(R=>{(o==null?void 0:o.type)==="wand"&&w(R,o.data)},[o,w]),U=E.useCallback((R,P,$)=>{let W,C,y="";if($&&"currentTarget"in $&&$.currentTarget){const k=$.currentTarget.getBoundingClientRect();W=k.left,C=k.bottom+8}else{const k=$;W=k.x,C=k.y,y=k.initialSearch||""}m({wandSlot:R,spellIdx:P,x:W,y:C}),f(y),L(new Set)},[m,f,L]);return E.useCallback((R,P=!1)=>{},[]),{addWand:x,deleteWand:v,toggleExpand:S,copyWand:z,copyLegacyWand:j,cutWand:I,pasteWand:H,openPicker:U}},uw=(e,t,n)=>{const{t:r}=ke(),s=E.useCallback((u,d=r("app.notification.unknown_action"),p,g=!0)=>{t(_=>_.map(m=>{if(m.id===n){const f=u(m.wands);if(!g)return{...m,wands:f};const L={id:Math.random().toString(36).substr(2,9),wands:JSON.parse(JSON.stringify(m.wands)),name:d,icons:p,timestamp:Date.now()};return{...m,wands:f,past:[...m.past.slice(-49),L],future:[]}}return m}))},[n,t,r]),i=E.useCallback(()=>{t(u=>u.map(d=>{if(d.id===n&&d.past&&d.past.length>0){const p=d.past[d.past.length-1],g={id:"redo-"+Date.now(),wands:JSON.parse(JSON.stringify(d.wands)),name:p.name,icons:p.icons,timestamp:Date.now()};return{...d,wands:p.wands,past:d.past.slice(0,-1),future:[g,...d.future||[]]}}return d}))},[n,t]),o=E.useCallback(()=>{t(u=>u.map(d=>{if(d.id===n&&d.future&&d.future.length>0){const p=d.future[0],g={id:"undo-"+Date.now(),wands:JSON.parse(JSON.stringify(d.wands)),name:p.name,icons:p.icons,timestamp:Date.now()};return{...d,wands:p.wands,past:[...d.past||[],g],future:d.future.slice(1)}}return d}))},[n,t]),l=E.useCallback(u=>{t(d=>d.map(p=>{if(p.id===n&&p.past&&p.past[u]){const g=p.past[u],_=[...p.past.slice(u+1),...p.future||[]],m={id:"jump-p-"+Date.now(),wands:JSON.parse(JSON.stringify(p.wands)),name:p.past[p.past.length-1].name,icons:p.past[p.past.length-1].icons,timestamp:Date.now()};return{...p,wands:g.wands,past:p.past.slice(0,u),future:[m,..._]}}return p}))},[n,t]),c=E.useCallback(u=>{t(d=>d.map(p=>{if(p.id===n&&p.future&&p.future[u]){const g=p.future[u],_=p.future.slice(0,u),m={id:"jump-f-"+Date.now(),wands:JSON.parse(JSON.stringify(p.wands)),name:g.name,icons:g.icons,timestamp:Date.now()};return{...p,wands:g.wands,past:[...p.past||[],m,..._],future:p.future.slice(u+1)}}return p}))},[n,t]);return E.useEffect(()=>{const u=d=>{(d.ctrlKey||d.metaKey)&&(d.key==="z"||d.key==="y")&&(d.key==="z"?(d.shiftKey?o():i(),d.preventDefault()):d.key==="y"&&(o(),d.preventDefault()))};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[i,o]),{performAction:s,undo:i,redo:o,jumpToPast:l,jumpToFuture:c}};function dw(){const{t:e,i18n:t}=ke(),{settings:n,setSettings:r}=Zy(),[s,i]=E.useState(null),[o,l]=E.useState(!1),[c,u]=E.useState(null),[d,p]=E.useState(!1),g=E.useRef(0),{tabs:_,setTabs:m,activeTabId:f,setActiveTabId:L,activeTab:w,addNewTab:h,deleteTab:x,exportAllData:v,importAllData:S,importWorkflow:z,exportWorkflow:j}=sw(n,r),{performAction:I,undo:H,redo:U,jumpToPast:R,jumpToFuture:P}=uw(_,m,f),{isWarehouseOpen:$,setIsWarehouseOpen:W,warehouseWands:C,setWarehouseWands:y,warehouseFolders:k,setWarehouseFolders:b,smartTags:N,setSmartTags:M,saveToWarehouse:T,pullBones:D,pushBones:F}=lw(u),[G,Y]=E.useState(null),{isConnected:K,syncWand:Z,pullData:ne,pushAllToGame:he,toggleSync:pe,resolveConflict:ae}=rw({activeTab:w,activeTabId:f,settings:n,setTabs:m,performAction:I,setNotification:u,setConflict:Y,t:e,lastLocalUpdateRef:g}),{spellDb:oe,spellNameToId:ce,syncGameSpells:ve,fetchSpellDb:se}=tw(K),Re=()=>ve(u),Se=async()=>{if(K){u({msg:e("app.notification.exporting_mod_bundle"),type:"info"});try{const Kt=await(await fetch("/api/export-mod-bundle")).json();if(Kt.success){const vt=prompt(e("app.notification.enter_bundle_name"),`ModBundle_${new Date().toLocaleDateString()}`);if(!vt)return;const Lt={id:`mod_bundle_${Date.now()}`,name:vt,timestamp:Date.now(),spells:Kt.spells,appends:Kt.appends,active_mods:Kt.active_mods,vfs:Kt.vfs||{}};await Nf(Lt);const Pt=new Blob([JSON.stringify(Lt,null,2)],{type:"application/json"}),Jt=URL.createObjectURL(Pt),dt=document.createElement("a");dt.href=Jt,dt.download=`${vt}.twwe-env.json`,dt.click(),u({msg:e("app.notification.export_mod_bundle_success"),type:"success"})}}catch{u({msg:e("app.notification.export_mod_bundle_failed"),type:"error"})}}},[we,ye]=E.useState(null),{pickerSearch:$e,setPickerSearch:Ke,pickerExpandedGroups:le,setPickerExpandedGroups:ee,spellStats:We,searchResults:Ue}=ow(_,oe,n),{evalResults:be,requestEvaluation:gn}=aw(w,n,K),Et=E.useCallback((it,Kt,vt=e("app.notification.modify_wand"),Lt)=>{g.current=Date.now(),I(Pt=>{const dt={...Pt[it]||{...Je},...Kt};return w.isRealtime&&Z(it,dt),{...Pt,[it]:dt}},vt,Lt)},[w.isRealtime,I,Z,e]),{selection:Gr,setSelection:st,selectionRef:Hn,isSelecting:Ca,setIsSelecting:nn,dragSource:Kr,setDragSource:Ks,isDraggingFile:Js,setIsDraggingFile:Qs,mousePos:Ys,setMousePos:O,hoveredSlot:A,setHoveredSlot:V,hoveredSlotRef:B,handleSlotMouseDown:Q,handleSlotMouseUp:q,handleSlotMouseEnter:ue,handleSlotMouseMove:te,handleSlotMouseLeave:me,insertEmptySlot:ge}=iw({activeTab:w,settings:n,performAction:I,syncWand:Z}),[Le,Pe]=E.useState(null),{addWand:Te,deleteWand:xn,toggleExpand:Vn,copyWand:wt,copyLegacyWand:za,cutWand:Zw,pasteWand:dh,openPicker:ph}=cw({tabs:_,activeTab:w,activeTabId:f,settings:n,spellDb:oe,clipboard:Le,setClipboard:Pe,performAction:I,syncWand:Z,setTabs:m,setNotification:u,lastLocalUpdateRef:g,setSelection:st,setPickerConfig:ye,setPickerSearch:Ke,setPickerExpandedGroups:ee,updateWand:Et}),fh=()=>ge(Et),{importFromText:hh,copyToClipboard:mh,pasteFromClipboard:gh,readMetadataFromPng:xh}=nw({activeTab:w,activeTabId:f,spellDb:oe,spellNameToId:ce,settings:n,t:e,performAction:I,updateWand:Et,syncWand:Z,setTabs:m,setActiveTabId:L,setNotification:u,hoveredSlotRef:B,selectionRef:Hn});ew({activeTab:w,activeTabId:f,tabs:_,settings:n,spellDb:oe,dragSource:Kr,pickerConfig:we,notification:c,setTabs:m,setActiveTabId:L,setIsHistoryOpen:l,setIsWarehouseOpen:W,setSelection:st,setIsSelecting:nn,setDragSource:Ks,setMousePos:O,setIsDraggingFile:Qs,setNotification:u,setTabMenu:i,selectionRef:Hn,hoveredSlotRef:B,importFromText:hh,copyToClipboard:mh,pasteFromClipboard:gh,readMetadataFromPng:xh,insertEmptySlot:fh,updateWand:Et});const yh=(it,Kt=!1)=>{if(!we)return;const{wandSlot:vt,spellIdx:Lt}=we;if(g.current=Date.now(),I(Pt=>{const Jt=Pt[vt]||{...Je};if(Lt.startsWith("ac-")){const dt=parseInt(Lt.split("-")[1]),yn=[...Jt.always_cast||[]];it?dt>=yn.length?yn.push(it):yn[dt]=it:yn.splice(dt,1);const vc={...Jt,always_cast:yn};return w.isRealtime&&Z(vt,vc),{...Pt,[vt]:vc}}else{const dt={...Jt.spells};it?dt[Lt]=it:delete dt[Lt];const yn={...Jt,spells:dt};return w.isRealtime&&Z(vt,yn),{...Pt,[vt]:yn}}},it?e("app.notification.change_spell"):e("app.notification.clear_slot",{idx:Lt}),it?[it]:[]),ye(null),Kt&&it&&!Lt.startsWith("ac-")){const Pt=parseInt(Lt),Jt=w.wands[vt];Jt&&Pt<Jt.deck_capacity?st({wandSlot:vt,indices:[Pt+1],startIdx:Pt+1}):st(null)}else Kt||st(null)};return a.jsxs("div",{className:"flex flex-col h-screen bg-zinc-950 overflow-hidden text-zinc-100 selection:bg-purple-500/30",children:[a.jsx(px,{tabs:_,activeTabId:f,setActiveTabId:L,setTabs:m,setTabMenu:i,addNewTab:h,deleteTab:x,pullData:ne,pushData:he,toggleSync:pe,addWand:Te,clipboard:Le,activeTab:w,performAction:I,importWorkflow:z,exportWorkflow:j,setIsSettingsOpen:p,isConnected:K,setIsWarehouseOpen:W,syncGameSpells:Re,exportModBundle:Se}),a.jsxs("main",{className:"flex-1 flex overflow-hidden relative",children:[a.jsx(fy,{activeTab:w,isConnected:K,spellDb:oe,selection:Gr,hoveredSlot:A,dragSource:Kr,clipboard:Le,toggleExpand:Vn,deleteWand:xn,copyWand:wt,copyLegacyWand:za,pasteWand:dh,updateWand:Et,requestEvaluation:gn,handleSlotMouseDown:Q,handleSlotMouseUp:q,handleSlotMouseEnter:ue,handleSlotMouseMove:te,handleSlotMouseLeave:me,openPicker:ph,setSelection:st,setSettings:r,evalResults:be,settings:n,saveToWarehouse:T}),a.jsx(qy,{pickerConfig:we,setPickerConfig:ye,pickerSearch:$e,setPickerSearch:Ke,pickSpell:yh,searchResults:Ue,spellStats:We,settings:n,setSettings:r,pickerExpandedGroups:le,setPickerExpandedGroups:ee,isConnected:K,isSettingsOpen:d,setIsSettingsOpen:p,onReloadSpells:se,importAllData:S,exportAllData:v,tabMenu:s,setTabMenu:i,tabs:_,setTabs:m,toggleSync:pe,exportWorkflow:j,conflict:G,activeTab:w,resolveConflict:ae,isHistoryOpen:o,setIsHistoryOpen:l,spellDb:oe,jumpToPast:R,jumpToFuture:P,undo:H,redo:U,isWarehouseOpen:$,setIsWarehouseOpen:W,warehouseWands:C,setWarehouseWands:y,warehouseFolders:k,setWarehouseFolders:b,smartTags:N,setSmartTags:M,saveToWarehouse:T,performAction:I,activeTabId:f,syncWand:Z,setNotification:u,dragSource:Kr,mousePos:Ys,isDraggingFile:Js,setSelection:st,pullBones:D,pushBones:F})]}),a.jsx(fx,{isConnected:K,activeTab:w,tabsCount:_.length,notification:c})]})}const{slice:pw,forEach:fw}=[];function hw(e){return fw.call(pw.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}function mw(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(e))}const cd=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,gw=function(e,t){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},s=encodeURIComponent(t);let i=`${e}=${s}`;if(r.maxAge>0){const o=r.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(o)}`}if(r.domain){if(!cd.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!cd.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(i+="; Partitioned"),i},ud={create(e,t,n,r){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(s.expires=new Date,s.expires.setTime(s.expires.getTime()+n*60*1e3)),r&&(s.domain=r),document.cookie=gw(e,t,s)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let s=n[r];for(;s.charAt(0)===" ";)s=s.substring(1,s.length);if(s.indexOf(t)===0)return s.substring(t.length,s.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var xw={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return ud.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:s,cookieOptions:i}=t;n&&typeof document<"u"&&ud.create(n,e,r,s,i)}},yw={name:"querystring",lookup(e){var r;let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:s}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")));const o=s.substring(1).split("&");for(let l=0;l<o.length;l++){const c=o[l].indexOf("=");c>0&&o[l].substring(0,c)===t&&(n=o[l].substring(c+1))}}return n}},ww={name:"hash",lookup(e){var s;let{lookupHash:t,lookupFromHashIndex:n}=e,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const o=i.substring(1);if(t){const l=o.split("&");for(let c=0;c<l.length;c++){const u=l[c].indexOf("=");u>0&&l[c].substring(0,u)===t&&(r=l[c].substring(u+1))}}if(r)return r;if(!r&&n>-1){const l=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?(s=l[typeof n=="number"?n:0])==null?void 0:s.replace("/",""):void 0}}}return r}};let fr=null;const dd=()=>{if(fr!==null)return fr;try{if(fr=typeof window<"u"&&window.localStorage!==null,!fr)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{fr=!1}return fr};var vw={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&dd())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&dd()&&window.localStorage.setItem(n,e)}};let hr=null;const pd=()=>{if(hr!==null)return hr;try{if(hr=typeof window<"u"&&window.sessionStorage!==null,!hr)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{hr=!1}return hr};var _w={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&pd())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&pd()&&window.sessionStorage.setItem(n,e)}},bw={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:s}=navigator;if(n)for(let i=0;i<n.length;i++)t.push(n[i]);r&&t.push(r),s&&t.push(s)}return t.length>0?t:void 0}},kw={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const r=t||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},jw={name:"path",lookup(e){var s;let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(s=n[typeof t=="number"?t:0])==null?void 0:s.replace("/",""):void 0}},Sw={name:"subdomain",lookup(e){var s,i;let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,r=typeof window<"u"&&((i=(s=window.location)==null?void 0:s.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let lh=!1;try{document.cookie,lh=!0}catch{}const ch=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];lh||ch.splice(1,1);const Nw=()=>({order:ch,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class uh{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=hw(n,this.options||{},Nw()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=s=>s.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(xw),this.addDetector(yw),this.addDetector(vw),this.addDetector(_w),this.addDetector(bw),this.addDetector(kw),this.addDetector(jw),this.addDetector(Sw),this.addDetector(ww)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return t.forEach(r=>{if(this.detectors[r]){let s=this.detectors[r].lookup(this.options);s&&typeof s=="string"&&(s=[s]),s&&(n=n.concat(s))}}),n=n.filter(r=>r!=null&&!mw(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(t,this.options)}))}}uh.type="languageDetector";const Cw={title:"TWWE",notification:{saved_to_warehouse:"Saved to warehouse: {{name}}",pasted_new_wand:"Pasted as new wand from clipboard (Slot {{slot}})",copied_to_clipboard:"Copied to clipboard",cut_to_clipboard:"Cut to clipboard",exported_workflow:"Workflow exported",pushed_to_game:"Pushed {{count}} wands from current workflow to game",renamed_workflow:"Rename workflow:",enter_wand_name:"Enter wand name",my_wand:"My Wand",set_charges_0:"Modify charges: Set to 0",restore_charges:"Modify charges: Restore default",drop_to_import:"Drop to Import Wand",import_formats:"PNG Image or JSON Workflow",unknown_action:"Unknown Action",move_spell:"Move Spell",modify_wand:"Modify Wand",paste_to_always_cast:"Paste Spell to Always Cast",create_new_wand_from_paste:"Create new wand from paste (Slot {{slot}})",paste_wand_data:"Paste Wand Data",insert_exceed_capacity_confirm:"Inserting spells exceeds current capacity ({{lastIdx}} > {{capacity}}). Automatically expand?",insert_spell_sequence:"Insert Spell Sequence",cut_spell:"Cut Spell",insert_empty_slot:"Insert Empty Slot",delete_wand_slot:"Delete Wand Slot",delete_spell:"Delete Spell",imported_from_image:"Imported wand configuration from image",imported_workflow_name:"Imported Workflow: {{name}}",imported_from_text:"Imported from dropped text",syncing_mod_spells:"Syncing mod spells from game...",sync_mod_spells_success:"Sync successful: Loaded {{count}} mod spells",sync_failed:"Sync failed",sync_failed_with_error:"Sync failed: {{error}}",force_pull_game_data:"Force pull game data",auto_sync_web_over_game:"Auto-sync: Web edits overwritten game",auto_sync_game_to_new:"Auto-sync: Game state saved as new workflow",sync_from_game:"Sync data from game",initial_sync:"Initial Sync",not_connected_to_game:"Not connected to game, cannot push",push_failed:"Push failed",new_workflow_default:"New Workflow {{id}}",add_new_wand:"Add New Wand (Slot {{slot}})",delete_wand:"Delete Wand (Slot {{slot}})",copied_legacy_template:"Copied as legacy {{Wand}} template",change_spell:"Change Spell",clear_slot:"Clear Slot {{idx}}",import_backup_confirm:"Importing a backup will overwrite all current workflows and settings. Continue?",import_all_success:"All data imported successfully!",import_failed_format:"Import failed: Invalid file format",import_failed_generic:"Import failed: Format error",imported_from_warehouse:"Imported wand from warehouse ({{name}})",imported_wand_success:"Imported wand: {{name}}",import_yukimi_confirm:"Attempting to import all saves from Wand Editor (Yukimi), continue?",import_spell_lab_confirm:"Attempting to import all saves from Spell Lab Shugged, continue?",delete_smart_tag_confirm:"Are you sure you want to delete this smart tag?",import_tags_success:"Successfully imported {{count}} new tags",import_tags_none:"No new tags imported (may already exist or invalid format)",smart_tag_edit_tip:"Right click to clear, Ctrl+V to paste",empty_slot_tip:"Empty slot (Click below to add, right click to clear)",exporting_mod_bundle:"Exporting Mod Environment Bundle...",enter_bundle_name:"Enter Environment Bundle Name",export_mod_bundle_success:"Mod Bundle exported successfully!",export_mod_bundle_failed:"Mod Bundle export failed",import_mod_bundle_success:"Mod Bundle imported successfully!"}},zw={new_wand:"New Wand",import:"Import",export:"Export",warehouse:"Wand Warehouse",history:"History"},Ew={realtime:"Game Sync",sandbox:"Sandbox",new_workflow:"New Workflow",sync_saved:"[Sync Save] {{name}}",backup:"[Backup] {{name}}",waiting_data:"Waiting for data sync or add a wand to this workflow...",empty_wand:"Empty Wand",workflow_options:"Workflow Options",rename:"Rename",export_json:"Export this workflow (.json)",open_warehouse:"Open Wand Warehouse",open_history:"Open History Panel",clear_history:"Clear History",clear_history_confirm:"Are you sure you want to clear all history? (Cannot be undone)",off_sync:"Turn off auto-sync",on_sync:"Turn on auto-sync",manual:"Manual"},Lw={overall_counts:"Overall Spell Counts",shot_states:"Shot States",execution_flow:"Execution Flow (Recursive Tree)",cast_final_settlement:"Cast Final Settlement",cast_delay:"Cast Delay",recharge_time:"Recharge Time",mana_drain:"Mana Drain",shot_state_label:"Shot State",nodes_count:"Nodes",auto_folded:"Auto-folded",repeat_merged:"Merged",expand_all_details:"Expand all {{count}} casts",expand_all_trees:"Expand all {{count}} trees",collapse_preview:"Collapse to preview",cast_stats:"Cast Stats",stage:"Stage {{id}}",force_analyze:"Force Analyze",force_analyze_desc:"Restart engine and re-evaluate current wand (Fixes lag or sync issues)",analyzing:"Analyzing Wand...",evaluation_seed:"Random Seed",evaluation_seed_desc:"Manually specify a value to fix random results. Leave blank for default."},Pw={title:"Settings",categories:{general:"General",appearance:"Appearance",wand:"Wand",cast:"Cast Parameters",spell_types:"Spell Types",sync:"Sync",data:"Data"},language:"Language",common_limit:"Common Statistics Limit",category_limit:"Category Preview Limit",wrap_limit:"Items per Row Limit",picker_row_height:"Picker Row Height",warehouse_folder_height:"Warehouse Folder Max Height",warehouse_folder_height_desc:"* Set to 0 for unlimited folder height",unlimit:"Unlimited",editor_spell_gap:"Spell Slot Gap",hide_labels:"Hide Picker Group Labels",hide_labels_desc:"Hide 'Common Statistics' and category names in the spell picker for a more compact interface.",show_stats_in_frames:"Show time in Frames (1/60s)",show_stats_in_frames_desc:"Show cast delay and recharge time in frames (1/60s) instead of seconds.",show_legacy_wand_button:"Show Legacy Wand Copy Button",show_legacy_wand_button_desc:"Show a 'W' button on wand cards to copy in the old {{Wand}} template format for the Wiki.",delete_empty_slots:"Delete Key removes empty slots",delete_empty_slots_desc:"When pressing Delete, if the slot is already empty, directly remove the slot (reduce capacity).",default_wand_stats:"Default Wand Stats",unlimited_spells:"Unlimited Spells Perk",unlimited_spells_desc:"Simulate having the 'Unlimited Spells' perk. Note: Black Hole, Healing Bolt, etc., still have limited charges. (Due to a current bug, you must Alt+Left Click to set charges for these non-unlimited spells regardless of this setting)",initial_if_half:"Initial IF_HALF State (Triggered)",initial_if_half_desc:"When enabled, the first cast will not skip spells after IF_HALF; when disabled, it will skip. (New games default to not skipping on the first use)",simulate_low_hp:"Env: Low HP (<25%)",simulate_low_hp_desc:"Used for IF_HP; simulates the condition where HP is less than 25%.",simulate_many_enemies:"Env: Surrounded (>15 Enemies)",simulate_many_enemies_desc:"Used for IF_ENEMY; simulates more than 15 enemies nearby.",simulate_many_projectiles:"Env: Dense Projectiles",simulate_many_projectiles_desc:"Used for IF_PROJECTILE; simulates more than 20 projectiles nearby.",show_spell_charges:"Show Spell Charges",show_spell_charges_desc:"Show usage counts in the editor. Set to 0 to always show. (Note: Evaluation does not deduct charges; it only considers unlimited or 0 charges)",num_casts:"Evaluation Casts",num_casts_desc:"Simulates multiple clicks; mana consumption may cause different results per round.",stop_at_recharge:"Stop at Recharge",stop_at_recharge_desc:"Simulation will automatically stop when the wand starts recharging. 'Evaluation Casts' will act as the maximum limit.",auto_hide_threshold:"Tree Auto-hide Threshold",auto_hide_threshold_desc:"If the complexity of the first Cast exceeds this node count, subsequent Casts will be folded by default.",group_identical_casts:"Group Identical Casts",group_identical_casts_desc:"Merge consecutive casts with identical results to simplify the list.",fold_nodes:"Node Folding",fold_nodes_desc:"Merge consecutive identical nodes in the tree (e.g., x5). Disable this to see each individual spell, making marking easier.",show_indices:"Show Spell Slot Indices",show_indices_desc:"Display the index number (1, 2, 3...) at the bottom right of each spell slot. Holding ALT will temporarily show them even if disabled.",conflict_strategy:"Conflict Strategy",conflict_ask:"Ask Me",conflict_override:"Web First",conflict_new:"Save as New Workflow",data_backup:"Data Backup",export_history:"Export with History",export_history_desc:"Save undo/redo history along with the workflow data.",import_json:"Import JSON",export_backup:"Export Backup",embed_metadata:"Embed Metadata in Image",embed_metadata_desc:"When exporting an image, embed the Wand2 text data into the PNG. Others can drag the image into TWWE to restore the wand.",pure_spells_export:"Export Pure Spells (Transparent)",pure_spells_export_desc:"When enabled, 'Only Spells' export will remove slot backgrounds and borders, and auto-crop leading empty slots.",show_drag_mode_toggle:"Show Drag Mode Toggle",show_drag_mode_toggle_desc:"Show a floating window in the bottom-right corner to toggle Left Click behavior (Selection vs Direct Drag).",use_noita_swap_logic:"Use Noita Native Swap Logic",use_noita_swap_logic_desc:"When enabled, dragging a spell to an occupied slot will swap them instead of inserting and shifting.",drag_mode_cursor:"Cursor Mode (L-Click select, R-Drag move)",drag_mode_hand:"Hand Mode (L-Click drag move)",export_only_spells:"Only Spells",export_wand_and_spells:"With Stats",spell_type_colors:"Spell Type Colors",spell_group_management:"Spell Group Management",add_group:"Add Group",new_group_default_name:"New Group",contains_types:"Contains Types",search_placeholder:"Search settings...",no_results:"No results found",spell_types_list:{projectile:"Projectile",static_projectile:"Static Projectile",modifier:"Modifier",multicast:"Multicast",material:"Material",other:"Other",utility:"Utility",passive:"Passive"},spell_groups_list:{projectile:"Projectile",modifier:"Modifier",utility_multicast_other:"Utility + Multicast + Other",static_material_passive:"Static + Material + Passive"},wiki_language:"Wiki Language",wiki_language_desc:"Choose the Wiki language version to open when Ctrl + Middle Clicking a spell.",mod_environments:"Mod Environment Management",import_mod_bundle:"Import Mod Bundle (.twwe-env.json)",delete_mod_bundle_confirm:"Are you sure you want to delete this Mod Environment? Related spell definitions and logic will be lost."},Ow={title:"Wand Warehouse",search_placeholder:"Search wands...",new_folder:"New Folder",sort_by_date:"Sort by Date",sort_by_name:"Sort by Name",folders:"Folders",root_folder:"All Wands (Root)",manage_smart_tags:"Manage Smart Tags",empty_folder:"This folder is empty",loading_more:"Loading more...",import_wand_editor:"Import from Wand Editor",import_spell_lab:"Import from Spell Lab Shugged",restore:"Restore",backup:"Backup",rename_wand:"Rename Wand",add_tag:"Add Tag",delete_wand_confirm:"Are you sure you want to delete this wand?",delete_multiple_confirm:"Are you sure you want to delete the selected {{count}} wands?",delete_folder_confirm:"Are you sure you want to delete this folder and all wands inside?",rename_folder:"Rename Folder",export_folder:"Export this Folder",new_subfolder:"New Subfolder",delete:"Delete",smart_tags_title:"Smart Tag Management",new_smart_tag:"New Smart Tag",no_smart_tags:"No smart tags yet, click button above to create",edit_smart_tag:"Edit Smart Tag",tag_name:"Tag Name",match_mode:"Match Mode",strict_order:"Strict Order",contains:"Contains",spell_combination:"Spell Combination (Edit like a wand)",search_spells:"Search and click to add spells...",save_smart_tag:"Save Smart Tag",cancel:"Cancel",import_success:"Successfully imported {{count}} wands",selected_wands:"{{count}} Selected",backup_detected:`Backup file detected.
Contains {{wandCount}} wands, {{folderCount}} folders.

Merge into current warehouse? (Click 'Cancel' to overwrite current warehouse)`,all_wands:"{{count}} Wands",export_tag:"Export this tag",import_plans:"Import Plans",export_plans:"Export Plans",combination_placeholder:"e.g. 10 10 4 2",import_yukimi_confirm:"Attempting to import all saves from Wand Editor (Yukimi), continue?",import_spell_lab_confirm:"Attempting to import all saves from Spell Lab Shugged, continue?",delete_smart_tag_confirm:"Are you sure you want to delete this smart tag?",import_tags_success:"Successfully imported {{count}} new tags",import_tags_none:"No new tags imported (may already exist or invalid format)",smart_tag_edit_tip:"Right click to clear, Ctrl+V to paste",empty_slot_tip:"Empty slot (Click below to add, right click to clear)",pull_bones:"Pull Bones from Disk",push_bones:"Push Bones to Disk",pull_bones_confirm:"Pulling will read all bone wands from disk and overwrite the contents of this folder. Continue?",push_bones_confirm:"Pushing will overwrite bone files on disk with the current folder's content (auto-backup to twwe_bones_backups). Continue?",push_bones_success:"Successfully pushed {{count}} bone wands. Original files backed up to persistent directory."},Mw={copy:"Copy (Ctrl+C)",copy_legacy:"Copy as legacy Wand template",paste_overwrite:"Paste (Overwrite)",save_to_warehouse:"Save to Warehouse"},Iw={title:"History",no_records:"No records found",current_state:"Current State",latest_version:"Latest Working Version",undo:"Undo (Ctrl+Z)",redo:"Redo (Ctrl+Y)",scope_info:"History is per-workflow only",close:"Close Panel"},Rw={mana_max:"Mana",mana_charge_speed:"Recharge",fire_rate_wait:"Delay",reload_time:"Rechg",deck_capacity:"Cap.",spread_degrees:"Spr.",always_casts:"Always Casts:"},$w={shuffle:"Shuffle",no_shuffle:"No Shuffle",mana_max:"Mana Max",recharge:"Recharge",cast_delay:"Cast Delay",recharge_time:"Rechg. Time",capacity:"Capacity",spread:"Spread",spells_per_cast:"Spells/Cast",speed:"Speed",always_cast_slots:"Always Cast Slots",modify_uses_tip:"Click to modify charges (Alt+Click to set to 0, click again to restore)",enter_sprite_path:"Enter wand sprite path (data/ui_gfx/items/...)"},Dw={title:"Sync Conflict Detected",description:"You modified wands on the web while offline, and game data also changed. Please choose how to proceed:",use_web:"Use Web Changes (Overwrite Game)",use_web_desc:"Forcibly sync your current edits to the game",use_game:"Use Game Data (Discard Web Edits)",use_game_desc:"Discard your recent web edits and pull the latest game state",use_both:"Keep Both (Save as new Workflow)",use_both_desc:"Keep web edits and save game data as a new tab"},Tw={title:"Operation Guide & Shortcuts",subtitle:"Shortcuts & Operation Guide",categories:{basic:"Basic Editing",mouse:"Mouse Operations",advanced:"Advanced Features",tips:"Evaluator Tips"},shortcuts:{copy_paste:"Copy, paste, or cut selected spells",select_all:"Select all spells in the current wand",undo_redo:"Undo or redo actions",delete:"Delete selected spells",insert_slot:"Insert an empty slot at the selection",remove_slot:"Remove slot when pressing on empty (if enabled)",select_toggle:"Select or deselect a spell",box_select:"Box-select multiple spells",move_spells:"Move selected spells (grab and drop)",to_always_cast:"Convert spell to 'Always Cast'",modify_uses:"Modify spell charges (set to 0 to simulate drained)",show_indices:"Temporarily show all slot indices",toggle_warehouse:"Quickly open/close wand warehouse",toggle_history:"Quickly open/close history panel"},tips:{triggered:"Red Triangle: Indicates environment simulations (IF_HP, IF_PROJECTILE, IF_ENEMY) are set to triggered (not skipped).",skipped:"Grayscale Icon: Indicates the spell is out of charges or was skipped due to conditions.",rounds:"The number of evaluation rounds can be adjusted in 'Cast Parameters' (default is 3)."},button:"Shortcuts Guide"},Fw={app:Cw,nav:zw,tabs:Ew,evaluator:Lw,settings:Pw,warehouse:Ow,wand_card:Mw,history:Iw,wand_stats:Rw,editor:$w,conflict:Dw,guide:Tw},Aw={title:"TWWE",notification:{saved_to_warehouse:": {{name}}",pasted_new_wand:" ( {{slot}})",copied_to_clipboard:"",cut_to_clipboard:"",exported_workflow:"",pushed_to_game:" {{count}} ",renamed_workflow:":",enter_wand_name:"",my_wand:"",set_charges_0:":  0",restore_charges:": ",drop_to_import:" (Drop to Import)",import_formats:" PNG  JSON ",unknown_action:"",move_spell:"",modify_wand:"",paste_to_always_cast:"",create_new_wand_from_paste:" ( {{slot}})",paste_wand_data:"",insert_exceed_capacity_confirm:" ({{lastIdx}} > {{capacity}})",insert_spell_sequence:"",cut_spell:"",insert_empty_slot:"",delete_wand_slot:"",delete_spell:"",imported_from_image:"",imported_workflow_name:": {{name}}",imported_from_text:"",syncing_mod_spells:"...",sync_mod_spells_success:" {{count}} ",sync_failed:"",sync_failed_with_error:": {{error}}",force_pull_game_data:"",auto_sync_web_over_game:"",auto_sync_game_to_new:"",sync_from_game:"",initial_sync:"",not_connected_to_game:"",push_failed:"",new_workflow_default:" {{id}}",add_new_wand:" ( {{slot}})",delete_wand:" ( {{slot}})",copied_legacy_template:"Wand",change_spell:"",clear_slot:" {{idx}}",import_backup_confirm:"",import_all_success:"",import_failed_format:": ",import_failed_generic:": ",imported_from_warehouse:" ({{name}})",imported_wand_success:": {{name}}",import_yukimi_confirm:" Wand Editor (Yukimi) ",import_spell_lab_confirm:" Spell Lab Shugged ",delete_smart_tag_confirm:"",import_tags_success:" {{count}} ",import_tags_none:"",smart_tag_edit_tip:",  Ctrl+V ",empty_slot_tip:" ()",exporting_mod_bundle:" Mod ...",enter_bundle_name:"",export_mod_bundle_success:"Mod ",export_mod_bundle_failed:"Mod ",import_mod_bundle_success:"Mod "}},Ww={new_wand:"",import:"",export:"",warehouse:"",history:""},Uw={realtime:"",sandbox:"",new_workflow:"",sync_saved:"[] {{name}}",backup:"[] {{name}}",waiting_data:"...",empty_wand:"",workflow_options:"",rename:"",export_json:" (.json)",open_warehouse:"",open_history:"",clear_history:"",clear_history_confirm:"()",off_sync:"",on_sync:"",manual:""},Hw={overall_counts:" (Overall)",shot_states:" (Shot States)",execution_flow:" (Recursive Tree)",cast_final_settlement:" (Final Settlement)",cast_delay:" (Cast Delay)",recharge_time:" (Recharge Time)",mana_drain:" (Mana Drain)",shot_state_label:" (Shot State)",nodes_count:"",auto_folded:"",repeat_merged:"",expand_all_details:" {{count}} ",expand_all_trees:" {{count}} ",collapse_preview:"",cast_stats:"",stage:" {{id}} ",force_analyze:"",force_analyze_desc:" ()",analyzing:"...",evaluation_seed:" (Seed)",evaluation_seed_desc:""},Vw={title:"Settings",categories:{general:"",appearance:"",wand:"",cast:"",spell_types:"",sync:"",data:""},language:" (Language)",common_limit:"",category_limit:"",wrap_limit:"",picker_row_height:"",warehouse_folder_height:"",warehouse_folder_height_desc:"*  0 ",unlimit:"",editor_spell_gap:"",hide_labels:"",hide_labels_desc:"",show_stats_in_frames:" (Frames)",show_stats_in_frames_desc:" (1/60s) ",show_legacy_wand_button:"Wand (Legacy)",show_legacy_wand_button_desc:" W  Wiki  {{Wand}} ",delete_empty_slots:"Delete ",delete_empty_slots_desc:" Delete ",default_wand_stats:"",unlimited_spells:" (Unlimited Spells)",unlimited_spells_desc:"(bug,,ALT+  )",initial_if_half:"IF_HALF  ()",initial_if_half_desc:" IF_HALF ()",simulate_low_hp:":  (25%)",simulate_low_hp_desc:" IF_HP, 25%, ",simulate_many_enemies:":  (15)",simulate_many_enemies_desc:" IF_ENEMY, 15, ",simulate_many_projectiles:": ",simulate_many_projectiles_desc:" IF_PROJECTILE, 20, ",show_spell_charges:" (Charges)",show_spell_charges_desc:"   0 (,,0)",num_casts:" (Casts)",num_casts_desc:"",stop_at_recharge:"",stop_at_recharge_desc:"",auto_hide_threshold:"",auto_hide_threshold_desc:" Cast  Cast ",group_identical_casts:" (Group Identical Casts)",group_identical_casts_desc:"",fold_nodes:" (Node Folding)",fold_nodes_desc:" x5",show_indices:"",show_indices_desc:" (1, 2, 3...) ALT ",conflict_strategy:"",conflict_ask:"",conflict_override:"",conflict_new:"",data_backup:"",export_history:"",export_history_desc:"/",import_json:" JSON",export_backup:"",embed_metadata:"",embed_metadata_desc:" Wand2  PNG  TWWE ",pure_spells_export:" ()",pure_spells_export_desc:"",show_drag_mode_toggle:"",show_drag_mode_toggle_desc:" vs ",use_noita_swap_logic:" Noita ",use_noita_swap_logic_desc:"",drag_mode_cursor:" (, )",drag_mode_hand:" ()",export_only_spells:"",export_wand_and_spells:"",spell_type_colors:"",spell_group_management:"",add_group:"",new_group_default_name:"",contains_types:"",search_placeholder:"...",no_results:"",spell_types_list:{projectile:"",static_projectile:"",modifier:"",multicast:"",material:"",other:"",utility:"",passive:""},spell_groups_list:{projectile:"",modifier:"",utility_multicast_other:"++",static_material_passive:"++"},wiki_language:"Wiki ",wiki_language_desc:" Ctrl+  Wiki  (Noita Wiki).",mod_environments:"Mod ",import_mod_bundle:" Mod  (.twwe-env.json)",delete_mod_bundle_confirm:" Mod "},Bw={title:"",search_placeholder:"...",new_folder:"",sort_by_date:"",sort_by_name:"",folders:"",root_folder:" ()",manage_smart_tags:"",empty_folder:"",loading_more:"...",import_wand_editor:" Wand Editor ",import_spell_lab:" Spell Lab Shugged ",restore:"",backup:"",rename_wand:"",add_tag:"",delete_wand_confirm:"",delete_multiple_confirm:" {{count}} ",delete_folder_confirm:"",rename_folder:"",export_folder:"",new_subfolder:"",delete:"",smart_tags_title:"",new_smart_tag:"",no_smart_tags:"",edit_smart_tag:"",tag_name:"",match_mode:"",strict_order:" (Strict Order)",contains:" (Contains)",spell_combination:" ()",search_spells:"...",save_smart_tag:"",cancel:"",import_success:" {{count}} ",selected_wands:" {{count}} ",backup_detected:`
 {{wandCount}} {{folderCount}} 

()`,all_wands:"{{count}} ",export_tag:"",import_plans:"",export_plans:"",combination_placeholder:": 10 10 4 2",import_yukimi_confirm:" Wand Editor (Yukimi) ",import_spell_lab_confirm:" Spell Lab Shugged ",delete_smart_tag_confirm:"",import_tags_success:" {{count}} ",import_tags_none:"",smart_tag_edit_tip:",  Ctrl+V ",empty_slot_tip:" ()",pull_bones:"",push_bones:"",pull_bones_confirm:"",push_bones_confirm:" twwe_bones_backups",push_bones_success:" {{count}}  persistent "},Gw={copy:" (Ctrl+C)",copy_legacy:"Wand",paste_overwrite:" ()",save_to_warehouse:""},Kw={title:"",no_records:"",current_state:"",latest_version:"",undo:" (Ctrl+Z)",redo:" (Ctrl+Y)",scope_info:"",close:""},Jw={mana_max:"",mana_charge_speed:"",fire_rate_wait:"",reload_time:"",deck_capacity:"",spread_degrees:"",always_casts:":"},Qw={shuffle:" (Shuffle)",no_shuffle:" (No Shuffle)",mana_max:" (Mana Max)",recharge:" (Recharge)",cast_delay:" (Cast Delay)",recharge_time:" (Rechg. Time)",capacity:" (Capacity)",spread:" (Spread)",spells_per_cast:" (Spells/Cast)",speed:" (Speed)",always_cast_slots:" (Always Cast Slots)",modify_uses_tip:" (Alt+0, )",enter_sprite_path:" (data/ui_gfx/items/...)"},Yw={title:"",description:"",use_web:" ()",use_web_desc:"",use_game:" ()",use_game_desc:"",use_both:" ()",use_both_desc:""},qw={title:"",subtitle:"Shortcuts & Operation Guide",categories:{basic:"",mouse:"",advanced:"",tips:""},shortcuts:{copy_paste:"",select_all:"",undo_redo:"",delete:"",insert_slot:"",remove_slot:" ()",select_toggle:"",box_select:"",move_spells:" ()",to_always_cast:"",modify_uses:" ( 0 )",show_indices:"",toggle_warehouse:"/",toggle_history:"/"},tips:{triggered:"(IF_HP, IF_PROJECTILE, IF_ENEMY)",skipped:"",rounds:" 3"},button:""},Xw={app:Aw,nav:Ww,tabs:Uw,evaluator:Hw,settings:Vw,warehouse:Bw,wand_card:Gw,history:Kw,wand_stats:Jw,editor:Qw,conflict:Yw,guide:qw};ut.use(uh).use(Y0).init({resources:{en:{translation:Fw},zh:{translation:Xw}},fallbackLng:"zh",interpolation:{escapeValue:!1},react:{useSuspense:!1}});co.createRoot(document.getElementById("root")).render(a.jsx(Ve.StrictMode,{children:a.jsx(dw,{})}));
